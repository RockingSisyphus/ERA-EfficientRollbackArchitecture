<template>
  <!-- å³ä¾§æ“ä½œå¡ï¼šå¤–å±‚è‡ªåŒ…å«ï¼Œä¸ä¾èµ–çˆ¶ç»„ä»¶æ ·å¼ -->
  <section class="action-buttons-card" role="complementary" aria-label="ERA å¿«æ·æ“ä½œ">
    <!-- ä¸­æ–‡æ³¨é‡Šï¼šæ“ä½œå¡å®¹å™¨ -->
    <h4 class="card-title">å¿«æ·æ“ä½œ</h4>
    <!-- ä¸­æ–‡æ³¨é‡Šï¼šå¡ç‰‡æ ‡é¢˜ -->
    <div class="btns">
      <!-- ä¸­æ–‡æ³¨é‡Šï¼šæŒ‰é’®å‚ç›´æ ˆ -->
      <button class="btn primary" title="é‡æ–°è®¡ç®—æ‰€æœ‰å˜é‡" @click.stop="onFullSync">
        <!-- ä¸­æ–‡æ³¨é‡Šï¼šä¸»æŒ‰é’® -->
        <span class="ico" aria-hidden="true">ğŸ”„</span>
        <!-- ä¸­æ–‡æ³¨é‡Šï¼šå›¾æ ‡ -->
        <span class="label">å®Œå…¨é‡ç®—å˜é‡</span>
        <!-- ä¸­æ–‡æ³¨é‡Šï¼šæ–‡å­— -->
      </button>
      <button class="btn subtle" title="åªé‡ç®—æœ€æ–°ä¸€æ¥¼çš„å˜é‡" @click.stop="onLastSync">
        <!-- ä¸­æ–‡æ³¨é‡Šï¼šæ¬¡æŒ‰é’® -->
        <span class="ico" aria-hidden="true">â™»ï¸</span>
        <!-- ä¸­æ–‡æ³¨é‡Šï¼šå›¾æ ‡ -->
        <span class="label">é‡ç®—æœ€åä¸€æ¥¼å˜é‡</span>
        <!-- ä¸­æ–‡æ³¨é‡Šï¼šæ–‡å­— -->
      </button>
    </div>
  </section>
</template>

<script setup lang="ts">
import { Logger } from '../../utils/log'; // ä¸­æ–‡æ³¨é‡Šï¼šæ—¥å¿—å·¥å…·

const logger = new Logger(); // ä¸­æ–‡æ³¨é‡Šï¼šå®ä¾‹åŒ–æ—¥å¿—

function onFullSync() {
  // ä¸­æ–‡æ³¨é‡Šï¼šå®Œå…¨é‡ç®—äº‹ä»¶
  logger.log('onFullSync', 'ç‚¹å‡»â€œå®Œå…¨é‡ç®—å˜é‡â€ï¼Œå‘é€ manual_full_sync äº‹ä»¶ã€‚'); // ä¸­æ–‡æ³¨é‡Šï¼šæ—¥å¿—
  eventEmit('manual_full_sync'); // ä¸­æ–‡æ³¨é‡Šï¼šå‘é€å…¨é‡é‡ç®—äº‹ä»¶ï¼ˆä¿æŒä¸å˜ï¼‰
}

function onLastSync() {
  // ä¸­æ–‡æ³¨é‡Šï¼šå±€éƒ¨é‡ç®—äº‹ä»¶
  logger.log('onLastSync', 'ç‚¹å‡»â€œé‡ç®—æœ€åä¸€æ¥¼å˜é‡â€ï¼Œå‘é€ manual_sync äº‹ä»¶ã€‚'); // ä¸­æ–‡æ³¨é‡Šï¼šæ—¥å¿—
  eventEmit('manual_sync'); // ä¸­æ–‡æ³¨é‡Šï¼šå‘é€å•æ¥¼é‡ç®—äº‹ä»¶ï¼ˆä¿æŒä¸å˜ï¼‰
}
</script>

<style scoped>
/* === å¤–å±‚å¡ç‰‡ï¼šä¸å·¦ä¾§ ERA é¢æ¿åŒé£æ ¼ï¼ˆç»ç’ƒå¡ + è½»æµ®é›•ï¼‰ === */
.action-buttons-card {
  /* ä¸­æ–‡æ³¨é‡Šï¼šå¡ç‰‡å®¹å™¨ */
  width: 100%; /* å æ»¡ä¾§æ  */ /* ä¸­æ–‡æ³¨é‡Šï¼šè‡ªé€‚åº”å®½åº¦ */
  padding: 12px; /* å†…è¾¹è· */ /* ä¸­æ–‡æ³¨é‡Šï¼šç•™ç™½ */
  background: var(--actions-bg-glass);
  border: 1px solid var(--border-strong);
  border-radius: 16px; /* ä¸­æ–‡æ³¨é‡Šï¼šåœ†è§’ */
  backdrop-filter: blur(10px); /* ä¸­æ–‡æ³¨é‡Šï¼šæ¯›ç»ç’ƒæ•ˆæœ */
  box-shadow: var(--actions-shadow-card), var(--shadow-inset);
  display: flex; /* ä¸­æ–‡æ³¨é‡Šï¼šçºµå‘å¸ƒå±€ */
  flex-direction: column; /* ä¸­æ–‡æ³¨é‡Šï¼šå‚ç›´æ’åˆ— */
  gap: 10px; /* ä¸­æ–‡æ³¨é‡Šï¼šå…ƒç´ é—´è· */
  transition:
    background 0.3s ease,
    border-color 0.3s ease;
}

/* æ ‡é¢˜ï¼šä¸é¢æ¿æ ‡é¢˜æƒé‡æ¥è¿‘ä½†ç•¥è½» */
.card-title {
  /* ä¸­æ–‡æ³¨é‡Šï¼šå¡ç‰‡æ ‡é¢˜ */
  margin: 0 0 4px; /* ä¸­æ–‡æ³¨é‡Šï¼šåº•éƒ¨ç•™ç™½ */
  font-size: 14px; /* ä¸­æ–‡æ³¨é‡Šï¼šå­—å· */
  font-weight: 800; /* ä¸­æ–‡æ³¨é‡Šï¼šåŠ ç²— */
  letter-spacing: 0.3px; /* ä¸­æ–‡æ³¨é‡Šï¼šå­—è· */
  color: var(--text-title);
  transition: color 0.3s ease;
}

/* æŒ‰é’®æ ˆï¼šç«–ç›´æ’åˆ— */
.btns {
  /* ä¸­æ–‡æ³¨é‡Šï¼šæŒ‰é’®å®¹å™¨ */
  display: flex; /* ä¸­æ–‡æ³¨é‡Šï¼šflex å¸ƒå±€ */
  flex-direction: column; /* ä¸­æ–‡æ³¨é‡Šï¼šå‚ç›´æ’åˆ— */
  gap: 10px; /* ä¸­æ–‡æ³¨é‡Šï¼šä¸Šä¸‹é—´è· */
}

/* é€šç”¨æŒ‰é’®é€ å‹ï¼šå¤§å·ã€æ˜“ç‚¹ã€å¯èšç„¦ */
.btn {
  /* ä¸­æ–‡æ³¨é‡Šï¼šé€šç”¨æŒ‰é’® */
  display: grid; /* ä¸­æ–‡æ³¨é‡Šï¼šç½‘æ ¼æ–¹ä¾¿å¯¹é½å›¾æ ‡ä¸æ–‡å­— */
  grid-template-columns: 22px 1fr; /* ä¸­æ–‡æ³¨é‡Šï¼šå·¦ 22px å›¾æ ‡ + å³ä¾§æ–‡å­— */
  align-items: center; /* ä¸­æ–‡æ³¨é‡Šï¼šå‚ç›´å±…ä¸­ */
  column-gap: 8px; /* ä¸­æ–‡æ³¨é‡Šï¼šå›¾æ ‡ä¸æ–‡å­—é—´è· */
  padding: 10px 12px; /* ä¸­æ–‡æ³¨é‡Šï¼šè§¦æ§å‹å¥½å°ºå¯¸ */
  border-radius: 12px; /* ä¸­æ–‡æ³¨é‡Šï¼šåœ†è§’ */
  border: 1px solid var(--border-soft);
  background: var(--actions-btn-bg);
  color: var(--actions-btn-text);
  font-weight: 700; /* ä¸­æ–‡æ³¨é‡Šï¼šå­—é‡ */
  font-size: 13px; /* ä¸­æ–‡æ³¨é‡Šï¼šå­—å· */
  cursor: pointer; /* ä¸­æ–‡æ³¨é‡Šï¼šå¯ç‚¹å‡» */
  box-shadow: var(--settings-shadow-inset), var(--shadow-button);
  transition:
    transform 0.12s ease,
    box-shadow 0.12s ease,
    background 0.2s ease,
    color 0.3s ease,
    border-color 0.3s ease;
  text-align: left; /* ä¸­æ–‡æ³¨é‡Šï¼šé å·¦ */
}

/* ä¸»æŒ‰é’®ï¼šç•¥å¸¦å“ç‰Œè‰²è°ƒï¼ˆè“é’ï¼‰ */
.btn.primary {
  /* ä¸­æ–‡æ³¨é‡Šï¼šä¸»æŒ‰é’® */
  background: var(--actions-btn-primary-bg);
  border-color: var(--actions-btn-primary-border);
  color: var(--actions-btn-primary-text);
}

/* æ¬¡æŒ‰é’®ï¼šæ›´ç´ é›… */
.btn.subtle {
  /* ä¸­æ–‡æ³¨é‡Šï¼šæ¬¡æŒ‰é’® */
  background: var(--actions-btn-subtle-bg);
  border-color: var(--actions-btn-subtle-border);
}

/* æ‚¬åœä¸æŒ‰å‹åé¦ˆ */
.btn:hover {
  /* ä¸­æ–‡æ³¨é‡Šï¼šæ‚¬åœæ€ */
  transform: translateY(-1px); /* ä¸­æ–‡æ³¨é‡Šï¼šè½»æµ®èµ· */
  box-shadow: var(--settings-shadow-inset), var(--shadow-button-hover);
}
.btn:active {
  /* ä¸­æ–‡æ³¨é‡Šï¼šæŒ‰ä¸‹æ€ */
  transform: translateY(0); /* ä¸­æ–‡æ³¨é‡Šï¼šå›è½ */
  box-shadow: var(--settings-shadow-inset), var(--actions-shadow-btn-active);
}

/* ç„¦ç‚¹å¯è§æ€§ï¼ˆæ— éšœç¢ï¼‰ */
.btn:focus-visible {
  /* ä¸­æ–‡æ³¨é‡Šï¼šé”®ç›˜èšç„¦æ€ */
  outline: 2px solid var(--actions-outline-focus);
  outline-offset: 2px; /* ä¸­æ–‡æ³¨é‡Šï¼šæè¾¹åç§» */
}

/* å›¾æ ‡ä¸æ–‡å­— */
.ico {
  /* ä¸­æ–‡æ³¨é‡Šï¼šå›¾æ ‡æ¡† */
  display: inline-grid; /* ä¸­æ–‡æ³¨é‡Šï¼šç½‘æ ¼æ”¾ç½® */
  place-items: center; /* ä¸­æ–‡æ³¨é‡Šï¼šå±…ä¸­ */
  width: 22px; /* ä¸­æ–‡æ³¨é‡Šï¼šå®½åº¦ */
  height: 22px; /* ä¸­æ–‡æ³¨é‡Šï¼šé«˜åº¦ */
  filter: saturate(0.95); /* ä¸­æ–‡æ³¨é‡Šï¼šè½»é¥±å’Œ */
}
.label {
  /* ä¸­æ–‡æ³¨é‡Šï¼šæ–‡å­— */
  white-space: nowrap; /* ä¸­æ–‡æ³¨é‡Šï¼šä¸æ¢è¡Œï¼ˆæ–‡å­—çŸ­ï¼‰ */
  overflow: hidden; /* ä¸­æ–‡æ³¨é‡Šï¼šæº¢å‡ºè£å‰ª */
  text-overflow: ellipsis; /* ä¸­æ–‡æ³¨é‡Šï¼šçœç•¥å· */
}
</style>
