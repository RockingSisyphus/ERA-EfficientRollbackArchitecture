_;class e{moduleName;constructor(e){this.moduleName=e}formatMessage(e,t){return`《ERA-事件监听器》「${this.moduleName}」【${e}】${String(t)}`}debug(e,t){console.debug(this.formatMessage(e,t))}log(e,t){console.log(`%c${this.formatMessage(e,t)}`,'color: #3498db;')}warn(e,t){console.warn(`%c${this.formatMessage(e,t)}`,'color: #f39c12;')}error(e,t,n){const o=this.formatMessage(e,t);n?console.error(`%c${o}`,'color: #e74c3c; font-weight: bold;',n):console.error(`%c${o}`,'color: #e74c3c; font-weight: bold;')}}(()=>{const t=new e('事件监听器');let n=0,o=Promise.resolve();const r=e=>{o=o.then(e).catch(e=>{t.error('enqueue',`【监听错误】${e?.message||e}`,e)})},s=e=>{const o=(...o)=>{const s=++n,a=performance&&performance.now?performance.now():Date.now();r(async()=>{let n=`[#${s}] 触发事件：${e} @${a.toFixed?a.toFixed(3):a}`;o.length>0&&(n+=` | 数据：${o.map(e=>(e=>{try{return JSON.stringify(e,(e,t)=>'string'==typeof t&&t.length>300?`${t.slice(0,300)}…(${t.length})`:'function'==typeof t?`[Function ${t.name||'anonymous'}]`:t&&'undefined'!=typeof Element&&t instanceof Element?`[Element <${t.tagName}>]`:t&&'string'==typeof t.jquery?`[jQuery ${t.length}]`:t)}catch{try{return String(e)}catch{return'[Unserializable]'}}})(e)).join(' | ')}`),t.log('handler',n)})};try{eventMakeFirst(e,o)}catch{eventOn(e,o)}},a=Object.values('undefined'!=typeof iframe_events&&iframe_events||{}),c=Object.values('undefined'!=typeof tavern_events&&tavern_events||{});a.forEach(s),c.forEach(s),r(async()=>{t.log('main',`【事件监听就绪】iframe=${a.length}，tavern=${c.length}（统一串行输出，保障顺序）`)})})();
//# sourceMappingURL=index.js.map