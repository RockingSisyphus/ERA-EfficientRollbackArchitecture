var __webpack_modules__ = {
  "./src/事件监听器/index.ts": 
  /*!****************************!*\
  !*** ./src/事件监听器/index.ts ***!
  \****************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"./src/事件监听器/utils.ts\");\n\n// ===============================\n// 【事件监听 · 全量日志（串行队列版 / 极简）】\n// - 监听 iframe_events + tavern_events 的所有事件\n// - 任何事件触发时，把“事件名 + 参数”送入全局队列\n// - 全局仅一个Promise链顺序消费，保证日志输出顺序 == 事件到达顺序\n// - 日志写入：使用 Logger 输出到控制台\n// ===============================\n(() => {\n    'use strict';\n    /* =========================\n     * 初始化\n     * ========================= */\n    const logger = new _utils__WEBPACK_IMPORTED_MODULE_0__.Logger('事件监听器');\n    /* =========================\n     * 通用工具\n     * ========================= */\n    // —— 小工具：单调时钟与序号，便于肉眼校验顺序\n    const now = () => (performance && performance.now ? performance.now() : Date.now());\n    let SEQ = 0;\n    // —— 全局串行队列：将任务接到 chain 后面，保证先到先出\n    let chain = Promise.resolve();\n    const enqueue = (task) => {\n        chain = chain.then(task).catch(e => {\n            logger.error('enqueue', `【监听错误】${e?.message || e}`, e);\n        });\n    };\n    // —— 安全字符串化（避免循环引用 / 过长文本刷屏）\n    const safe = (v) => {\n        try {\n            return JSON.stringify(v, (k, val) => {\n                if (typeof val === 'string' && val.length > 300)\n                    return `${val.slice(0, 300)}…(${val.length})`;\n                if (typeof val === 'function')\n                    return `[Function ${val.name || 'anonymous'}]`;\n                if (val && typeof Element !== 'undefined' && val instanceof Element)\n                    return `[Element <${val.tagName}>]`;\n                if (val && typeof val.jquery === 'string')\n                    return `[jQuery ${val.length}]`;\n                return val;\n            });\n        }\n        catch {\n            // 某些对象 stringify 仍可能失败，退回 toString\n            try {\n                return String(v);\n            }\n            catch {\n                return '[Unserializable]';\n            }\n        }\n    };\n    // —— 通用注册器：把某个事件名挂到“串行打印”处理上\n    const attach = (eventName) => {\n        // 用固定的 handler 引用防止重复注册无效；并尽量抢到最前（eventMakeFirst）\n        const handler = (...args) => {\n            const id = ++SEQ;\n            const t = now();\n            // ★ 将“打印这次事件”的动作丢到全局队列，保证严格先后\n            enqueue(async () => {\n                let logMessage = `[#${id}] 触发事件：${eventName} @${t.toFixed ? t.toFixed(3) : t}`;\n                if (args.length > 0) {\n                    logMessage += ` | 数据：${args.map(a => safe(a)).join(' | ')}`;\n                }\n                logger.log('handler', logMessage);\n            });\n        };\n        try {\n            // 优先把我们的监听器插到最前，尽早抢到“到达顺序”\n            eventMakeFirst(eventName, handler);\n        }\n        catch {\n            // 某些环境可能没有 eventMakeFirst，就退回普通 on\n            eventOn(eventName, handler);\n        }\n    };\n    // —— 收集所有可监听的事件名\n    const iframeList = Object.values((typeof iframe_events !== 'undefined' && iframe_events) || {});\n    const tavernList = Object.values((typeof tavern_events !== 'undefined' && tavern_events) || {});\n    // —— 全部挂上\n    iframeList.forEach(attach);\n    tavernList.forEach(attach);\n    // —— 启动提示\n    enqueue(async () => {\n        logger.log('main', `【事件监听就绪】iframe=${iframeList.length}，tavern=${tavernList.length}（统一串行输出，保障顺序）`);\n    });\n    // —— 可选：如不希望刷屏，可对高频事件做采样（例：只记录每50次 STREAM_TOKEN_RECEIVED_INCREMENTALLY）\n    // 使用方法：在上面的 attach 中判断 eventName 并自定义节流逻辑（此处省略，默认全量记录）\n})();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUksRUFBRTtRQUNqQixNQUFNLENBQUMsR0FBRyxDQUNSLE1BQU0sRUFDTixrQkFBa0IsVUFBVSxDQUFDLE1BQU0sV0FBVyxVQUFVLENBQUMsTUFBTSxlQUFlLENBQy9FLENBQUM7SUFDSixDQUFDLENBQUMsQ0FBQztJQUVILHdFQUF3RTtJQUN4RSx1REFBdUQ7QUFDekQsQ0FBQyxDQUFDLEVBQUUsQ0FBQyIsInNvdXJjZXMiOlsic3JjOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS9zcmMv5LqL5Lu255uR5ZCs5ZmoL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IExvZ2dlciB9IGZyb20gJy4vdXRpbHMnO1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyDjgJDkuovku7bnm5HlkKwgwrcg5YWo6YeP5pel5b+X77yI5Liy6KGM6Zif5YiX54mIIC8g5p6B566A77yJ44CRXG4vLyAtIOebkeWQrCBpZnJhbWVfZXZlbnRzICsgdGF2ZXJuX2V2ZW50cyDnmoTmiYDmnInkuovku7Zcbi8vIC0g5Lu75L2V5LqL5Lu26Kem5Y+R5pe277yM5oqK4oCc5LqL5Lu25ZCNICsg5Y+C5pWw4oCd6YCB5YWl5YWo5bGA6Zif5YiXXG4vLyAtIOWFqOWxgOS7heS4gOS4qlByb21pc2Xpk77pobrluo/mtojotLnvvIzkv53or4Hml6Xlv5fovpPlh7rpobrluo8gPT0g5LqL5Lu25Yiw6L6+6aG65bqPXG4vLyAtIOaXpeW/l+WGmeWFpe+8muS9v+eUqCBMb2dnZXIg6L6T5Ye65Yiw5o6n5Yi25Y+wXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4oKCkgPT4ge1xuICAndXNlIHN0cmljdCc7XG5cbiAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgKiDliJ3lp4vljJZcbiAgICogPT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuICBjb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKCfkuovku7bnm5HlkKzlmagnKTtcblxuICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAqIOmAmueUqOW3peWFt1xuICAgKiA9PT09PT09PT09PT09PT09PT09PT09PT09ICovXG4gIC8vIOKAlOKAlCDlsI/lt6XlhbfvvJrljZXosIPml7bpkp/kuI7luo/lj7fvvIzkvr/kuo7ogonnnLzmoKHpqozpobrluo9cbiAgY29uc3Qgbm93ID0gKCkgPT4gKHBlcmZvcm1hbmNlICYmIHBlcmZvcm1hbmNlLm5vdyA/IHBlcmZvcm1hbmNlLm5vdygpIDogRGF0ZS5ub3coKSk7XG4gIGxldCBTRVEgPSAwO1xuXG4gIC8vIOKAlOKAlCDlhajlsYDkuLLooYzpmJ/liJfvvJrlsIbku7vliqHmjqXliLAgY2hhaW4g5ZCO6Z2i77yM5L+d6K+B5YWI5Yiw5YWI5Ye6XG4gIGxldCBjaGFpbiA9IFByb21pc2UucmVzb2x2ZSgpO1xuICBjb25zdCBlbnF1ZXVlID0gKHRhc2s6ICgpID0+IFByb21pc2U8dm9pZD4pID0+IHtcbiAgICBjaGFpbiA9IGNoYWluLnRoZW4odGFzaykuY2F0Y2goZSA9PiB7XG4gICAgICBsb2dnZXIuZXJyb3IoJ2VucXVldWUnLCBg44CQ55uR5ZCs6ZSZ6K+v44CRJHtlPy5tZXNzYWdlIHx8IGV9YCwgZSk7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8g4oCU4oCUIOWuieWFqOWtl+espuS4suWMlu+8iOmBv+WFjeW+queOr+W8leeUqCAvIOi/h+mVv+aWh+acrOWIt+Wxj++8iVxuICBjb25zdCBzYWZlID0gKHY6IGFueSk6IHN0cmluZyA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh2LCAoaywgdmFsKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJyAmJiB2YWwubGVuZ3RoID4gMzAwKSByZXR1cm4gYCR7dmFsLnNsaWNlKDAsIDMwMCl94oCmKCR7dmFsLmxlbmd0aH0pYDtcbiAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicpIHJldHVybiBgW0Z1bmN0aW9uICR7dmFsLm5hbWUgfHwgJ2Fub255bW91cyd9XWA7XG4gICAgICAgIGlmICh2YWwgJiYgdHlwZW9mIEVsZW1lbnQgIT09ICd1bmRlZmluZWQnICYmIHZhbCBpbnN0YW5jZW9mIEVsZW1lbnQpIHJldHVybiBgW0VsZW1lbnQgPCR7dmFsLnRhZ05hbWV9Pl1gO1xuICAgICAgICBpZiAodmFsICYmIHR5cGVvZiB2YWwuanF1ZXJ5ID09PSAnc3RyaW5nJykgcmV0dXJuIGBbalF1ZXJ5ICR7dmFsLmxlbmd0aH1dYDtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2gge1xuICAgICAgLy8g5p+Q5Lqb5a+56LGhIHN0cmluZ2lmeSDku43lj6/og73lpLHotKXvvIzpgIDlm54gdG9TdHJpbmdcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBTdHJpbmcodik7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgcmV0dXJuICdbVW5zZXJpYWxpemFibGVdJztcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLy8g4oCU4oCUIOmAmueUqOazqOWGjOWZqO+8muaKiuafkOS4quS6i+S7tuWQjeaMguWIsOKAnOS4suihjOaJk+WNsOKAneWkhOeQhuS4ilxuICBjb25zdCBhdHRhY2ggPSAoZXZlbnROYW1lOiBzdHJpbmcpID0+IHtcbiAgICAvLyDnlKjlm7rlrprnmoQgaGFuZGxlciDlvJXnlKjpmLLmraLph43lpI3ms6jlhozml6DmlYjvvJvlubblsL3ph4/miqLliLDmnIDliY3vvIhldmVudE1ha2VGaXJzdO+8iVxuICAgIGNvbnN0IGhhbmRsZXIgPSAoLi4uYXJnczogYW55W10pID0+IHtcbiAgICAgIGNvbnN0IGlkID0gKytTRVE7XG4gICAgICBjb25zdCB0ID0gbm93KCk7XG4gICAgICAvLyDimIUg5bCG4oCc5omT5Y2w6L+Z5qyh5LqL5Lu24oCd55qE5Yqo5L2c5Lii5Yiw5YWo5bGA6Zif5YiX77yM5L+d6K+B5Lil5qC85YWI5ZCOXG4gICAgICBlbnF1ZXVlKGFzeW5jICgpID0+IHtcbiAgICAgICAgbGV0IGxvZ01lc3NhZ2UgPSBgWyMke2lkfV0g6Kem5Y+R5LqL5Lu277yaJHtldmVudE5hbWV9IEAke3QudG9GaXhlZCA/IHQudG9GaXhlZCgzKSA6IHR9YDtcbiAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGxvZ01lc3NhZ2UgKz0gYCB8IOaVsOaNru+8miR7YXJncy5tYXAoYSA9PiBzYWZlKGEpKS5qb2luKCcgfCAnKX1gO1xuICAgICAgICB9XG4gICAgICAgIGxvZ2dlci5sb2coJ2hhbmRsZXInLCBsb2dNZXNzYWdlKTtcbiAgICAgIH0pO1xuICAgIH07XG4gICAgdHJ5IHtcbiAgICAgIC8vIOS8mOWFiOaKiuaIkeS7rOeahOebkeWQrOWZqOaPkuWIsOacgOWJje+8jOWwveaXqeaKouWIsOKAnOWIsOi+vumhuuW6j+KAnVxuICAgICAgZXZlbnRNYWtlRmlyc3QoZXZlbnROYW1lLCBoYW5kbGVyKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIC8vIOafkOS6m+eOr+Wig+WPr+iDveayoeaciSBldmVudE1ha2VGaXJzdO+8jOWwsemAgOWbnuaZrumAmiBvblxuICAgICAgZXZlbnRPbihldmVudE5hbWUsIGhhbmRsZXIpO1xuICAgIH1cbiAgfTtcblxuICAvLyDigJTigJQg5pS26ZuG5omA5pyJ5Y+v55uR5ZCs55qE5LqL5Lu25ZCNXG4gIGNvbnN0IGlmcmFtZUxpc3QgPSBPYmplY3QudmFsdWVzKCh0eXBlb2YgaWZyYW1lX2V2ZW50cyAhPT0gJ3VuZGVmaW5lZCcgJiYgaWZyYW1lX2V2ZW50cykgfHwge30pO1xuICBjb25zdCB0YXZlcm5MaXN0ID0gT2JqZWN0LnZhbHVlcygodHlwZW9mIHRhdmVybl9ldmVudHMgIT09ICd1bmRlZmluZWQnICYmIHRhdmVybl9ldmVudHMpIHx8IHt9KTtcblxuICAvLyDigJTigJQg5YWo6YOo5oyC5LiKXG4gIGlmcmFtZUxpc3QuZm9yRWFjaChhdHRhY2gpO1xuICB0YXZlcm5MaXN0LmZvckVhY2goYXR0YWNoKTtcblxuICAvLyDigJTigJQg5ZCv5Yqo5o+Q56S6XG4gIGVucXVldWUoYXN5bmMgKCkgPT4ge1xuICAgIGxvZ2dlci5sb2coXG4gICAgICAnbWFpbicsXG4gICAgICBg44CQ5LqL5Lu255uR5ZCs5bCx57uq44CRaWZyYW1lPSR7aWZyYW1lTGlzdC5sZW5ndGh977yMdGF2ZXJuPSR7dGF2ZXJuTGlzdC5sZW5ndGh977yI57uf5LiA5Liy6KGM6L6T5Ye677yM5L+d6Zqc6aG65bqP77yJYCxcbiAgICApO1xuICB9KTtcblxuICAvLyDigJTigJQg5Y+v6YCJ77ya5aaC5LiN5biM5pyb5Yi35bGP77yM5Y+v5a+56auY6aKR5LqL5Lu25YGa6YeH5qC377yI5L6L77ya5Y+q6K6w5b2V5q+PNTDmrKEgU1RSRUFNX1RPS0VOX1JFQ0VJVkVEX0lOQ1JFTUVOVEFMTFnvvIlcbiAgLy8g5L2/55So5pa55rOV77ya5Zyo5LiK6Z2i55qEIGF0dGFjaCDkuK3liKTmlq0gZXZlbnROYW1lIOW5tuiHquWumuS5ieiKgua1gemAu+i+ke+8iOatpOWkhOecgeeVpe+8jOm7mOiupOWFqOmHj+iusOW9le+8iVxufSkoKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/事件监听器/index.ts\n\n}");
  },
  "./src/事件监听器/utils.ts": 
  /*!****************************!*\
  !*** ./src/事件监听器/utils.ts ***!
  \****************************/ (__unused_webpack_module, __webpack_exports__, __webpack_require__) => {
    eval("{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   J: () => (/* binding */ J),\n/* harmony export */   Logger: () => (/* binding */ Logger),\n/* harmony export */   extractBlocks: () => (/* binding */ extractBlocks),\n/* harmony export */   isPO: () => (/* binding */ isPO),\n/* harmony export */   mergeReplaceArray: () => (/* binding */ mergeReplaceArray),\n/* harmony export */   parseEditLog: () => (/* binding */ parseEditLog),\n/* harmony export */   parseJsonl: () => (/* binding */ parseJsonl),\n/* harmony export */   rnd: () => (/* binding */ rnd),\n/* harmony export */   sanitizeArrays: () => (/* binding */ sanitizeArrays),\n/* harmony export */   stripCodeFence: () => (/* binding */ stripCodeFence)\n/* harmony export */ });\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash */ \"lodash\");\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);\n/**\n * @file ERA 变量框架 - 通用工具模块\n * @description\n * 该文件提供了一系列与业务逻辑无关的、高度可复用的辅助函数和类。\n * 它们是构建整个 ERA 框架的基石，涵盖了日志记录、字符串处理、数据解析、对象操作等基础功能。\n * 将这些通用功能集中在此处，有助于保持其他模块代码的简洁和专注。\n */\n\n\n// ==================================================================\n// 日志记录\n// ==================================================================\n/**\n * @class Logger\n * @description 一个为 ERA 框架设计的、支持日志分级的记录器。\n *\n * **核心功能**:\n * 1. **日志分级**: 提供 `debug`, `log`, `warn`, `error` 四个级别，方便过滤和定位问题。\n * 2. **统一格式**: 所有日志都遵循 `《ERA》「模块名」【函数名】日志内容` 的格式，清晰明了。\n * 3. **控制台输出**: 日志会根据级别使用不同颜色和样式的 `console` 方法输出，便于在浏览器中实时调试。\n * 4. **纯粹的控制台日志**: 日志系统不再向酒馆聊天变量中写入任何数据，避免了性能问题和数据污染。\n */\nclass Logger {\n    moduleName;\n    /**\n     * 创建一个新的 Logger 实例。\n     * @param {string} moduleName - 该 Logger 实例绑定的模块名称。\n     */\n    constructor(moduleName) {\n        this.moduleName = moduleName;\n    }\n    /**\n     * 格式化日志消息。\n     * @param {string} funcName - 调用日志的函数名。\n     * @param {any} message - 日志内容。\n     * @returns {string} 格式化后的日志字符串。\n     */\n    formatMessage(funcName, message) {\n        return `《ERA-事件监听器》「${this.moduleName}」【${funcName}】${String(message)}`;\n    }\n    /**\n     * 记录一条 debug 级别的日志。\n     * @param {string} funcName - 函数名。\n     * @param {any} message - 日志内容。\n     */\n    debug(funcName, message) {\n        console.debug(this.formatMessage(funcName, message));\n    }\n    /**\n     * 记录一条 log 级别的日志。\n     * @param {string} funcName - 函数名。\n     * @param {any} message - 日志内容。\n     */\n    log(funcName, message) {\n        console.log(`%c${this.formatMessage(funcName, message)}`, 'color: #3498db;');\n    }\n    /**\n     * 记录一条 warn 级别的日志。\n     * @param {string} funcName - 函数名。\n     * @param {any} message - 日志内容。\n     */\n    warn(funcName, message) {\n        console.warn(`%c${this.formatMessage(funcName, message)}`, 'color: #f39c12;');\n    }\n    /**\n     * 记录一条 error 级别的日志。\n     * @param {string} funcName - 函数名。\n     * @param {any} message - 日志内容。\n     * @param {any} [errorObj] - 可选的、附加到日志中的错误对象。\n     */\n    error(funcName, message, errorObj) {\n        const formattedMessage = this.formatMessage(funcName, message);\n        if (errorObj) {\n            console.error(`%c${formattedMessage}`, 'color: #e74c3c; font-weight: bold;', errorObj);\n        }\n        else {\n            console.error(`%c${formattedMessage}`, 'color: #e74c3c; font-weight: bold;');\n        }\n    }\n}\n// ==================================================================\n// 字符串与数据处理\n// ==================================================================\n/**\n * 生成一个指定长度的随机字符串，用作唯一标识符。\n * 基于 `Math.random()`，在同一毫秒内也能保证极高的唯一性。\n * @returns {string} 一个随机的、由数字和小写字母组成的字符串。\n */\nfunction rnd() {\n    return Math.random().toString(36).slice(2, 8);\n}\n/**\n * 判断一个值是否为“纯粹的对象”（Plain Object）。\n * 数组、null、函数、Date 对象等都会返回 false。\n * @param {*} v - 待检查的值。\n * @returns {boolean} 如果是纯粹的对象则返回 true，否则返回 false。\n */\nconst isPO = (v) => lodash__WEBPACK_IMPORTED_MODULE_0___default().isPlainObject(v);\n/**\n * 从文本中提取所有被特定 XML 风格标签包裹的内容块。\n * 使用非贪婪模式的正则表达式，但不处理嵌套标签。\n * @param {string} text - 包含标签的原始文本。\n * @param {string} tag - 要提取的标签名称（例如 'VariableEdit'）。\n * @returns {string[]} 包含所有提取并清理后（去除代码围栏和首尾空格）的内容块的数组。\n */\nfunction extractBlocks(text, tag) {\n    const blocks = [];\n    // 正则表达式: /<tag>([\\s\\S]*?)<\\/tag>/g\n    // - <${tag}>: 匹配开标签。\n    // - ([\\s\\S]*?): 非贪婪地捕获开闭标签之间的所有字符（包括换行符）。\n    // - <\\/${tag}>: 匹配闭标签。\n    // - g: 全局匹配，以找到所有匹配项。\n    const re = new RegExp(`<${tag}>([\\\\s\\\\S]*?)<\\\\/${tag}>`, 'g');\n    let m;\n    while ((m = re.exec(text))) {\n        const rawBody = (m[1] || '').trim();\n        // 在存入前，先剥离AI可能生成的多余代码围栏。\n        const body = stripCodeFence(rawBody);\n        if (body)\n            blocks.push(body);\n    }\n    return blocks;\n}\n/**\n * 从字符串中移除 AI 生成的 Markdown 代码块围栏（如 ```json ... ```）。\n * @param {string} s - 待处理的字符串。\n * @returns {string} 移除围栏并修剪首尾空格后的字符串。\n */\nfunction stripCodeFence(s) {\n    if (!s)\n        return s;\n    let t = String(s).trim();\n    // 移除起始围栏，例如 ```json, ```, ~~~\n    t = t.replace(/^\\s*(?:```|~~~)[a-zA-Z0-9_-]*\\s*\\r?\\n/, '');\n    // 移除结束围栏\n    t = t.replace(/\\r?\\n(?:```|~~~)\\s*$/, '');\n    return t.trim();\n}\n/**\n * 递归地“净化”一个对象，将其中的数组或对象值转换为字符串。\n * 主要用于准备数据以便在某些特定场景下展示或存储。\n * @param {*} v - 待净化的值。\n * @returns {*} 净化后的值。\n */\nfunction sanitizeArrays(v) {\n    if (Array.isArray(v)) {\n        // 如果是数组，则遍历其元素。如果元素是数组或对象，则字符串化它。\n        return v.map(e => (Array.isArray(e) || lodash__WEBPACK_IMPORTED_MODULE_0___default().isPlainObject(e) ? JSON.stringify(e) : e));\n    }\n    else if (lodash__WEBPACK_IMPORTED_MODULE_0___default().isPlainObject(v)) {\n        // 如果是对象，则递归地对其每个属性值进行净化。\n        const o = {};\n        for (const k in v)\n            o[k] = sanitizeArrays(v[k]);\n        return o;\n    }\n    else {\n        // 其他类型的值直接返回。\n        return v;\n    }\n}\n/**\n * 安全地将一个对象序列化为格式化的 JSON 字符串。\n * 如果序列化失败，不会抛出异常，而是返回一个包含错误信息的字符串。\n * @param {*} o - 待序列化的对象。\n * @returns {string} 成功则返回 JSON 字符串，失败则返回错误提示。\n */\nconst J = (o) => {\n    try {\n        return JSON.stringify(o, null, 2); // 使用 2 个空格进行缩进，提高可读性。\n    }\n    catch (e) {\n        return `<<stringify失败: ${e?.message || e}>>`;\n    }\n};\n// ==================================================================\n// 对象与数据结构操作\n// ==================================================================\n/**\n * 使用“新数组覆盖旧数组”的策略来深度合并两个对象。\n * 这是 `_.merge` 的一个变体，专门用于处理模板合并等场景，\n * 在这些场景中，我们希望补丁对象中的数组能够完全替换基础对象中的数组，而不是合并它们。\n * @param {*} base - 基础对象。\n * @param {*} patch - 补丁对象。\n * @returns {*} 合并后的新对象。\n */\nfunction mergeReplaceArray(base, patch) {\n    // 使用 _.cloneDeep 确保不修改原始对象。\n    return lodash__WEBPACK_IMPORTED_MODULE_0___default().mergeWith(lodash__WEBPACK_IMPORTED_MODULE_0___default().cloneDeep(base), lodash__WEBPACK_IMPORTED_MODULE_0___default().cloneDeep(patch), (a, b) => {\n        // 自定义合并逻辑：如果任一值为数组，则直接返回补丁值（b），从而实现覆盖。\n        if (Array.isArray(a) || Array.isArray(b))\n            return b;\n        // 对于非数组类型，返回 undefined 以使用 _.merge 的默认合并行为。\n        return undefined;\n    });\n}\n/**\n * 健壮地解析 `EditLog` 的原始数据。\n * `EditLog` 可能以多种格式存在（对象、数组、JSON字符串），此函数旨在统一处理它们。\n * @param {*} raw - 从变量中读取的原始 `EditLog` 数据。\n * @returns {any[]} 解析后的 `EditLog` 数组。如果解析失败或输入无效，则返回一个空数组。\n */\nfunction parseEditLog(raw) {\n    if (Array.isArray(raw))\n        return raw;\n    if (raw && typeof raw === 'object')\n        return [raw]; // 单个对象也视为有效日志\n    if (typeof raw === 'string') {\n        const s = raw.replace(/^\\s*```(?:json)?\\s*|\\s*```\\s*$/g, ''); // 移除代码围栏\n        try {\n            const arr = JSON.parse(s);\n            return Array.isArray(arr) ? arr : [];\n        }\n        catch {\n            return [];\n        }\n    }\n    return [];\n}\n/**\n * 解析一个包含多个串联 JSON 对象的字符串（类似于 JSONL 格式）。\n * 这种格式有时会由 AI 生成。此函数能够逐个提取并解析它们。\n *\n * @param {string} str - 待解析的字符串。\n * @param {Logger} [logger] - 可选的日志记录器实例，用于记录解析错误。\n * @returns {any[]} 解析出的对象数组。\n */\nfunction parseJsonl(str, logger) {\n    const objects = [];\n    if (!str || typeof str !== 'string') {\n        return objects;\n    }\n    // 在解析前，先移除所有类型的注释，以提高解析的鲁棒性。\n    const strWithoutComments = str\n        .replace(/\\/\\/.*/g, '') // 移除 // 风格的单行注释\n        .replace(/\\/\\*[\\s\\S]*?\\*\\//g, '') // 移除 /* ... */ 风格的多行注释\n        .replace(/\x3c!--[\\s\\S]*?--\x3e/g, ''); // 移除 \x3c!-- ... --\x3e 风格的 HTML/XML 注释\n    const trimmedStr = strWithoutComments.trim();\n    let braceCount = 0; // 花括号平衡计数器\n    let startIndex = -1; // 当前 JSON 对象的起始索引\n    let inString = false; // 标记是否处于双引号字符串内部\n    for (let i = 0; i < trimmedStr.length; i++) {\n        const char = trimmedStr[i];\n        // 切换 inString 状态，忽略转义的双引号\n        if (char === '\"' && (i === 0 || trimmedStr[i - 1] !== '\\\\')) {\n            inString = !inString;\n        }\n        // 如果在字符串内部，则跳过所有花括号的逻辑判断\n        if (inString)\n            continue;\n        if (char === '{') {\n            if (braceCount === 0) {\n                // 发现一个新 JSON 对象的开始\n                startIndex = i;\n            }\n            braceCount++;\n        }\n        else if (char === '}') {\n            if (braceCount > 0) {\n                braceCount--;\n                if (braceCount === 0 && startIndex !== -1) {\n                    // 花括号平衡，一个完整的 JSON 对象被找到\n                    const jsonString = trimmedStr.substring(startIndex, i + 1);\n                    try {\n                        const obj = JSON.parse(jsonString);\n                        objects.push(obj);\n                    }\n                    catch (e) {\n                        // 如果解析失败，记录错误并继续，不中断整个过程\n                        logger?.error('parseJsonl', `JSONL 解析失败: ${e?.message || e}. 失败的片段: ${jsonString}`, e);\n                    }\n                    // 重置状态，准备寻找下一个对象\n                    startIndex = -1;\n                }\n            }\n        }\n    }\n    return objects;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUM7d0JBQ25DLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7b0JBQ3BCLENBQUM7b0JBQUMsT0FBTyxDQUFNLEVBQUUsQ0FBQzt3QkFDaEIseUJBQXlCO3dCQUN6QixNQUFNLEVBQUUsS0FBSyxDQUFDLFlBQVksRUFBRSxlQUFlLENBQUMsRUFBRSxPQUFPLElBQUksQ0FBQyxZQUFZLFVBQVUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO29CQUN6RixDQUFDO29CQUNELGlCQUFpQjtvQkFDakIsVUFBVSxHQUFHLENBQUMsQ0FBQyxDQUFDO2dCQUNsQixDQUFDO1lBQ0gsQ0FBQztRQUNILENBQUM7SUFDSCxDQUFDO0lBQ0QsT0FBTyxPQUFPLENBQUM7QUFDakIsQ0FBQyIsInNvdXJjZXMiOlsic3JjOi8vdGF2ZXJuX2hlbHBlcl90ZW1wbGF0ZS9zcmMv5LqL5Lu255uR5ZCs5ZmoL3V0aWxzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGUgRVJBIOWPmOmHj+ahhuaetiAtIOmAmueUqOW3peWFt+aooeWdl1xuICogQGRlc2NyaXB0aW9uXG4gKiDor6Xmlofku7bmj5DkvpvkuobkuIDns7vliJfkuI7kuJrliqHpgLvovpHml6DlhbPnmoTjgIHpq5jluqblj6/lpI3nlKjnmoTovoXliqnlh73mlbDlkoznsbvjgIJcbiAqIOWug+S7rOaYr+aehOW7uuaVtOS4qiBFUkEg5qGG5p6255qE5Z+655+z77yM5ra155uW5LqG5pel5b+X6K6w5b2V44CB5a2X56ym5Liy5aSE55CG44CB5pWw5o2u6Kej5p6Q44CB5a+56LGh5pON5L2c562J5Z+656GA5Yqf6IO944CCXG4gKiDlsIbov5nkupvpgJrnlKjlip/og73pm4bkuK3lnKjmraTlpITvvIzmnInliqnkuo7kv53mjIHlhbbku5bmqKHlnZfku6PnoIHnmoTnroDmtIHlkozkuJPms6jjgIJcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8g5pel5b+X6K6w5b2VXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBAY2xhc3MgTG9nZ2VyXG4gKiBAZGVzY3JpcHRpb24g5LiA5Liq5Li6IEVSQSDmoYbmnrborr7orqHnmoTjgIHmlK/mjIHml6Xlv5fliIbnuqfnmoTorrDlvZXlmajjgIJcbiAqXG4gKiAqKuaguOW/g+WKn+iDvSoqOlxuICogMS4gKirml6Xlv5fliIbnuqcqKjog5o+Q5L6bIGBkZWJ1Z2AsIGBsb2dgLCBgd2FybmAsIGBlcnJvcmAg5Zub5Liq57qn5Yir77yM5pa55L6/6L+H5ruk5ZKM5a6a5L2N6Zeu6aKY44CCXG4gKiAyLiAqKue7n+S4gOagvOW8jyoqOiDmiYDmnInml6Xlv5fpg73pgbXlvqogYOOAikVSQeOAi+OAjOaooeWdl+WQjeOAjeOAkOWHveaVsOWQjeOAkeaXpeW/l+WGheWuuWAg55qE5qC85byP77yM5riF5pmw5piO5LqG44CCXG4gKiAzLiAqKuaOp+WItuWPsOi+k+WHuioqOiDml6Xlv5fkvJrmoLnmja7nuqfliKvkvb/nlKjkuI3lkIzpopzoibLlkozmoLflvI/nmoQgYGNvbnNvbGVgIOaWueazlei+k+WHuu+8jOS+v+S6juWcqOa1j+iniOWZqOS4reWunuaXtuiwg+ivleOAglxuICogNC4gKirnuq/nsrnnmoTmjqfliLblj7Dml6Xlv5cqKjog5pel5b+X57O757uf5LiN5YaN5ZCR6YWS6aaG6IGK5aSp5Y+Y6YeP5Lit5YaZ5YWl5Lu75L2V5pWw5o2u77yM6YG/5YWN5LqG5oCn6IO96Zeu6aKY5ZKM5pWw5o2u5rGh5p+T44CCXG4gKi9cbmV4cG9ydCBjbGFzcyBMb2dnZXIge1xuICBwcml2YXRlIG1vZHVsZU5hbWU6IHN0cmluZztcblxuICAvKipcbiAgICog5Yib5bu65LiA5Liq5paw55qEIExvZ2dlciDlrp7kvovjgIJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1vZHVsZU5hbWUgLSDor6UgTG9nZ2VyIOWunuS+i+e7keWumueahOaooeWdl+WQjeensOOAglxuICAgKi9cbiAgY29uc3RydWN0b3IobW9kdWxlTmFtZTogc3RyaW5nKSB7XG4gICAgdGhpcy5tb2R1bGVOYW1lID0gbW9kdWxlTmFtZTtcbiAgfVxuXG4gIC8qKlxuICAgKiDmoLzlvI/ljJbml6Xlv5fmtojmga/jgIJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZ1bmNOYW1lIC0g6LCD55So5pel5b+X55qE5Ye95pWw5ZCN44CCXG4gICAqIEBwYXJhbSB7YW55fSBtZXNzYWdlIC0g5pel5b+X5YaF5a6544CCXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9IOagvOW8j+WMluWQjueahOaXpeW/l+Wtl+espuS4suOAglxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRNZXNzYWdlKGZ1bmNOYW1lOiBzdHJpbmcsIG1lc3NhZ2U6IGFueSk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGDjgIpFUkEt5LqL5Lu255uR5ZCs5Zmo44CL44CMJHt0aGlzLm1vZHVsZU5hbWV944CN44CQJHtmdW5jTmFtZX3jgJEke1N0cmluZyhtZXNzYWdlKX1gO1xuICB9XG5cbiAgLyoqXG4gICAqIOiusOW9leS4gOadoSBkZWJ1ZyDnuqfliKvnmoTml6Xlv5fjgIJcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZ1bmNOYW1lIC0g5Ye95pWw5ZCN44CCXG4gICAqIEBwYXJhbSB7YW55fSBtZXNzYWdlIC0g5pel5b+X5YaF5a6544CCXG4gICAqL1xuICBkZWJ1ZyhmdW5jTmFtZTogc3RyaW5nLCBtZXNzYWdlOiBhbnkpIHtcbiAgICBjb25zb2xlLmRlYnVnKHRoaXMuZm9ybWF0TWVzc2FnZShmdW5jTmFtZSwgbWVzc2FnZSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIOiusOW9leS4gOadoSBsb2cg57qn5Yir55qE5pel5b+X44CCXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmdW5jTmFtZSAtIOWHveaVsOWQjeOAglxuICAgKiBAcGFyYW0ge2FueX0gbWVzc2FnZSAtIOaXpeW/l+WGheWuueOAglxuICAgKi9cbiAgbG9nKGZ1bmNOYW1lOiBzdHJpbmcsIG1lc3NhZ2U6IGFueSkge1xuICAgIGNvbnNvbGUubG9nKGAlYyR7dGhpcy5mb3JtYXRNZXNzYWdlKGZ1bmNOYW1lLCBtZXNzYWdlKX1gLCAnY29sb3I6ICMzNDk4ZGI7Jyk7XG4gIH1cblxuICAvKipcbiAgICog6K6w5b2V5LiA5p2hIHdhcm4g57qn5Yir55qE5pel5b+X44CCXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmdW5jTmFtZSAtIOWHveaVsOWQjeOAglxuICAgKiBAcGFyYW0ge2FueX0gbWVzc2FnZSAtIOaXpeW/l+WGheWuueOAglxuICAgKi9cbiAgd2FybihmdW5jTmFtZTogc3RyaW5nLCBtZXNzYWdlOiBhbnkpIHtcbiAgICBjb25zb2xlLndhcm4oYCVjJHt0aGlzLmZvcm1hdE1lc3NhZ2UoZnVuY05hbWUsIG1lc3NhZ2UpfWAsICdjb2xvcjogI2YzOWMxMjsnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiDorrDlvZXkuIDmnaEgZXJyb3Ig57qn5Yir55qE5pel5b+X44CCXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBmdW5jTmFtZSAtIOWHveaVsOWQjeOAglxuICAgKiBAcGFyYW0ge2FueX0gbWVzc2FnZSAtIOaXpeW/l+WGheWuueOAglxuICAgKiBAcGFyYW0ge2FueX0gW2Vycm9yT2JqXSAtIOWPr+mAieeahOOAgemZhOWKoOWIsOaXpeW/l+S4reeahOmUmeivr+WvueixoeOAglxuICAgKi9cbiAgZXJyb3IoZnVuY05hbWU6IHN0cmluZywgbWVzc2FnZTogYW55LCBlcnJvck9iaj86IGFueSkge1xuICAgIGNvbnN0IGZvcm1hdHRlZE1lc3NhZ2UgPSB0aGlzLmZvcm1hdE1lc3NhZ2UoZnVuY05hbWUsIG1lc3NhZ2UpO1xuICAgIGlmIChlcnJvck9iaikge1xuICAgICAgY29uc29sZS5lcnJvcihgJWMke2Zvcm1hdHRlZE1lc3NhZ2V9YCwgJ2NvbG9yOiAjZTc0YzNjOyBmb250LXdlaWdodDogYm9sZDsnLCBlcnJvck9iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYCVjJHtmb3JtYXR0ZWRNZXNzYWdlfWAsICdjb2xvcjogI2U3NGMzYzsgZm9udC13ZWlnaHQ6IGJvbGQ7Jyk7XG4gICAgfVxuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8g5a2X56ym5Liy5LiO5pWw5o2u5aSE55CGXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiDnlJ/miJDkuIDkuKrmjIflrprplb/luqbnmoTpmo/mnLrlrZfnrKbkuLLvvIznlKjkvZzllK/kuIDmoIfor4bnrKbjgIJcbiAqIOWfuuS6jiBgTWF0aC5yYW5kb20oKWDvvIzlnKjlkIzkuIDmr6vnp5LlhoXkuZ/og73kv53or4HmnoHpq5jnmoTllK/kuIDmgKfjgIJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IOS4gOS4qumaj+acuueahOOAgeeUseaVsOWtl+WSjOWwj+WGmeWtl+avjee7hOaIkOeahOWtl+espuS4suOAglxuICovXG5leHBvcnQgZnVuY3Rpb24gcm5kKCk6IHN0cmluZyB7XG4gIHJldHVybiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyLCA4KTtcbn1cblxuLyoqXG4gKiDliKTmlq3kuIDkuKrlgLzmmK/lkKbkuLrigJznuq/nsrnnmoTlr7nosaHigJ3vvIhQbGFpbiBPYmplY3TvvInjgIJcbiAqIOaVsOe7hOOAgW51bGzjgIHlh73mlbDjgIFEYXRlIOWvueixoeetiemDveS8mui/lOWbniBmYWxzZeOAglxuICogQHBhcmFtIHsqfSB2IC0g5b6F5qOA5p+l55qE5YC844CCXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0g5aaC5p6c5piv57qv57K555qE5a+56LGh5YiZ6L+U5ZueIHRydWXvvIzlkKbliJnov5Tlm54gZmFsc2XjgIJcbiAqL1xuZXhwb3J0IGNvbnN0IGlzUE8gPSAodjogYW55KTogdiBpcyBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0+IF8uaXNQbGFpbk9iamVjdCh2KTtcblxuLyoqXG4gKiDku47mlofmnKzkuK3mj5Dlj5bmiYDmnInooqvnibnlrpogWE1MIOmjjuagvOagh+etvuWMheijueeahOWGheWuueWdl+OAglxuICog5L2/55So6Z2e6LSq5amq5qih5byP55qE5q2j5YiZ6KGo6L6+5byP77yM5L2G5LiN5aSE55CG5bWM5aWX5qCH562+44CCXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dCAtIOWMheWQq+agh+etvueahOWOn+Wni+aWh+acrOOAglxuICogQHBhcmFtIHtzdHJpbmd9IHRhZyAtIOimgeaPkOWPlueahOagh+etvuWQjeensO+8iOS+i+WmgiAnVmFyaWFibGVFZGl0J++8ieOAglxuICogQHJldHVybnMge3N0cmluZ1tdfSDljIXlkKvmiYDmnInmj5Dlj5blubbmuIXnkIblkI7vvIjljrvpmaTku6PnoIHlm7TmoI/lkozpppblsL7nqbrmoLzvvInnmoTlhoXlrrnlnZfnmoTmlbDnu4TjgIJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RCbG9ja3ModGV4dDogc3RyaW5nLCB0YWc6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgY29uc3QgYmxvY2tzOiBzdHJpbmdbXSA9IFtdO1xuICAvLyDmraPliJnooajovr7lvI86IC88dGFnPihbXFxzXFxTXSo/KTxcXC90YWc+L2dcbiAgLy8gLSA8JHt0YWd9Pjog5Yy56YWN5byA5qCH562+44CCXG4gIC8vIC0gKFtcXHNcXFNdKj8pOiDpnZ7otKrlqarlnLDmjZXojrflvIDpl63moIfnrb7kuYvpl7TnmoTmiYDmnInlrZfnrKbvvIjljIXmi6zmjaLooYznrKbvvInjgIJcbiAgLy8gLSA8XFwvJHt0YWd9Pjog5Yy56YWN6Zet5qCH562+44CCXG4gIC8vIC0gZzog5YWo5bGA5Yy56YWN77yM5Lul5om+5Yiw5omA5pyJ5Yy56YWN6aG544CCXG4gIGNvbnN0IHJlID0gbmV3IFJlZ0V4cChgPCR7dGFnfT4oW1xcXFxzXFxcXFNdKj8pPFxcXFwvJHt0YWd9PmAsICdnJyk7XG4gIGxldCBtO1xuICB3aGlsZSAoKG0gPSByZS5leGVjKHRleHQpKSkge1xuICAgIGNvbnN0IHJhd0JvZHkgPSAobVsxXSB8fCAnJykudHJpbSgpO1xuICAgIC8vIOWcqOWtmOWFpeWJje+8jOWFiOWJpeemu0FJ5Y+v6IO955Sf5oiQ55qE5aSa5L2Z5Luj56CB5Zu05qCP44CCXG4gICAgY29uc3QgYm9keSA9IHN0cmlwQ29kZUZlbmNlKHJhd0JvZHkpO1xuICAgIGlmIChib2R5KSBibG9ja3MucHVzaChib2R5KTtcbiAgfVxuICByZXR1cm4gYmxvY2tzO1xufVxuXG4vKipcbiAqIOS7juWtl+espuS4suS4reenu+mZpCBBSSDnlJ/miJDnmoQgTWFya2Rvd24g5Luj56CB5Z2X5Zu05qCP77yI5aaCIGBgYGpzb24gLi4uIGBgYO+8ieOAglxuICogQHBhcmFtIHtzdHJpbmd9IHMgLSDlvoXlpITnkIbnmoTlrZfnrKbkuLLjgIJcbiAqIEByZXR1cm5zIHtzdHJpbmd9IOenu+mZpOWbtOagj+W5tuS/ruWJqummluWwvuepuuagvOWQjueahOWtl+espuS4suOAglxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RyaXBDb2RlRmVuY2Uoczogc3RyaW5nKTogc3RyaW5nIHtcbiAgaWYgKCFzKSByZXR1cm4gcztcbiAgbGV0IHQgPSBTdHJpbmcocykudHJpbSgpO1xuICAvLyDnp7vpmaTotbflp4vlm7TmoI/vvIzkvovlpoIgYGBganNvbiwgYGBgLCB+fn5cbiAgdCA9IHQucmVwbGFjZSgvXlxccyooPzpgYGB8fn5+KVthLXpBLVowLTlfLV0qXFxzKlxccj9cXG4vLCAnJyk7XG4gIC8vIOenu+mZpOe7k+adn+WbtOagj1xuICB0ID0gdC5yZXBsYWNlKC9cXHI/XFxuKD86YGBgfH5+filcXHMqJC8sICcnKTtcbiAgcmV0dXJuIHQudHJpbSgpO1xufVxuXG4vKipcbiAqIOmAkuW9kuWcsOKAnOWHgOWMluKAneS4gOS4quWvueixoe+8jOWwhuWFtuS4reeahOaVsOe7hOaIluWvueixoeWAvOi9rOaNouS4uuWtl+espuS4suOAglxuICog5Li76KaB55So5LqO5YeG5aSH5pWw5o2u5Lul5L6/5Zyo5p+Q5Lqb54m55a6a5Zy65pmv5LiL5bGV56S65oiW5a2Y5YKo44CCXG4gKiBAcGFyYW0geyp9IHYgLSDlvoXlh4DljJbnmoTlgLzjgIJcbiAqIEByZXR1cm5zIHsqfSDlh4DljJblkI7nmoTlgLzjgIJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNhbml0aXplQXJyYXlzKHY6IGFueSk6IGFueSB7XG4gIGlmIChBcnJheS5pc0FycmF5KHYpKSB7XG4gICAgLy8g5aaC5p6c5piv5pWw57uE77yM5YiZ6YGN5Y6G5YW25YWD57Sg44CC5aaC5p6c5YWD57Sg5piv5pWw57uE5oiW5a+56LGh77yM5YiZ5a2X56ym5Liy5YyW5a6D44CCXG4gICAgcmV0dXJuIHYubWFwKGUgPT4gKEFycmF5LmlzQXJyYXkoZSkgfHwgXy5pc1BsYWluT2JqZWN0KGUpID8gSlNPTi5zdHJpbmdpZnkoZSkgOiBlKSk7XG4gIH0gZWxzZSBpZiAoXy5pc1BsYWluT2JqZWN0KHYpKSB7XG4gICAgLy8g5aaC5p6c5piv5a+56LGh77yM5YiZ6YCS5b2S5Zyw5a+55YW25q+P5Liq5bGe5oCn5YC86L+b6KGM5YeA5YyW44CCXG4gICAgY29uc3QgbzogeyBba2V5OiBzdHJpbmddOiBhbnkgfSA9IHt9O1xuICAgIGZvciAoY29uc3QgayBpbiB2KSBvW2tdID0gc2FuaXRpemVBcnJheXModltrXSk7XG4gICAgcmV0dXJuIG87XG4gIH0gZWxzZSB7XG4gICAgLy8g5YW25LuW57G75Z6L55qE5YC855u05o6l6L+U5Zue44CCXG4gICAgcmV0dXJuIHY7XG4gIH1cbn1cblxuLyoqXG4gKiDlronlhajlnLDlsIbkuIDkuKrlr7nosaHluo/liJfljJbkuLrmoLzlvI/ljJbnmoQgSlNPTiDlrZfnrKbkuLLjgIJcbiAqIOWmguaenOW6j+WIl+WMluWksei0pe+8jOS4jeS8muaKm+WHuuW8guW4uO+8jOiAjOaYr+i/lOWbnuS4gOS4quWMheWQq+mUmeivr+S/oeaBr+eahOWtl+espuS4suOAglxuICogQHBhcmFtIHsqfSBvIC0g5b6F5bqP5YiX5YyW55qE5a+56LGh44CCXG4gKiBAcmV0dXJucyB7c3RyaW5nfSDmiJDlip/liJnov5Tlm54gSlNPTiDlrZfnrKbkuLLvvIzlpLHotKXliJnov5Tlm57plJnor6/mj5DnpLrjgIJcbiAqL1xuZXhwb3J0IGNvbnN0IEogPSAobzogYW55KTogc3RyaW5nID0+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkobywgbnVsbCwgMik7IC8vIOS9v+eUqCAyIOS4quepuuagvOi/m+ihjOe8qei/m++8jOaPkOmrmOWPr+ivu+aAp+OAglxuICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICByZXR1cm4gYDw8c3RyaW5naWZ55aSx6LSlOiAke2U/Lm1lc3NhZ2UgfHwgZX0+PmA7XG4gIH1cbn07XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8g5a+56LGh5LiO5pWw5o2u57uT5p6E5pON5L2cXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiDkvb/nlKjigJzmlrDmlbDnu4Topobnm5bml6fmlbDnu4TigJ3nmoTnrZbnlaXmnaXmt7HluqblkIjlubbkuKTkuKrlr7nosaHjgIJcbiAqIOi/meaYryBgXy5tZXJnZWAg55qE5LiA5Liq5Y+Y5L2T77yM5LiT6Zeo55So5LqO5aSE55CG5qih5p2/5ZCI5bm2562J5Zy65pmv77yMXG4gKiDlnKjov5nkupvlnLrmma/kuK3vvIzmiJHku6zluIzmnJvooaXkuIHlr7nosaHkuK3nmoTmlbDnu4Tog73lpJ/lrozlhajmm7/mjaLln7rnoYDlr7nosaHkuK3nmoTmlbDnu4TvvIzogIzkuI3mmK/lkIjlubblroPku6zjgIJcbiAqIEBwYXJhbSB7Kn0gYmFzZSAtIOWfuuehgOWvueixoeOAglxuICogQHBhcmFtIHsqfSBwYXRjaCAtIOihpeS4geWvueixoeOAglxuICogQHJldHVybnMgeyp9IOWQiOW5tuWQjueahOaWsOWvueixoeOAglxuICovXG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VSZXBsYWNlQXJyYXkoYmFzZTogYW55LCBwYXRjaDogYW55KTogYW55IHtcbiAgLy8g5L2/55SoIF8uY2xvbmVEZWVwIOehruS/neS4jeS/ruaUueWOn+Wni+WvueixoeOAglxuICByZXR1cm4gXy5tZXJnZVdpdGgoXy5jbG9uZURlZXAoYmFzZSksIF8uY2xvbmVEZWVwKHBhdGNoKSwgKGE6IGFueSwgYjogYW55KSA9PiB7XG4gICAgLy8g6Ieq5a6a5LmJ5ZCI5bm26YC76L6R77ya5aaC5p6c5Lu75LiA5YC85Li65pWw57uE77yM5YiZ55u05o6l6L+U5Zue6KGl5LiB5YC877yIYu+8ie+8jOS7juiAjOWunueOsOimhuebluOAglxuICAgIGlmIChBcnJheS5pc0FycmF5KGEpIHx8IEFycmF5LmlzQXJyYXkoYikpIHJldHVybiBiO1xuICAgIC8vIOWvueS6jumdnuaVsOe7hOexu+Wei++8jOi/lOWbniB1bmRlZmluZWQg5Lul5L2/55SoIF8ubWVyZ2Ug55qE6buY6K6k5ZCI5bm26KGM5Li644CCXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfSk7XG59XG5cbi8qKlxuICog5YGl5aOu5Zyw6Kej5p6QIGBFZGl0TG9nYCDnmoTljp/lp4vmlbDmja7jgIJcbiAqIGBFZGl0TG9nYCDlj6/og73ku6XlpJrnp43moLzlvI/lrZjlnKjvvIjlr7nosaHjgIHmlbDnu4TjgIFKU09O5a2X56ym5Liy77yJ77yM5q2k5Ye95pWw5peo5Zyo57uf5LiA5aSE55CG5a6D5Lus44CCXG4gKiBAcGFyYW0geyp9IHJhdyAtIOS7juWPmOmHj+S4reivu+WPlueahOWOn+WniyBgRWRpdExvZ2Ag5pWw5o2u44CCXG4gKiBAcmV0dXJucyB7YW55W119IOino+aekOWQjueahCBgRWRpdExvZ2Ag5pWw57uE44CC5aaC5p6c6Kej5p6Q5aSx6LSl5oiW6L6T5YWl5peg5pWI77yM5YiZ6L+U5Zue5LiA5Liq56m65pWw57uE44CCXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUVkaXRMb2cocmF3OiBhbnkpOiBhbnlbXSB7XG4gIGlmIChBcnJheS5pc0FycmF5KHJhdykpIHJldHVybiByYXc7XG4gIGlmIChyYXcgJiYgdHlwZW9mIHJhdyA9PT0gJ29iamVjdCcpIHJldHVybiBbcmF3XTsgLy8g5Y2V5Liq5a+56LGh5Lmf6KeG5Li65pyJ5pWI5pel5b+XXG4gIGlmICh0eXBlb2YgcmF3ID09PSAnc3RyaW5nJykge1xuICAgIGNvbnN0IHMgPSByYXcucmVwbGFjZSgvXlxccypgYGAoPzpqc29uKT9cXHMqfFxccypgYGBcXHMqJC9nLCAnJyk7IC8vIOenu+mZpOS7o+eggeWbtOagj1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBhcnIgPSBKU09OLnBhcnNlKHMpO1xuICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYXJyKSA/IGFyciA6IFtdO1xuICAgIH0gY2F0Y2gge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfVxuICByZXR1cm4gW107XG59XG5cbi8qKlxuICog6Kej5p6Q5LiA5Liq5YyF5ZCr5aSa5Liq5Liy6IGUIEpTT04g5a+56LGh55qE5a2X56ym5Liy77yI57G75Ly85LqOIEpTT05MIOagvOW8j++8ieOAglxuICog6L+Z56eN5qC85byP5pyJ5pe25Lya55SxIEFJIOeUn+aIkOOAguatpOWHveaVsOiDveWkn+mAkOS4quaPkOWPluW5tuino+aekOWug+S7rOOAglxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgLSDlvoXop6PmnpDnmoTlrZfnrKbkuLLjgIJcbiAqIEBwYXJhbSB7TG9nZ2VyfSBbbG9nZ2VyXSAtIOWPr+mAieeahOaXpeW/l+iusOW9leWZqOWunuS+i++8jOeUqOS6juiusOW9leino+aekOmUmeivr+OAglxuICogQHJldHVybnMge2FueVtdfSDop6PmnpDlh7rnmoTlr7nosaHmlbDnu4TjgIJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSnNvbmwoc3RyOiBzdHJpbmcsIGxvZ2dlcj86IExvZ2dlcik6IGFueVtdIHtcbiAgY29uc3Qgb2JqZWN0czogYW55W10gPSBbXTtcbiAgaWYgKCFzdHIgfHwgdHlwZW9mIHN0ciAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gb2JqZWN0cztcbiAgfVxuXG4gIC8vIOWcqOino+aekOWJje+8jOWFiOenu+mZpOaJgOacieexu+Wei+eahOazqOmHiu+8jOS7peaPkOmrmOino+aekOeahOmygeajkuaAp+OAglxuICBjb25zdCBzdHJXaXRob3V0Q29tbWVudHMgPSBzdHJcbiAgICAucmVwbGFjZSgvXFwvXFwvLiovZywgJycpIC8vIOenu+mZpCAvLyDpo47moLznmoTljZXooYzms6jph4pcbiAgICAucmVwbGFjZSgvXFwvXFwqW1xcc1xcU10qP1xcKlxcLy9nLCAnJykgLy8g56e76ZmkIC8qIC4uLiAqLyDpo47moLznmoTlpJrooYzms6jph4pcbiAgICAucmVwbGFjZSgvPCEtLVtcXHNcXFNdKj8tLT4vZywgJycpOyAvLyDnp7vpmaQgPCEtLSAuLi4gLS0+IOmjjuagvOeahCBIVE1ML1hNTCDms6jph4pcbiAgY29uc3QgdHJpbW1lZFN0ciA9IHN0cldpdGhvdXRDb21tZW50cy50cmltKCk7XG5cbiAgbGV0IGJyYWNlQ291bnQgPSAwOyAvLyDoirHmi6zlj7flubPooaHorqHmlbDlmahcbiAgbGV0IHN0YXJ0SW5kZXggPSAtMTsgLy8g5b2T5YmNIEpTT04g5a+56LGh55qE6LW35aeL57Si5byVXG4gIGxldCBpblN0cmluZyA9IGZhbHNlOyAvLyDmoIforrDmmK/lkKblpITkuo7lj4zlvJXlj7flrZfnrKbkuLLlhoXpg6hcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHRyaW1tZWRTdHIubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBjaGFyID0gdHJpbW1lZFN0cltpXTtcblxuICAgIC8vIOWIh+aNoiBpblN0cmluZyDnirbmgIHvvIzlv73nlaXovazkuYnnmoTlj4zlvJXlj7dcbiAgICBpZiAoY2hhciA9PT0gJ1wiJyAmJiAoaSA9PT0gMCB8fCB0cmltbWVkU3RyW2kgLSAxXSAhPT0gJ1xcXFwnKSkge1xuICAgICAgaW5TdHJpbmcgPSAhaW5TdHJpbmc7XG4gICAgfVxuXG4gICAgLy8g5aaC5p6c5Zyo5a2X56ym5Liy5YaF6YOo77yM5YiZ6Lez6L+H5omA5pyJ6Iqx5ous5Y+355qE6YC76L6R5Yik5patXG4gICAgaWYgKGluU3RyaW5nKSBjb250aW51ZTtcblxuICAgIGlmIChjaGFyID09PSAneycpIHtcbiAgICAgIGlmIChicmFjZUNvdW50ID09PSAwKSB7XG4gICAgICAgIC8vIOWPkeeOsOS4gOS4quaWsCBKU09OIOWvueixoeeahOW8gOWni1xuICAgICAgICBzdGFydEluZGV4ID0gaTtcbiAgICAgIH1cbiAgICAgIGJyYWNlQ291bnQrKztcbiAgICB9IGVsc2UgaWYgKGNoYXIgPT09ICd9Jykge1xuICAgICAgaWYgKGJyYWNlQ291bnQgPiAwKSB7XG4gICAgICAgIGJyYWNlQ291bnQtLTtcbiAgICAgICAgaWYgKGJyYWNlQ291bnQgPT09IDAgJiYgc3RhcnRJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAvLyDoirHmi6zlj7flubPooaHvvIzkuIDkuKrlrozmlbTnmoQgSlNPTiDlr7nosaHooqvmib7liLBcbiAgICAgICAgICBjb25zdCBqc29uU3RyaW5nID0gdHJpbW1lZFN0ci5zdWJzdHJpbmcoc3RhcnRJbmRleCwgaSArIDEpO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBvYmogPSBKU09OLnBhcnNlKGpzb25TdHJpbmcpO1xuICAgICAgICAgICAgb2JqZWN0cy5wdXNoKG9iaik7XG4gICAgICAgICAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgICAgICAgICAvLyDlpoLmnpzop6PmnpDlpLHotKXvvIzorrDlvZXplJnor6/lubbnu6fnu63vvIzkuI3kuK3mlq3mlbTkuKrov4fnqItcbiAgICAgICAgICAgIGxvZ2dlcj8uZXJyb3IoJ3BhcnNlSnNvbmwnLCBgSlNPTkwg6Kej5p6Q5aSx6LSlOiAke2U/Lm1lc3NhZ2UgfHwgZX0uIOWksei0peeahOeJh+autTogJHtqc29uU3RyaW5nfWAsIGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyDph43nva7nirbmgIHvvIzlh4blpIflr7vmib7kuIvkuIDkuKrlr7nosaFcbiAgICAgICAgICBzdGFydEluZGV4ID0gLTE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG9iamVjdHM7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/事件监听器/utils.ts\n\n}");
  },
  lodash: 
  /*!********************!*\
  !*** external "_" ***!
  \********************/ module => {
    module.exports = _;
  }
};

var __webpack_module_cache__ = {};

function __webpack_require__(moduleId) {
  var cachedModule = __webpack_module_cache__[moduleId];
  if (cachedModule !== undefined) {
    return cachedModule.exports;
  }
  var module = __webpack_module_cache__[moduleId] = {
    exports: {}
  };
  __webpack_modules__[moduleId](module, module.exports, __webpack_require__);
  return module.exports;
}

(() => {
  __webpack_require__.n = module => {
    var getter = module && module.__esModule ? () => module["default"] : () => module;
    __webpack_require__.d(getter, {
      a: getter
    });
    return getter;
  };
})();

(() => {
  __webpack_require__.d = (exports, definition) => {
    for (var key in definition) {
      if (__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
        Object.defineProperty(exports, key, {
          enumerable: true,
          get: definition[key]
        });
      }
    }
  };
})();

(() => {
  __webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);
})();

(() => {
  __webpack_require__.r = exports => {
    if (typeof Symbol !== "undefined" && Symbol.toStringTag) {
      Object.defineProperty(exports, Symbol.toStringTag, {
        value: "Module"
      });
    }
    Object.defineProperty(exports, "__esModule", {
      value: true
    });
  };
})();

var __webpack_exports__ = __webpack_require__("./src/事件监听器/index.ts");