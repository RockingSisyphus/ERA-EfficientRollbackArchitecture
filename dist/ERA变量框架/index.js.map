{"version":3,"file":"index.js","mappings":"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","sources":["webpack://tavern_helper_template/src/ERA/ui/components/ThemeManager.vue?2b25","src://tavern_helper_template/node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js","webpack://tavern_helper_template/src/ERA/ui/components/EraPanelContent/MetaHeader.vue?0c5b","webpack://tavern_helper_template/src/ERA/ui/App.vue?f4e4","webpack://tavern_helper_template/src/ERA/ui/template/JsonNode.vue?ec3d","webpack://tavern_helper_template/src/ERA/ui/components/EraPanelContent/MetaHeader.vue?e2aa","webpack://tavern_helper_template/src/ERA/ui/components/EraPanelContent/OperationDetails.vue?21c9","webpack://tavern_helper_template/src/ERA/ui/template/PrettyJsonViewer.vue?522d","webpack://tavern_helper_template/src/ERA/ui/App.vue?e2d8","webpack://tavern_helper_template/src/ERA/ui/components/RightRail.vue?8740","webpack://tavern_helper_template/src/ERA/ui/App.vue?a079","webpack://tavern_helper_template/src/ERA/ui/components/RightRailContent/EraSettingsPanel.vue?177a","webpack://tavern_helper_template/src/ERA/ui/components/RightRailContent/AboutEra.vue?3a04","src://tavern_helper_template/node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/listToStyles.js","src://tavern_helper_template/node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js","webpack://tavern_helper_template/src/ERA/ui/components/EraPanelContent/OperationDetails.vue?9bc8","webpack://tavern_helper_template/src/ERA/ui/components/SnapshotManager.vue?6682","webpack://tavern_helper_template/src/ERA/ui/components/FloatingBall.vue?7eb0","webpack://tavern_helper_template/src/ERA/ui/template/EraAccordion.vue?5eeb","webpack://tavern_helper_template/src/ERA/ui/components/ThemeManager.vue?c6c0","webpack://tavern_helper_template/src/ERA/ui/components/RightRailContent/ActionButtons.vue?802b","webpack://tavern_helper_template/src/ERA/ui/template/JsonNode.vue?b58f","webpack://tavern_helper_template/src/ERA/ui/components/EraPanel.vue?88c2","webpack://tavern_helper_template/src/ERA/ui/components/SnapshotManager.vue?dfd9","webpack://tavern_helper_template/src/ERA/ui/template/TabSwitch.vue?11a6","webpack://tavern_helper_template/src/ERA/ui/template/EraAccordion.vue?884b","webpack://tavern_helper_template/src/ERA/ui/components/EraPanel.vue?a7ad","webpack://tavern_helper_template/src/ERA/ui/App.vue?b873","webpack://tavern_helper_template/src/ERA/ui/components/RightRailContent/ActionButtons.vue?0238","src://tavern_helper_template/node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://tavern_helper_template/src/ERA/ui/components/RightRailContent/AboutEra.vue?42c8","webpack://tavern_helper_template/src/ERA/ui/template/TabSwitch.vue?67fb","webpack://tavern_helper_template/src/ERA/ui/components/FloatingBall.vue?ba41","src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js","webpack://tavern_helper_template/src/ERA/ui/components/RightRail.vue?f35b","webpack://tavern_helper_template/src/ERA/ui/components/RightRailContent/EraSettingsPanel.vue?f48f","webpack://tavern_helper_template/src/ERA/ui/template/PrettyJsonViewer.vue?15ec","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/webpack/runtime/compat get default export","src://tavern_helper_template/webpack/runtime/define property getters","src://tavern_helper_template/webpack/runtime/hasOwnProperty shorthand","src://tavern_helper_template/webpack/runtime/make namespace object","src://tavern_helper_template/external var \"z\"","src://tavern_helper_template/src/ERA/utils/constants.ts","src://tavern_helper_template/external var \"_\"","src://tavern_helper_template/external var \"Vue\"","src://tavern_helper_template/src/ERA/utils/era_data.ts","src://tavern_helper_template/src/ERA/utils/log.ts","src://tavern_helper_template/src/ERA/events/merger.ts","src://tavern_helper_template/src/ERA/utils/data.ts","src://tavern_helper_template/src/ERA/utils/string.ts","src://tavern_helper_template/src/ERA/utils/text.ts","src://tavern_helper_template/src/ERA/utils/message.ts","src://tavern_helper_template/src/ERA/core/key/mk.ts","src://tavern_helper_template/src/ERA/initer/auto/settings.ts","src://tavern_helper_template/src/ERA/macro/placeholder.ts","src://tavern_helper_template/src/ERA/core/timetravel.ts","src://tavern_helper_template/src/ERA/core/snapshot.ts","src://tavern_helper_template/src/ERA/events/emitters/events.ts","src://tavern_helper_template/src/ERA/core/crud/delete.ts","src://tavern_helper_template/src/ERA/core/crud/insert/template.ts","src://tavern_helper_template/src/ERA/core/crud/insert/insert.ts","src://tavern_helper_template/src/ERA/core/crud/update.ts","src://tavern_helper_template/src/ERA/core/crud/patcher.ts","src://tavern_helper_template/src/ERA/core/sync.ts","src://tavern_helper_template/src/ERA/ui/patch.ts","src://tavern_helper_template/src/ERA/events/handlers/sync.ts","src://tavern_helper_template/src/ERA/events/handlers/api/handler.ts","src://tavern_helper_template/src/ERA/events/handlers/api/dispatcher.ts","src://tavern_helper_template/src/ERA/events/dispatcher.ts","src://tavern_helper_template/src/ERA/events/handlers/updateMkOnly.ts","src://tavern_helper_template/src/ERA/events/queue.ts","src://tavern_helper_template/src/ERA/macro/parser.ts","src://tavern_helper_template/src/ERA/ui/template/EraAccordion.vue","webpack://tavern_helper_template/src/ERA/ui/template/EraAccordion.vue?7c2f","src://tavern_helper_template/src/ERA/ui/components/EraPanelContent/MetaHeader.vue","webpack://tavern_helper_template/src/ERA/ui/components/EraPanelContent/MetaHeader.vue?5072","webpack://tavern_helper_template/./src/ERA/ui/template/JsonNode.vue?19c7","src://tavern_helper_template/src/ERA/ui/template/JsonNode.vue","webpack://tavern_helper_template/src/ERA/ui/template/JsonNode.vue?0646","src://tavern_helper_template/src/ERA/ui/template/PrettyJsonViewer.vue","webpack://tavern_helper_template/src/ERA/ui/template/PrettyJsonViewer.vue?f6ce","src://tavern_helper_template/src/ERA/ui/components/EraPanelContent/OperationDetails.vue","webpack://tavern_helper_template/src/ERA/ui/components/EraPanelContent/OperationDetails.vue?12a9","src://tavern_helper_template/src/ERA/ui/template/TabSwitch.vue","webpack://tavern_helper_template/src/ERA/ui/template/TabSwitch.vue?d12c","src://tavern_helper_template/src/ERA/ui/components/SnapshotManager.vue","webpack://tavern_helper_template/src/ERA/ui/components/SnapshotManager.vue?fbfc","src://tavern_helper_template/src/ERA/ui/components/EraPanel.vue","webpack://tavern_helper_template/src/ERA/ui/components/EraPanel.vue?0511","src://tavern_helper_template/src/ERA/ui/components/FloatingBall.vue","webpack://tavern_helper_template/src/ERA/ui/components/FloatingBall.vue?0446","src://tavern_helper_template/src/ERA/ui/components/RightRailContent/AboutEra.vue","webpack://tavern_helper_template/src/ERA/ui/components/RightRailContent/AboutEra.vue?abc0","src://tavern_helper_template/external var \"toastr\"","src://tavern_helper_template/src/ERA/utils/regex.ts","src://tavern_helper_template/src/ERA/initer/manual/regex_objects/hide_era_data.ts","src://tavern_helper_template/src/ERA/initer/manual/regex_objects/hide_era_metadata.ts","src://tavern_helper_template/src/ERA/initer/manual/regex_objects/hide_era_thinking.ts","src://tavern_helper_template/src/ERA/initer/manual/regex_objects/replace_placeholder.ts","src://tavern_helper_template/src/ERA/initer/manual/regex.ts","src://tavern_helper_template/src/ERA/utils/worldbook.ts","src://tavern_helper_template/src/ERA/initer/manual/worldbook_entries/era_var_operation_rule.ts","src://tavern_helper_template/src/ERA/initer/manual/worldbook_entries/era_var_intent.ts","src://tavern_helper_template/src/ERA/initer/manual/worldbook.ts","src://tavern_helper_template/src/ERA/ui/components/RightRailContent/ActionButtons.vue","webpack://tavern_helper_template/src/ERA/ui/components/RightRailContent/ActionButtons.vue?4a98","src://tavern_helper_template/src/ERA/ui/components/RightRailContent/EraSettingsPanel.vue","webpack://tavern_helper_template/src/ERA/ui/components/RightRailContent/EraSettingsPanel.vue?c3d8","src://tavern_helper_template/src/ERA/ui/components/RightRail.vue","webpack://tavern_helper_template/src/ERA/ui/components/RightRail.vue?4941","src://tavern_helper_template/src/ERA/ui/components/ThemeManager.vue","webpack://tavern_helper_template/src/ERA/ui/components/ThemeManager.vue?52f0","src://tavern_helper_template/src/ERA/ui/store.ts","src://tavern_helper_template/src/ERA/ui/App.vue","webpack://tavern_helper_template/src/ERA/ui/App.vue?90e1","src://tavern_helper_template/src/ERA/ui/index.ts","src://tavern_helper_template/src/ERA/ui/utils/dom.ts","src://tavern_helper_template/src/ERA/index.ts"],"sourcesContent":["/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ThemeManager.vue?vue&type=style&index=0&id=1b0b79e5&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"5dd128fe\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ThemeManager.vue?vue&type=style&index=0&id=1b0b79e5&lang=css\", function() {\n     var newContent = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ThemeManager.vue?vue&type=style&index=0&id=1b0b79e5&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.meta[data-v-9a5820b4]{position:relative;border:1px solid var(--border-soft);border-radius:12px;background:var(--meta-bg);box-shadow:var(--meta-shadow),var(--settings-shadow-inset);transition:background 0.3s ease,border-color 0.3s ease}.kv[data-v-9a5820b4]{display:grid;grid-template-columns:120px 1fr;gap:8px 12px}.item[data-v-9a5820b4]{display:contents}.k[data-v-9a5820b4]{justify-self:start;align-self:center;font-size:12px;color:var(--text-normal);background:var(--meta-key-bg);border:1px solid var(--settings-border-input);padding:4px 8px;border-radius:8px;font-weight:700;transition:background 0.3s ease,border-color 0.3s ease,color 0.3s ease}.v[data-v-9a5820b4]{align-self:center;font-family:ui-monospace,Menlo,Consolas,monospace;font-size:12px;color:var(--settings-text-input);background:var(--bg-solid);border:1px solid var(--settings-border-input);padding:6px 8px;border-radius:8px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;transition:background 0.3s ease,border-color 0.3s ease,color 0.3s ease}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/ERA/ui/components/EraPanelContent/MetaHeader.vue\"],\"names\":[],\"mappings\":\"AAgDA,uBACE,iBAAkB,CAElB,mCAAoC,CACpC,kBAAmB,CACnB,yBAA0B,CAC1B,0DAA4D,CAC5D,sDAGF,CAEA,qBACE,YAAa,CACb,+BAAgC,CAChC,YACF,CACA,uBACE,gBACF,CACA,oBACE,kBAAmB,CACnB,iBAAkB,CAClB,cAAe,CACf,wBAAyB,CACzB,6BAA8B,CAC9B,6CAA8C,CAC9C,eAAgB,CAChB,iBAAkB,CAClB,eAAgB,CAChB,sEAIF,CACA,oBACE,iBAAkB,CAClB,iDAAqD,CACrD,cAAe,CACf,gCAAiC,CACjC,0BAA2B,CAC3B,6CAA8C,CAC9C,eAAgB,CAChB,iBAAkB,CAClB,eAAgB,CAChB,sBAAuB,CACvB,kBAAmB,CACnB,sEAIF\",\"sourcesContent\":[\"<template>\\n  <section class=\\\"meta\\\">\\n    <div class=\\\"kv\\\">\\n      <div class=\\\"item\\\">\\n        <span class=\\\"k\\\">mk</span>\\n        <!-- mk -->\\n        <span class=\\\"v\\\" :title=\\\"mk\\\">{{ mk || '' }}</span>\\n        <!-- mk -->\\n      </div>\\n      <div class=\\\"item\\\">\\n        <span class=\\\"k\\\">message_id</span>\\n        <!-- message_id -->\\n        <span class=\\\"v\\\">{{ messageId ?? '' }}</span>\\n        <!-- message_id -->\\n      </div>\\n      <div class=\\\"item\\\">\\n        <span class=\\\"k\\\"></span>\\n        <!--  -->\\n        <span class=\\\"v\\\">{{ isUser ? '' : 'AI' }}</span>\\n        <!--  -->\\n      </div>\\n    </div>\\n  </section>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { onMounted, watch } from 'vue';\\nimport { Logger } from '../../../utils/log';\\n\\nconst logger = new Logger();\\n\\n// \\nconst props = defineProps<{ mk: string; messageId: number; isUser: boolean }>(); // \\n\\nonMounted(() => {\\n  //logger.debug('onMounted', '', { props });\\n});\\n\\nwatch(\\n  () => props,\\n  newProps => {\\n    logger.debug('watch:props', 'Props ', { newProps });\\n  },\\n  { deep: true },\\n);\\n</script>\\n\\n<style scoped>\\n.meta {\\n  position: relative;\\n  /* padding is handled by EraAccordion's .inner */\\n  border: 1px solid var(--border-soft);\\n  border-radius: 12px;\\n  background: var(--meta-bg);\\n  box-shadow: var(--meta-shadow), var(--settings-shadow-inset);\\n  transition:\\n    background 0.3s ease,\\n    border-color 0.3s ease;\\n}\\n\\n.kv {\\n  display: grid;\\n  grid-template-columns: 120px 1fr;\\n  gap: 8px 12px;\\n}\\n.item {\\n  display: contents;\\n}\\n.k {\\n  justify-self: start;\\n  align-self: center;\\n  font-size: 12px;\\n  color: var(--text-normal);\\n  background: var(--meta-key-bg);\\n  border: 1px solid var(--settings-border-input);\\n  padding: 4px 8px;\\n  border-radius: 8px;\\n  font-weight: 700;\\n  transition:\\n    background 0.3s ease,\\n    border-color 0.3s ease,\\n    color 0.3s ease;\\n}\\n.v {\\n  align-self: center;\\n  font-family: ui-monospace, Menlo, Consolas, monospace;\\n  font-size: 12px;\\n  color: var(--settings-text-input);\\n  background: var(--bg-solid);\\n  border: 1px solid var(--settings-border-input);\\n  padding: 6px 8px;\\n  border-radius: 8px;\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n  transition:\\n    background 0.3s ease,\\n    border-color 0.3s ease,\\n    color 0.3s ease;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./App.vue?vue&type=style&index=1&id=7634a531&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"594b50ce\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./App.vue?vue&type=style&index=1&id=7634a531&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./App.vue?vue&type=style&index=1&id=7634a531&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.json-line[data-v-6c2ac46e]{position:relative;display:flex;align-items:center;gap:6px;padding:2px 6px;border-radius:6px;transition:background 0.2s ease}.json-line[data-v-6c2ac46e]:hover{background:var(--json-hover-bg)}.json-children[data-v-6c2ac46e]{border-left:1px dashed var(--json-tree-line);transition:border-color 0.3s ease}.key[data-v-6c2ac46e]{color:var(--json-key-color);font-weight:700;transition:color 0.3s ease}.colon[data-v-6c2ac46e]{color:var(--text-normal);transition:color 0.3s ease}.brace[data-v-6c2ac46e]{color:var(--text-normal);transition:color 0.3s ease}.summary[data-v-6c2ac46e]{color:var(--text-normal);margin-left:4px;transition:color 0.3s ease}.val.string[data-v-6c2ac46e]{color:var(--json-val-string)}.val.number[data-v-6c2ac46e]{color:var(--json-val-number)}.val.boolean[data-v-6c2ac46e]{color:var(--json-val-boolean)}.val.null[data-v-6c2ac46e]{color:var(--json-val-null)}.val.undefined[data-v-6c2ac46e]{color:var(--json-val-null)}.caret[data-v-6c2ac46e]{width:18px;height:18px;border:1px solid var(--border-soft);border-radius:4px;background:var(--bg-solid);line-height:16px;text-align:center;font-size:10px;color:var(--text-normal);cursor:pointer;box-shadow:var(--json-caret-shadow);transition:transform 0.18s ease,box-shadow 0.18s ease,background 0.3s ease,border-color 0.3s ease,color 0.3s ease}.caret.open[data-v-6c2ac46e]{transform:rotate(90deg);box-shadow:var(--json-caret-open-shadow)}.node[data-v-6c2ac46e]{overflow:clip;contain:paint;min-height:0}.json-children[data-v-6c2ac46e]{overflow:clip;contain:paint}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/ERA/ui/template/JsonNode.vue\"],\"names\":[],\"mappings\":\"AAoJA,4BACE,iBAAkB,CAClB,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,eAAgB,CAChB,iBAAkB,CAClB,+BACF,CACA,kCACE,+BACF,CACA,gCACE,4CAA6C,CAC7C,iCACF,CAGA,sBACE,2BAA4B,CAC5B,eAAgB,CAChB,0BACF,CACA,wBACE,wBAAyB,CACzB,0BACF,CACA,wBACE,wBAAyB,CACzB,0BACF,CACA,0BACE,wBAAyB,CACzB,eAAgB,CAChB,0BACF,CACA,6BACE,4BACF,CACA,6BACE,4BACF,CACA,8BACE,6BACF,CACA,2BACE,0BACF,CACA,gCACE,0BACF,CAGA,wBACE,UAAW,CACX,WAAY,CACZ,mCAAoC,CACpC,iBAAkB,CAClB,0BAA2B,CAC3B,gBAAiB,CACjB,iBAAkB,CAClB,cAAe,CACf,wBAAyB,CACzB,cAAe,CACf,mCAAoC,CACpC,iHAMF,CACA,6BACE,uBAAwB,CACxB,wCACF,CAGA,uBAEE,aAAc,CACd,aAAc,CACd,YACF,CAEA,gCAEE,aAAc,CACd,aACF\",\"sourcesContent\":[\"<template>\\n  <!--  -->\\n  <div class=\\\"node\\\">\\n    <!--  /  -->\\n    <div class=\\\"json-line\\\" :style=\\\"{ paddingLeft: level * 14 + 'px' }\\\">\\n      <!-- + -->\\n      <button v-if=\\\"foldable\\\" class=\\\"caret\\\" :class=\\\"{ open }\\\" aria-label=\\\"toggle\\\" @click=\\\"open = !open\\\"></button>\\n      <!--  -->\\n\\n      <span class=\\\"key\\\">{{ k }}</span\\n      ><span class=\\\"colon\\\">:</span>\\n      <!--  -->\\n\\n      <!--  children  -->\\n      <template v-if=\\\"foldable\\\">\\n        <span class=\\\"brace\\\">{{ isArray ? '[' : '{' }}</span>\\n        <!--  -->\\n        <span v-if=\\\"!open\\\" class=\\\"summary\\\">{{ summary }}</span>\\n        <!--  -->\\n      </template>\\n\\n      <!--  -->\\n      <template v-else>\\n        <span class=\\\"val\\\" :class=\\\"type\\\">{{ primitiveText }}</span>\\n        <!--  -->\\n      </template>\\n    </div>\\n\\n    <!--  -->\\n    <template v-if=\\\"foldable && open\\\">\\n      <div class=\\\"json-children\\\">\\n        <!--  JsonNode name: 'JsonNode'  -->\\n        <JsonNode\\n          v-for=\\\"(childVal, childKey) in childEntries\\\"\\n          :key=\\\"path + '/' + String(childKey)\\\"\\n          :k=\\\"String(childKey)\\\"\\n          :v=\\\"childVal\\\"\\n          :path=\\\"path + '/' + String(childKey)\\\"\\n          :level=\\\"level + 1\\\"\\n          :default-collapsed=\\\"defaultCollapsed\\\"\\n          :max-depth=\\\"maxDepth\\\"\\n        />\\n        <div class=\\\"json-line\\\" :style=\\\"{ paddingLeft: level * 14 + 'px' }\\\">\\n          <span class=\\\"brace\\\">{{ isArray ? ']' : '}' }}</span>\\n          <!--  -->\\n        </div>\\n      </div>\\n    </template>\\n  </div>\\n</template>\\n\\n<script lang=\\\"ts\\\">\\nimport { computed, defineComponent, onMounted, ref, watch } from 'vue'; // /\\nimport { Logger } from '../../utils/log';\\n\\nexport default defineComponent({\\n  name: 'JsonNode', // \\n  props: {\\n    k: { type: [String, Number], required: true }, // \\n    v: { required: true }, // \\n    path: { type: String, required: true }, //  key/\\n    level: { type: Number, required: true }, // \\n    defaultCollapsed: { type: Boolean, default: true }, // \\n    maxDepth: { type: Number, default: 3 }, // \\n  },\\n  setup(p) {\\n    const logger = new Logger();\\n\\n    onMounted(() => {\\n      //logger.debug('onMounted', '', { props: p });\\n    });\\n\\n    // \\n    const type = computed(() => {\\n      const val = p.v;\\n      if (val === null) return 'null';\\n      if (Array.isArray(val)) return 'array';\\n      const t = typeof val;\\n      if (t === 'object') return 'object';\\n      if (t === 'undefined') return 'undefined';\\n      return t as 'string' | 'number' | 'boolean' | 'bigint' | 'symbol' | 'function';\\n    });\\n\\n    // /\\n    const isArray = computed(() => type.value === 'array');\\n    const isObject = computed(() => type.value === 'object');\\n\\n    // \\n    const foldable = computed(() => isArray.value || isObject.value);\\n\\n    //  maxDepth  defaultCollapsed\\n    const open = ref<boolean>(p.level <= (p.maxDepth ?? 3) ? true : !p.defaultCollapsed);\\n\\n    watch(open, newOpenState => {\\n      logger.debug('watch:open', `: ${newOpenState ? '' : ''}`);\\n    });\\n\\n    //  undefined / bigint / symbol\\n    const primitiveText = computed(() => {\\n      const val = p.v as any;\\n      switch (type.value) {\\n        case 'string':\\n          return JSON.stringify(val);\\n        case 'number':\\n          return String(val);\\n        case 'boolean':\\n          return val ? 'true' : 'false';\\n        case 'null':\\n          return 'null';\\n        case 'undefined':\\n          return 'undefined';\\n        case 'bigint':\\n          return String(val) + 'n';\\n        case 'symbol':\\n          return String(val);\\n        case 'function':\\n          return '()';\\n        default:\\n          return '';\\n      }\\n    });\\n\\n    // \\n    const summary = computed(() => {\\n      if (isArray.value) return `Array[${(p.v as any[]).length}]`;\\n      if (isObject.value) return `Object{${Object.keys(p.v || {}).length}}`;\\n      return '';\\n    });\\n\\n    //    entries  \\n    const childEntries = computed<Record<string, any>>(() => {\\n      if (isObject.value) return p.v as Record<string, any>;\\n      if (isArray.value) {\\n        const out: Record<string, any> = {};\\n        (p.v as any[]).forEach((cv, idx) => {\\n          out[String(idx)] = cv;\\n        });\\n        return out;\\n      }\\n      return {};\\n    });\\n\\n    return { type, isArray, foldable, open, primitiveText, summary, childEntries };\\n  },\\n});\\n</script>\\n\\n<style scoped>\\n.json-line {\\n  position: relative;\\n  display: flex;\\n  align-items: center;\\n  gap: 6px;\\n  padding: 2px 6px;\\n  border-radius: 6px;\\n  transition: background 0.2s ease;\\n}\\n.json-line:hover {\\n  background: var(--json-hover-bg);\\n}\\n.json-children {\\n  border-left: 1px dashed var(--json-tree-line);\\n  transition: border-color 0.3s ease;\\n}\\n\\n/*  */\\n.key {\\n  color: var(--json-key-color);\\n  font-weight: 700;\\n  transition: color 0.3s ease;\\n}\\n.colon {\\n  color: var(--text-normal);\\n  transition: color 0.3s ease;\\n}\\n.brace {\\n  color: var(--text-normal);\\n  transition: color 0.3s ease;\\n}\\n.summary {\\n  color: var(--text-normal);\\n  margin-left: 4px;\\n  transition: color 0.3s ease;\\n}\\n.val.string {\\n  color: var(--json-val-string);\\n}\\n.val.number {\\n  color: var(--json-val-number);\\n}\\n.val.boolean {\\n  color: var(--json-val-boolean);\\n}\\n.val.null {\\n  color: var(--json-val-null);\\n}\\n.val.undefined {\\n  color: var(--json-val-null);\\n}\\n\\n/*  */\\n.caret {\\n  width: 18px;\\n  height: 18px;\\n  border: 1px solid var(--border-soft);\\n  border-radius: 4px;\\n  background: var(--bg-solid);\\n  line-height: 16px;\\n  text-align: center;\\n  font-size: 10px;\\n  color: var(--text-normal);\\n  cursor: pointer;\\n  box-shadow: var(--json-caret-shadow);\\n  transition:\\n    transform 0.18s ease,\\n    box-shadow 0.18s ease,\\n    background 0.3s ease,\\n    border-color 0.3s ease,\\n    color 0.3s ease;\\n}\\n.caret.open {\\n  transform: rotate(90deg);\\n  box-shadow: var(--json-caret-open-shadow);\\n}\\n\\n/* ===[]  === */\\n.node {\\n  /*  */\\n  overflow: clip; /*  */\\n  contain: paint; /*  1px  */\\n  min-height: 0; /*  */\\n}\\n\\n.json-children {\\n  /*  */\\n  overflow: clip; /*  */\\n  contain: paint; /* / */\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MetaHeader.vue?vue&type=style&index=0&id=9a5820b4&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"29388eba\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MetaHeader.vue?vue&type=style&index=0&id=9a5820b4&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./MetaHeader.vue?vue&type=style&index=0&id=9a5820b4&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./OperationDetails.vue?vue&type=style&index=0&id=6079192c&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"27e1b712\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./OperationDetails.vue?vue&type=style&index=0&id=6079192c&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./OperationDetails.vue?vue&type=style&index=0&id=6079192c&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./PrettyJsonViewer.vue?vue&type=style&index=0&id=6fc9ef75&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"3d6f0630\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./PrettyJsonViewer.vue?vue&type=style&index=0&id=6fc9ef75&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./PrettyJsonViewer.vue?vue&type=style&index=0&id=6fc9ef75&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.era-shell[data-v-7634a531]{display:flex;align-items:flex-start;gap:12px;flex-wrap:nowrap}[data-v-7634a531] .era-panel{flex:0 1 auto}@media (max-width:992px){.era-shell[data-v-7634a531]{flex-wrap:wrap}[data-v-7634a531] .era-panel,[data-v-7634a531] .right-rail{width:100%;flex-basis:auto}[data-v-7634a531] .right-rail{position:static;margin-top:12px;height:auto;max-height:40vh}}[data-v-7634a531] .floating-ball{position:fixed;right:max(16px,env(safe-area-inset-right));bottom:max(90px,env(safe-area-inset-bottom));z-index:2147483647;pointer-events:auto;touch-action:manipulation;will-change:transform}.era-expanded-layer[data-v-7634a531]{position:fixed;inset:0;display:grid;place-items:center;padding:clamp(12px,2.5vw,24px);pointer-events:auto;z-index:2147483646;background:transparent;overflow:auto}@media (max-width:640px){[data-v-7634a531] .era-panel{width:min(92vw,560px);height:min(88vh,calc(100svh - 32px))}.panel-body[data-v-7634a531]{overscroll-behavior:contain}}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/ERA/ui/App.vue\"],\"names\":[],\"mappings\":\"AAoFA,4BAEE,YAAa,CACb,sBAAuB,CACvB,QAAS,CACT,gBACF,CAGA,6BACE,aACF,CAGA,yBAEE,4BACE,cACF,CACA,2DAEE,UAAW,CACX,eACF,CACA,8BACE,eAAgB,CAChB,eAAgB,CAChB,WAAY,CACZ,eACF,CACF,CAGA,iCAEE,cAAe,CACf,0CAA4C,CAC5C,4CAA8C,CAC9C,kBAAmB,CACnB,mBAAoB,CACpB,yBAA0B,CAC1B,qBACF,CAGA,qCAEE,cAAe,CACf,OAAQ,CACR,YAAa,CACb,kBAAmB,CACnB,8BAAiC,CACjC,mBAAoB,CACpB,kBAAmB,CACnB,sBAAuB,CACvB,aACF,CAGA,yBAEE,6BAEE,qBAAuB,CACvB,oCACF,CACA,6BAEE,2BACF,CACF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"era-app-container\\\" :class=\\\"{ 'dark-theme': isDarkMode }\\\">\\n    <ThemeManager ref=\\\"themeManager\\\" />\\n    <FloatingBall v-show=\\\"currentComponent === 'FloatingBall'\\\" @click=\\\"requestSwitchView('ExpandedView')\\\" />\\n    <div v-show=\\\"currentComponent === 'ExpandedView'\\\" class=\\\"era-expanded-layer\\\">\\n      <!--  -->\\n      <div class=\\\"era-shell\\\">\\n        <!--  +  -->\\n        <EraPanel :data=\\\"dataRef\\\" />\\n        <RightRail />\\n      </div>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { storeToRefs } from 'pinia';\\nimport { onBeforeUnmount, onMounted, ref } from 'vue';\\nimport { settings } from '../utils/era_data';\\nimport { Logger } from '../utils/log';\\nimport EraPanel from './components/EraPanel.vue';\\nimport FloatingBall from './components/FloatingBall.vue';\\nimport RightRail from './components/RightRail.vue';\\nimport ThemeManager from './components/ThemeManager.vue';\\nimport { useUiStore } from './store';\\n\\nconst logger = new Logger();\\n\\n//  Pinia store  action\\nconst uiStore = useUiStore();\\nconst { currentView: currentComponent, eventData: dataRef } = storeToRefs(uiStore);\\n\\n// \\nconst themeManager = ref<InstanceType<typeof ThemeManager> | null>(null);\\nconst isDarkMode = ref(false);\\n\\nconst loadThemeSetting = () => {\\n  try {\\n    const darkModeValue = settings.value?.[''] ?? false;\\n    isDarkMode.value = darkModeValue;\\n    if (themeManager.value) {\\n      themeManager.value.isDarkMode = darkModeValue;\\n    }\\n    logger.debug('loadThemeSetting', `: ${darkModeValue ? 'Dark' : 'Light'}`);\\n  } catch (e) {\\n    logger.error('loadThemeSetting', '', e);\\n    isDarkMode.value = false; // Fallback to light mode\\n  }\\n};\\n\\nonMounted(() => {\\n  loadThemeSetting();\\n  window.addEventListener('era-settings-updated', loadThemeSetting);\\n});\\n\\nonBeforeUnmount(() => {\\n  window.removeEventListener('era-settings-updated', loadThemeSetting);\\n});\\n\\nconst requestSwitchView = (viewName: 'FloatingBall' | 'ExpandedView') => {\\n  logger.debug('requestSwitchView', `: ${viewName}`);\\n  uiStore.switchView(viewName);\\n};\\n</script>\\n\\n<style>\\n/* App.vue  .era-app-container */\\n.era-app-container {\\n  /*  */\\n  position: fixed; /*  */\\n  inset: 0; /* top/right/bottom/left  0 */\\n  z-index: 2147483646; /*  */\\n  pointer-events: none; /*  */\\n  isolation: isolate; /*  */\\n  contain: layout style paint; /*  */\\n  width: 100svw; /*  */\\n  height: 100svh; /*  */\\n}\\n</style>\\n\\n<style scoped>\\n/*  EraDataPanel.vue  */\\n\\n/* ===[]  + === */\\n.era-shell {\\n  /*  */ /*  */\\n  display: flex; /*  */ /* flex  */\\n  align-items: flex-start; /*  */ /*  */\\n  gap: 12px; /*  */ /*  */\\n  flex-wrap: nowrap; /*  */ /*  */\\n}\\n\\n/*  */\\n:deep(.era-panel) {\\n  flex: 0 1 auto; /*  */\\n}\\n\\n/*  */\\n@media (max-width: 992px) {\\n  /* 992px ()  */\\n  .era-shell {\\n    flex-wrap: wrap; /*  */\\n  }\\n  :deep(.era-panel),\\n  :deep(.right-rail) {\\n    width: 100%; /*  */\\n    flex-basis: auto; /*  flex-basis */\\n  }\\n  :deep(.right-rail) {\\n    position: static; /*  */\\n    margin-top: 12px; /*  */\\n    height: auto; /*  */\\n    max-height: 40vh; /*  */\\n  }\\n}\\n\\n/* ===[]  +  === */\\n:deep(.floating-ball) {\\n  /* scoped  deep */\\n  position: fixed; /*  */\\n  right: max(16px, env(safe-area-inset-right)); /*  +  */\\n  bottom: max(90px, env(safe-area-inset-bottom)); /*  +  */\\n  z-index: 2147483647; /*  */\\n  pointer-events: auto; /*  none */\\n  touch-action: manipulation; /*  */\\n  will-change: transform; /*  3D/ */\\n}\\n\\n/* ===[]  ExpandedView v-show  true  === */\\n.era-expanded-layer {\\n  /*  class */\\n  position: fixed; /*  */\\n  inset: 0; /*  */\\n  display: grid; /*  grid  */\\n  place-items: center; /*  */\\n  padding: clamp(12px, 2.5vw, 24px); /*  */\\n  pointer-events: auto; /*  none  */\\n  z-index: 2147483646; /*  */\\n  background: transparent; /*  rgba(0,0,0,.25) */\\n  overflow: auto; /*  */\\n}\\n\\n/* ===[]  === */\\n@media (max-width: 640px) {\\n  /*  */\\n  :deep(.era-panel) {\\n    /*  */\\n    width: min(92vw, 560px); /*  92vw 60vw  */\\n    height: min(88vh, calc(100svh - 32px)); /* / */\\n  }\\n  .panel-body {\\n    /*  */\\n    overscroll-behavior: contain; /*  */\\n  }\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./RightRail.vue?vue&type=style&index=0&id=61d00544&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"a237bc32\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./RightRail.vue?vue&type=style&index=0&id=61d00544&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./RightRail.vue?vue&type=style&index=0&id=61d00544&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.era-app-container{position:fixed;inset:0;z-index:2147483646;pointer-events:none;isolation:isolate;contain:layout style paint;width:100svw;height:100svh}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/ERA/ui/App.vue\"],\"names\":[],\"mappings\":\"AAmEA,mBAEE,cAAe,CACf,OAAQ,CACR,kBAAmB,CACnB,mBAAoB,CACpB,iBAAkB,CAClB,0BAA2B,CAC3B,YAAa,CACb,aACF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"era-app-container\\\" :class=\\\"{ 'dark-theme': isDarkMode }\\\">\\n    <ThemeManager ref=\\\"themeManager\\\" />\\n    <FloatingBall v-show=\\\"currentComponent === 'FloatingBall'\\\" @click=\\\"requestSwitchView('ExpandedView')\\\" />\\n    <div v-show=\\\"currentComponent === 'ExpandedView'\\\" class=\\\"era-expanded-layer\\\">\\n      <!--  -->\\n      <div class=\\\"era-shell\\\">\\n        <!--  +  -->\\n        <EraPanel :data=\\\"dataRef\\\" />\\n        <RightRail />\\n      </div>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { storeToRefs } from 'pinia';\\nimport { onBeforeUnmount, onMounted, ref } from 'vue';\\nimport { settings } from '../utils/era_data';\\nimport { Logger } from '../utils/log';\\nimport EraPanel from './components/EraPanel.vue';\\nimport FloatingBall from './components/FloatingBall.vue';\\nimport RightRail from './components/RightRail.vue';\\nimport ThemeManager from './components/ThemeManager.vue';\\nimport { useUiStore } from './store';\\n\\nconst logger = new Logger();\\n\\n//  Pinia store  action\\nconst uiStore = useUiStore();\\nconst { currentView: currentComponent, eventData: dataRef } = storeToRefs(uiStore);\\n\\n// \\nconst themeManager = ref<InstanceType<typeof ThemeManager> | null>(null);\\nconst isDarkMode = ref(false);\\n\\nconst loadThemeSetting = () => {\\n  try {\\n    const darkModeValue = settings.value?.[''] ?? false;\\n    isDarkMode.value = darkModeValue;\\n    if (themeManager.value) {\\n      themeManager.value.isDarkMode = darkModeValue;\\n    }\\n    logger.debug('loadThemeSetting', `: ${darkModeValue ? 'Dark' : 'Light'}`);\\n  } catch (e) {\\n    logger.error('loadThemeSetting', '', e);\\n    isDarkMode.value = false; // Fallback to light mode\\n  }\\n};\\n\\nonMounted(() => {\\n  loadThemeSetting();\\n  window.addEventListener('era-settings-updated', loadThemeSetting);\\n});\\n\\nonBeforeUnmount(() => {\\n  window.removeEventListener('era-settings-updated', loadThemeSetting);\\n});\\n\\nconst requestSwitchView = (viewName: 'FloatingBall' | 'ExpandedView') => {\\n  logger.debug('requestSwitchView', `: ${viewName}`);\\n  uiStore.switchView(viewName);\\n};\\n</script>\\n\\n<style>\\n/* App.vue  .era-app-container */\\n.era-app-container {\\n  /*  */\\n  position: fixed; /*  */\\n  inset: 0; /* top/right/bottom/left  0 */\\n  z-index: 2147483646; /*  */\\n  pointer-events: none; /*  */\\n  isolation: isolate; /*  */\\n  contain: layout style paint; /*  */\\n  width: 100svw; /*  */\\n  height: 100svh; /*  */\\n}\\n</style>\\n\\n<style scoped>\\n/*  EraDataPanel.vue  */\\n\\n/* ===[]  + === */\\n.era-shell {\\n  /*  */ /*  */\\n  display: flex; /*  */ /* flex  */\\n  align-items: flex-start; /*  */ /*  */\\n  gap: 12px; /*  */ /*  */\\n  flex-wrap: nowrap; /*  */ /*  */\\n}\\n\\n/*  */\\n:deep(.era-panel) {\\n  flex: 0 1 auto; /*  */\\n}\\n\\n/*  */\\n@media (max-width: 992px) {\\n  /* 992px ()  */\\n  .era-shell {\\n    flex-wrap: wrap; /*  */\\n  }\\n  :deep(.era-panel),\\n  :deep(.right-rail) {\\n    width: 100%; /*  */\\n    flex-basis: auto; /*  flex-basis */\\n  }\\n  :deep(.right-rail) {\\n    position: static; /*  */\\n    margin-top: 12px; /*  */\\n    height: auto; /*  */\\n    max-height: 40vh; /*  */\\n  }\\n}\\n\\n/* ===[]  +  === */\\n:deep(.floating-ball) {\\n  /* scoped  deep */\\n  position: fixed; /*  */\\n  right: max(16px, env(safe-area-inset-right)); /*  +  */\\n  bottom: max(90px, env(safe-area-inset-bottom)); /*  +  */\\n  z-index: 2147483647; /*  */\\n  pointer-events: auto; /*  none */\\n  touch-action: manipulation; /*  */\\n  will-change: transform; /*  3D/ */\\n}\\n\\n/* ===[]  ExpandedView v-show  true  === */\\n.era-expanded-layer {\\n  /*  class */\\n  position: fixed; /*  */\\n  inset: 0; /*  */\\n  display: grid; /*  grid  */\\n  place-items: center; /*  */\\n  padding: clamp(12px, 2.5vw, 24px); /*  */\\n  pointer-events: auto; /*  none  */\\n  z-index: 2147483646; /*  */\\n  background: transparent; /*  rgba(0,0,0,.25) */\\n  overflow: auto; /*  */\\n}\\n\\n/* ===[]  === */\\n@media (max-width: 640px) {\\n  /*  */\\n  :deep(.era-panel) {\\n    /*  */\\n    width: min(92vw, 560px); /*  92vw 60vw  */\\n    height: min(88vh, calc(100svh - 32px)); /* / */\\n  }\\n  .panel-body {\\n    /*  */\\n    overscroll-behavior: contain; /*  */\\n  }\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./EraSettingsPanel.vue?vue&type=style&index=0&id=e1f9e9e0&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"63e30de7\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./EraSettingsPanel.vue?vue&type=style&index=0&id=e1f9e9e0&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./EraSettingsPanel.vue?vue&type=style&index=0&id=e1f9e9e0&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.about-era-card[data-v-9b1026a6]{width:100%;padding:12px;background:var(--actions-bg-glass);border:1px solid var(--border-strong);border-radius:16px;backdrop-filter:blur(10px);box-shadow:var(--actions-shadow-card),var(--shadow-inset);display:flex;flex-direction:column;gap:10px;transition:background 0.3s ease,border-color 0.3s ease}.card-title[data-v-9b1026a6]{margin:0 0 4px;font-size:14px;font-weight:800;letter-spacing:0.3px;color:var(--text-title);transition:color 0.3s ease}.info-list[data-v-9b1026a6]{font-size:13px;color:var(--text-normal)}.info-list ul[data-v-9b1026a6]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:8px}.info-list li[data-v-9b1026a6]{display:flex;justify-content:space-between}.info-list a[data-v-9b1026a6]{color:var(--text-subtitle);text-decoration:none;font-weight:600;transition:color 0.3s ease}.info-list a[data-v-9b1026a6]:hover{color:var(--text-title);text-decoration:underline}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/ERA/ui/components/RightRailContent/AboutEra.vue\"],\"names\":[],\"mappings\":\"AAqCA,iCACE,UAAW,CACX,YAAa,CACb,kCAAmC,CACnC,qCAAsC,CACtC,kBAAmB,CACnB,0BAA2B,CAC3B,yDAA2D,CAC3D,YAAa,CACb,qBAAsB,CACtB,QAAS,CACT,sDAGF,CAEA,6BACE,cAAe,CACf,cAAe,CACf,eAAgB,CAChB,oBAAqB,CACrB,uBAAwB,CACxB,0BACF,CAEA,4BACE,cAAe,CACf,wBACF,CAEA,+BACE,eAAgB,CAChB,SAAU,CACV,QAAS,CACT,YAAa,CACb,qBAAsB,CACtB,OACF,CAEA,+BACE,YAAa,CACb,6BACF,CAEA,8BACE,0BAA2B,CAC3B,oBAAqB,CACrB,eAAgB,CAChB,0BACF,CAEA,oCACE,uBAAwB,CACxB,yBACF\",\"sourcesContent\":[\"<template>\\n  <section class=\\\"about-era-card\\\" role=\\\"complementary\\\" aria-label=\\\" ERA\\\">\\n    <h4 class=\\\"card-title\\\"> ERA</h4>\\n    <div class=\\\"info-list\\\">\\n      <ul>\\n        <li>\\n          <strong>ERA :</strong>\\n          <a\\n            href=\\\"https://github.com/RockingSisyphus/ERA-EfficientRollbackArchitecture/tree/master\\\"\\n            target=\\\"_blank\\\"\\n            rel=\\\"noopener noreferrer\\\"\\n          >\\n            GitHub\\n          </a>\\n        </li>\\n        <li>\\n          <strong>ERA :</strong>\\n          <a\\n            href=\\\"https://discord.com/channels/1134557553011998840/1423319849400270928\\\"\\n            target=\\\"_blank\\\"\\n            rel=\\\"noopener noreferrer\\\"\\n          >\\n            Discord\\n          </a>\\n        </li>\\n        <li><strong>:</strong> </li>\\n        <li><strong>ERA :</strong> 1006127516</li>\\n      </ul>\\n    </div>\\n  </section>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\n// This component is purely informational.\\n</script>\\n\\n<style scoped>\\n.about-era-card {\\n  width: 100%;\\n  padding: 12px;\\n  background: var(--actions-bg-glass);\\n  border: 1px solid var(--border-strong);\\n  border-radius: 16px;\\n  backdrop-filter: blur(10px);\\n  box-shadow: var(--actions-shadow-card), var(--shadow-inset);\\n  display: flex;\\n  flex-direction: column;\\n  gap: 10px;\\n  transition:\\n    background 0.3s ease,\\n    border-color 0.3s ease;\\n}\\n\\n.card-title {\\n  margin: 0 0 4px;\\n  font-size: 14px;\\n  font-weight: 800;\\n  letter-spacing: 0.3px;\\n  color: var(--text-title);\\n  transition: color 0.3s ease;\\n}\\n\\n.info-list {\\n  font-size: 13px;\\n  color: var(--text-normal);\\n}\\n\\n.info-list ul {\\n  list-style: none;\\n  padding: 0;\\n  margin: 0;\\n  display: flex;\\n  flex-direction: column;\\n  gap: 8px;\\n}\\n\\n.info-list li {\\n  display: flex;\\n  justify-content: space-between;\\n}\\n\\n.info-list a {\\n  color: var(--text-subtitle);\\n  text-decoration: none;\\n  font-weight: 600;\\n  transition: color 0.3s ease;\\n}\\n\\n.info-list a:hover {\\n  color: var(--text-title);\\n  text-decoration: underline;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nexport default function listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n","/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\nimport listToStyles from './listToStyles'\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\nvar options = null\nvar ssrIdKey = 'data-vue-ssr-id'\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nexport default function addStylesClient (parentId, list, _isProduction, _options) {\n  isProduction = _isProduction\n\n  options = _options || {}\n\n  var styles = listToStyles(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = listToStyles(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[' + ssrIdKey + '~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n  if (options.ssrId) {\n    styleElement.setAttribute(ssrIdKey, obj.id)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.details-wrapper[data-v-6079192c]{display:flex;flex-direction:column;gap:10px}.detail-block[data-v-6079192c]{padding:10px 12px;background:var(--bg-soft);border:1px solid var(--border-soft);border-radius:10px;transition:background 0.3s ease,border-color 0.3s ease}.detail-title[data-v-6079192c]{margin:0 0 8px;font-size:13px;font-weight:800;color:var(--text-subtitle);transition:color 0.3s ease}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/ERA/ui/components/EraPanelContent/OperationDetails.vue\"],\"names\":[],\"mappings\":\"AA4BA,kCACE,YAAa,CACb,qBAAsB,CACtB,QACF,CAEA,+BACE,iBAAkB,CAClB,yBAA0B,CAC1B,mCAAoC,CACpC,kBAAmB,CACnB,sDAGF,CAEA,+BACE,cAAe,CACf,cAAe,CACf,eAAgB,CAChB,0BAA2B,CAC3B,0BACF\",\"sourcesContent\":[\"<template>\\n  <EraAccordion title=\\\"ERA \\\" :default-open=\\\"false\\\">\\n    <template #default>\\n      <div class=\\\"details-wrapper\\\">\\n        <div class=\\\"detail-block\\\">\\n          <h4 class=\\\"detail-title\\\">SelectedMks</h4>\\n          <PrettyJsonViewer :value=\\\"data.selectedMks\\\" :default-collapsed=\\\"true\\\" :max-depth=\\\"3\\\" />\\n        </div>\\n        <div class=\\\"detail-block\\\">\\n          <h4 class=\\\"detail-title\\\">EditLogs</h4>\\n          <PrettyJsonViewer :value=\\\"data.editLogs\\\" :default-collapsed=\\\"true\\\" :max-depth=\\\"2\\\" />\\n        </div>\\n      </div>\\n    </template>\\n  </EraAccordion>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport type { WriteDonePayload } from '../../../utils/constants';\\nimport EraAccordion from '../../template/EraAccordion.vue';\\nimport PrettyJsonViewer from '../../template/PrettyJsonViewer.vue';\\n\\ndefineProps<{\\n  data: WriteDonePayload;\\n}>();\\n</script>\\n\\n<style scoped>\\n.details-wrapper {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 10px;\\n}\\n\\n.detail-block {\\n  padding: 10px 12px;\\n  background: var(--bg-soft);\\n  border: 1px solid var(--border-soft);\\n  border-radius: 10px;\\n  transition:\\n    background 0.3s ease,\\n    border-color 0.3s ease;\\n}\\n\\n.detail-title {\\n  margin: 0 0 8px;\\n  font-size: 13px;\\n  font-weight: 800;\\n  color: var(--text-subtitle);\\n  transition: color 0.3s ease;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SnapshotManager.vue?vue&type=style&index=0&id=3301a1fe&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"69c70314\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SnapshotManager.vue?vue&type=style&index=0&id=3301a1fe&lang=css\", function() {\n     var newContent = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./SnapshotManager.vue?vue&type=style&index=0&id=3301a1fe&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.floating-ball[data-v-3bb5cc6c]{--size:50px;--hue:var(--ball-hue,212);--sat:var(--ball-sat,100%);--lum:var(--ball-lum,52%);--surface:hsl(var(--hue) var(--sat) var(--lum));--surface-2:hsl(var(--hue) 95% 64%);--ring:hsl(calc(var(--hue) + 20) 95% 65%);--shadow:var(--ball-shadow-color,rgba(0,123,255,0.36));--glow:var(--ball-glow-color,rgba(102,200,255,0.55));--inner-shadow:var(--ball-inner-shadow-color,rgba(0,0,0,0.22));--specular:var(--ball-specular-color,rgba(255,255,255,0.75));--glass:var(--ball-glass-color,rgba(255,255,255,0.18));width:var(--size);height:var(--size);border-radius:50%;position:relative;display:grid;place-items:center;cursor:pointer;-webkit-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent;background:radial-gradient(120% 120% at 30% 28%,rgba(255,255,255,0.85) 0%,rgba(255,255,255,0.22) 18%,rgba(255,255,255,0) 36%),radial-gradient(120% 120% at 70% 72%,rgba(0,0,0,0.18) 0%,rgba(0,0,0,0) 38%),conic-gradient(from 210deg at 50% 50%,var(--surface),var(--surface-2),var(--surface));box-shadow:inset 0 2px 6px var(--inner-shadow),0 2px 4px rgba(0,0,0,0.08),0 10px 22px var(--shadow);transition:transform 0.28s ease,box-shadow 0.28s ease,filter 0.28s ease;will-change:transform,box-shadow,filter;animation:ball-bob-3bb5cc6c 3.2s ease-in-out infinite}.floating-ball[data-v-3bb5cc6c]::after{content:'';position:absolute;inset:-8px;border-radius:50%;background:conic-gradient(from 0deg,var(--ring),transparent 30%,transparent 70%,var(--ring));filter:blur(6px);opacity:0.55;pointer-events:none;-webkit-mask:radial-gradient(farthest-side,transparent calc(100% - 12px),#000 0);mask:radial-gradient(farthest-side,transparent calc(100% - 12px),#000 0);animation:ring-spin-3bb5cc6c 12s linear infinite}.floating-ball[data-v-3bb5cc6c]::before{content:'';position:absolute;inset:2px;border-radius:50%;background:radial-gradient(120% 80% at 26% 24%,var(--specular) 0%,rgba(255,255,255,0.2) 26%,rgba(255,255,255,0) 46%),linear-gradient(160deg,var(--glass) 0%,rgba(255,255,255,0) 50%);mix-blend-mode:screen;pointer-events:none;transition:opacity 0.28s ease,transform 0.28s ease}.floating-ball[data-v-3bb5cc6c]:hover{transform:translateY(-2px) scale(1.04);box-shadow:inset 0 2px 8px rgba(0,0,0,0.22),0 4px 10px rgba(0,0,0,0.12),0 16px 36px rgba(0,123,255,0.45);filter:saturate(1.08)}.floating-ball[data-v-3bb5cc6c]:hover::before{opacity:0.95;animation:shimmer-3bb5cc6c 1.2s ease-out}.floating-ball[data-v-3bb5cc6c]:active{transform:translateY(0) scale(0.98);box-shadow:inset 0 2px 10px rgba(0,0,0,0.28),0 2px 6px rgba(0,0,0,0.12),0 10px 22px rgba(0,123,255,0.35)}.floating-ball[data-v-3bb5cc6c]:focus-visible{outline:2px solid var(--ball-focus-outline,rgba(102,200,255,0.85));outline-offset:2px}@media (prefers-reduced-motion:reduce){.floating-ball[data-v-3bb5cc6c]{animation:none}.floating-ball[data-v-3bb5cc6c]::after{animation:none}}@keyframes ball-bob-3bb5cc6c{0%,100%{transform:translateY(0)}50%{transform:translateY(-2px)}}@keyframes ring-spin-3bb5cc6c{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes shimmer-3bb5cc6c{0%{transform:translateY(-1px) scale(0.98);opacity:0.6}50%{transform:translateY(-2px) scale(1.02);opacity:1}100%{transform:translateY(-1px) scale(0.99);opacity:0.85}}.floating-ball[data-v-3bb5cc6c]{--logo-scale:0.38}.era-logo[data-v-3bb5cc6c]{font-weight:800;font-size:calc(var(--size) * var(--logo-scale));letter-spacing:0.02em;line-height:1;transform:translateY(-1px);white-space:nowrap;-webkit-user-select:none;user-select:none;pointer-events:none;z-index:1;background:var(--ball-logo-bg,linear-gradient(180deg,rgba(255,255,255,0.96) 0%,rgba(255,255,255,0.55) 45%,rgba(220,240,255,0.4) 65%,rgba(120,195,255,0.55) 100%),linear-gradient(180deg,rgba(0,0,0,0.38),rgba(0,0,0,0) 60%));-webkit-background-clip:text;background-clip:text;color:transparent;text-shadow:0 1px 0 var(--ball-logo-shadow-top,rgba(255,255,255,0.75)),0 2px 4px var(--ball-logo-shadow-near,rgba(0,0,0,0.25)),0 8px 18px var(--ball-logo-shadow-far,rgba(0,123,255,0.35));filter:var(--ball-logo-filter-glow,drop-shadow(0 0 2px rgba(102,200,255,0.25)));animation:era-sheen-3bb5cc6c 4s ease-in-out infinite;transition:text-shadow 0.3s ease,filter 0.3s ease}.floating-ball:hover .era-logo[data-v-3bb5cc6c]{text-shadow:0 1px 0 var(--ball-logo-shadow-top,rgba(255,255,255,0.85)),0 3px 8px var(--ball-logo-shadow-near,rgba(0,0,0,0.28)),0 10px 26px var(--ball-logo-shadow-far,rgba(0,123,255,0.55));filter:var(--ball-logo-filter-glow,drop-shadow(0 0 3px rgba(102,200,255,0.38)))}@keyframes era-sheen-3bb5cc6c{0%,100%{background-position:0% 0%,0% 0%}50%{background-position:0% 40%,0% 0%}}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/ERA/ui/components/FloatingBall.vue\"],\"names\":[],\"mappings\":\"AAuBA,gCACE,WAAY,CACZ,yBAA2B,CAC3B,0BAA4B,CAC5B,yBAA2B,CAC3B,+CAAgD,CAChD,mCAAoC,CACpC,yCAA0C,CAC1C,sDAA2D,CAC3D,oDAAyD,CACzD,8DAAmE,CACnE,4DAAiE,CACjE,sDAA2D,CAC3D,iBAAkB,CAClB,kBAAmB,CACnB,iBAAkB,CAClB,iBAAkB,CAClB,YAAa,CACb,kBAAmB,CACnB,cAAe,CACf,wBAAiB,CAAjB,gBAAiB,CACjB,uCAAwC,CACxC,+RAQ0G,CAC1G,mGAG0C,CAC1C,uEAGmB,CACnB,uCAA0C,CAC1C,qDACF,CAGA,uCACE,UAAW,CACX,iBAAkB,CAClB,UAAW,CACX,iBAAkB,CAClB,4FAMC,CACD,gBAAiB,CACjB,YAAa,CACb,mBAAoB,CACpB,gFAA2E,CAA3E,wEAA2E,CAC3E,gDACF,CAGA,wCACE,UAAW,CACX,iBAAkB,CAClB,SAAU,CACV,iBAAkB,CAClB,oLAE+E,CAC/E,qBAAsB,CACtB,mBAAoB,CACpB,kDAGF,CAGA,sCACE,sCAAuC,CACvC,wGAGgD,CAChD,qBACF,CAGA,8CACE,YAAa,CACb,wCACF,CAGA,uCACE,mCAAoC,CACpC,wGAIF,CAGA,8CACE,kEAAuE,CACvE,kBACF,CAGA,uCACE,gCACE,cACF,CACA,uCACE,cACF,CACF,CAGA,6BACE,QAEE,uBACF,CACA,IACE,0BACF,CACF,CAGA,8BACE,GACE,sBACF,CACA,KACE,wBACF,CACF,CAGA,4BACE,GACE,sCAAuC,CACvC,WACF,CACA,IACE,sCAAuC,CACvC,SACF,CACA,KACE,sCAAuC,CACvC,YACF,CACF,CAGA,gCACE,iBACF,CAEA,2BACE,eAAgB,CAChB,+CAAgD,CAChD,qBAAsB,CACtB,aAAc,CACd,0BAA2B,CAC3B,kBAAmB,CACnB,wBAAiB,CAAjB,gBAAiB,CACjB,mBAAoB,CACpB,SAAU,CAGV,4NAUC,CACD,4BAA6B,CAC7B,oBAAqB,CACrB,iBAAkB,CAClB,0LAG2E,CAC3E,+EAAoF,CACpF,oDAA4C,CAC5C,iDAGF,CAEA,gDACE,2LAGkE,CAClE,+EACF,CAGA,8BACE,QAEE,+BAGF,CACA,IACE,gCAGF,CACF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"floating-ball\\\" @click=\\\"$emit('click')\\\">\\n    <span class=\\\"era-logo\\\" aria-hidden=\\\"true\\\">ERA</span>\\n    <!--  -->\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { onMounted } from 'vue';\\nimport { Logger } from '../../utils/log';\\n\\nconst logger = new Logger();\\ndefineEmits(['click']);\\n\\nonMounted(() => {\\n  //logger.debug('onMounted', 'FloatingBall.vue ');\\n});\\n</script>\\n\\n<style scoped>\\n/* =========================\\n   \\n   ========================= */\\n.floating-ball {\\n  --size: 50px; /*  50px */\\n  --hue: var(--ball-hue, 212); /* 212#007bff */\\n  --sat: var(--ball-sat, 100%); /*  */\\n  --lum: var(--ball-lum, 52%); /*  */\\n  --surface: hsl(var(--hue) var(--sat) var(--lum)); /*  */\\n  --surface-2: hsl(var(--hue) 95% 64%); /*  */\\n  --ring: hsl(calc(var(--hue) + 20) 95% 65%); /*  */\\n  --shadow: var(--ball-shadow-color, rgba(0, 123, 255, 0.36)); /*  */\\n  --glow: var(--ball-glow-color, rgba(102, 200, 255, 0.55)); /*  */\\n  --inner-shadow: var(--ball-inner-shadow-color, rgba(0, 0, 0, 0.22)); /*  */\\n  --specular: var(--ball-specular-color, rgba(255, 255, 255, 0.75)); /*  */\\n  --glass: var(--ball-glass-color, rgba(255, 255, 255, 0.18)); /*  */\\n  width: var(--size); /*  */\\n  height: var(--size); /*  */\\n  border-radius: 50%; /*  */\\n  position: relative; /*  */\\n  display: grid; /*  grid  */\\n  place-items: center; /*  */\\n  cursor: pointer; /*  */\\n  user-select: none; /*  */\\n  -webkit-tap-highlight-color: transparent; /*  */\\n  background:\\n    radial-gradient(\\n      120% 120% at 30% 28%,\\n      rgba(255, 255, 255, 0.85) 0%,\\n      rgba(255, 255, 255, 0.22) 18%,\\n      rgba(255, 255, 255, 0) 36%\\n    ),\\n    /*  */ radial-gradient(120% 120% at 70% 72%, rgba(0, 0, 0, 0.18) 0%, rgba(0, 0, 0, 0) 38%),\\n    /*  */ conic-gradient(from 210deg at 50% 50%, var(--surface), var(--surface-2), var(--surface)); /*  */\\n  box-shadow:\\n    inset 0 2px 6px var(--inner-shadow),\\n    /*  */ 0 2px 4px rgba(0, 0, 0, 0.08),\\n    /*  */ 0 10px 22px var(--shadow); /*  */\\n  transition:\\n    transform 0.28s ease,\\n    box-shadow 0.28s ease,\\n    filter 0.28s ease; /*  */\\n  will-change: transform, box-shadow, filter; /*  */\\n  animation: ball-bob 3.2s ease-in-out infinite; /*  */\\n}\\n\\n/*  */\\n.floating-ball::after {\\n  content: ''; /*  */\\n  position: absolute; /*  */\\n  inset: -8px; /*  8px */\\n  border-radius: 50%; /*  */\\n  background: conic-gradient(\\n    from 0deg,\\n    var(--ring),\\n    transparent 30%,\\n    transparent 70%,\\n    var(--ring)\\n  ); /*  */\\n  filter: blur(6px); /*  */\\n  opacity: 0.55; /*  */\\n  pointer-events: none; /*  */\\n  mask: radial-gradient(farthest-side, transparent calc(100% - 12px), #000 0); /*  */\\n  animation: ring-spin 12s linear infinite; /*  */\\n}\\n\\n/*  */\\n.floating-ball::before {\\n  content: ''; /*  */\\n  position: absolute; /*  */\\n  inset: 2px; /*  */\\n  border-radius: 50%; /*  */\\n  background:\\n    radial-gradient(120% 80% at 26% 24%, var(--specular) 0%, rgba(255, 255, 255, 0.2) 26%, rgba(255, 255, 255, 0) 46%),\\n    /*  */ linear-gradient(160deg, var(--glass) 0%, rgba(255, 255, 255, 0) 50%); /*  */\\n  mix-blend-mode: screen; /*  */\\n  pointer-events: none; /*  */\\n  transition:\\n    opacity 0.28s ease,\\n    transform 0.28s ease; /*  */\\n}\\n\\n/* + */\\n.floating-ball:hover {\\n  transform: translateY(-2px) scale(1.04); /*  */\\n  box-shadow:\\n    inset 0 2px 8px rgba(0, 0, 0, 0.22),\\n    /*  */ 0 4px 10px rgba(0, 0, 0, 0.12),\\n    /*  */ 0 16px 36px rgba(0, 123, 255, 0.45); /*  */\\n  filter: saturate(1.08); /*  */\\n}\\n\\n/*  */\\n.floating-ball:hover::before {\\n  opacity: 0.95; /*  */\\n  animation: shimmer 1.2s ease-out; /*  */\\n}\\n\\n/*  */\\n.floating-ball:active {\\n  transform: translateY(0) scale(0.98); /*  */\\n  box-shadow:\\n    inset 0 2px 10px rgba(0, 0, 0, 0.28),\\n    0 2px 6px rgba(0, 0, 0, 0.12),\\n    0 10px 22px rgba(0, 123, 255, 0.35); /*  */\\n}\\n\\n/*  */\\n.floating-ball:focus-visible {\\n  outline: 2px solid var(--ball-focus-outline, rgba(102, 200, 255, 0.85)); /*  */\\n  outline-offset: 2px; /*  2px */\\n}\\n\\n/*  */\\n@media (prefers-reduced-motion: reduce) {\\n  .floating-ball {\\n    animation: none;\\n  } /*  */\\n  .floating-ball::after {\\n    animation: none;\\n  } /*  */\\n}\\n\\n/*  */\\n@keyframes ball-bob {\\n  0%,\\n  100% {\\n    transform: translateY(0);\\n  } /* / */\\n  50% {\\n    transform: translateY(-2px);\\n  } /*  2px */\\n}\\n\\n/*  */\\n@keyframes ring-spin {\\n  0% {\\n    transform: rotate(0deg);\\n  } /* 0  */\\n  100% {\\n    transform: rotate(360deg);\\n  } /*  */\\n}\\n\\n/*  */\\n@keyframes shimmer {\\n  0% {\\n    transform: translateY(-1px) scale(0.98);\\n    opacity: 0.6;\\n  } /*  */\\n  50% {\\n    transform: translateY(-2px) scale(1.02);\\n    opacity: 1;\\n  } /*  */\\n  100% {\\n    transform: translateY(-1px) scale(0.99);\\n    opacity: 0.85;\\n  } /*  */\\n}\\n\\n/* ======= ERA  ======= */\\n.floating-ball {\\n  --logo-scale: 0.38;\\n} /*  */\\n\\n.era-logo {\\n  font-weight: 800; /*  */\\n  font-size: calc(var(--size) * var(--logo-scale)); /*  */\\n  letter-spacing: 0.02em; /*  */\\n  line-height: 1; /*  */\\n  transform: translateY(-1px); /*  */\\n  white-space: nowrap; /*  */\\n  user-select: none;\\n  pointer-events: none; /*  */\\n  z-index: 1; /*  ::after  */\\n\\n  /*  +  */\\n  background: var(\\n    --ball-logo-bg,\\n    linear-gradient(\\n      180deg,\\n      rgba(255, 255, 255, 0.96) 0%,\\n      rgba(255, 255, 255, 0.55) 45%,\\n      rgba(220, 240, 255, 0.4) 65%,\\n      rgba(120, 195, 255, 0.55) 100%\\n    ),\\n    linear-gradient(180deg, rgba(0, 0, 0, 0.38), rgba(0, 0, 0, 0) 60%)\\n  );\\n  -webkit-background-clip: text;\\n  background-clip: text; /*  */\\n  color: transparent; /*  */\\n  text-shadow:\\n    0 1px 0 var(--ball-logo-shadow-top, rgba(255, 255, 255, 0.75)),\\n    /*  */ 0 2px 4px var(--ball-logo-shadow-near, rgba(0, 0, 0, 0.25)),\\n    /*  */ 0 8px 18px var(--ball-logo-shadow-far, rgba(0, 123, 255, 0.35)); /*  */\\n  filter: var(--ball-logo-filter-glow, drop-shadow(0 0 2px rgba(102, 200, 255, 0.25))); /*  */\\n  animation: era-sheen 4s ease-in-out infinite; /*  */\\n  transition:\\n    text-shadow 0.3s ease,\\n    filter 0.3s ease;\\n}\\n\\n.floating-ball:hover .era-logo {\\n  text-shadow:\\n    0 1px 0 var(--ball-logo-shadow-top, rgba(255, 255, 255, 0.85)),\\n    0 3px 8px var(--ball-logo-shadow-near, rgba(0, 0, 0, 0.28)),\\n    0 10px 26px var(--ball-logo-shadow-far, rgba(0, 123, 255, 0.55)); /*  */\\n  filter: var(--ball-logo-filter-glow, drop-shadow(0 0 3px rgba(102, 200, 255, 0.38))); /*  */\\n}\\n\\n/*  */\\n@keyframes era-sheen {\\n  0%,\\n  100% {\\n    background-position:\\n      0% 0%,\\n      0% 0%;\\n  }\\n  50% {\\n    background-position:\\n      0% 40%,\\n      0% 0%;\\n  }\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.acc[data-v-f723f6d6]{border:1px solid var(--border-soft);border-radius:12px;background:var(--accordion-bg);overflow:hidden;transition:background 0.3s ease,border-color 0.3s ease}.acc-head[data-v-f723f6d6]{width:100%;display:flex;align-items:center;gap:10px;background:var(--mk-pill-null-bg);border-bottom:1px solid var(--border-soft);padding:10px 12px;cursor:pointer;font-weight:800;color:var(--text-subtitle);transition:background 0.3s ease,border-color 0.3s ease,color 0.3s ease}.caret[data-v-f723f6d6]{transition:transform 0.18s ease}.caret.open[data-v-f723f6d6]{transform:rotate(90deg)}.title[data-v-f723f6d6]{font-size:13px}.spacer[data-v-f723f6d6]{flex:1}.hint[data-v-f723f6d6]{font-size:12px;color:var(--text-normal);transition:color 0.3s ease}.acc-body[data-v-f723f6d6]{max-height:0;overflow:hidden;transition:max-height 0.28s ease-in-out;background:var(--accordion-body-bg)}.acc-body.open[data-v-f723f6d6]{max-height:600px;overflow-y:auto}.inner[data-v-f723f6d6]{padding:10px 12px}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/ERA/ui/template/EraAccordion.vue\"],\"names\":[],\"mappings\":\"AAkCA,sBACE,mCAAoC,CACpC,kBAAmB,CACnB,8BAA+B,CAC/B,eAAgB,CAChB,sDAGF,CAEA,2BACE,UAAW,CACX,YAAa,CACb,kBAAmB,CACnB,QAAS,CACT,iCAAkC,CAClC,0CAA2C,CAC3C,iBAAkB,CAClB,cAAe,CACf,eAAgB,CAChB,0BAA2B,CAC3B,sEAIF,CACA,wBACE,+BACF,CACA,6BACE,uBACF,CACA,wBACE,cACF,CACA,yBACE,MACF,CACA,uBACE,cAAe,CACf,wBAAyB,CACzB,0BACF,CAEA,2BACE,YAAa,CACb,eAAgB,CAChB,uCAAwC,CACxC,mCACF,CACA,gCACE,gBAAiB,CACjB,eACF,CAEA,wBACE,iBACF\",\"sourcesContent\":[\"<template>\\n  <section class=\\\"acc\\\">\\n    <!--  -->\\n    <button class=\\\"acc-head\\\" :aria-expanded=\\\"open ? 'true' : 'false'\\\" @click=\\\"open = !open\\\">\\n      <span class=\\\"caret\\\" :class=\\\"{ open }\\\"></span>\\n      <!--  -->\\n      <span class=\\\"title\\\">{{ title }}</span>\\n      <!--  -->\\n      <span class=\\\"spacer\\\"></span>\\n      <!--  -->\\n      <span class=\\\"hint\\\">{{ open ? '' : '' }}</span>\\n      <!--  -->\\n    </button>\\n\\n    <!--  CSS Grid -->\\n    <div class=\\\"acc-body\\\" :class=\\\"{ open }\\\">\\n      <div class=\\\"inner\\\">\\n        <slot />\\n      </div>\\n    </div>\\n  </section>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { ref } from 'vue';\\n\\nconst props = withDefaults(defineProps<{ title: string; defaultOpen?: boolean }>(), {\\n  defaultOpen: false,\\n});\\n\\nconst open = ref<boolean>(props.defaultOpen);\\n</script>\\n\\n<style scoped>\\n.acc {\\n  border: 1px solid var(--border-soft);\\n  border-radius: 12px;\\n  background: var(--accordion-bg);\\n  overflow: hidden;\\n  transition:\\n    background 0.3s ease,\\n    border-color 0.3s ease;\\n}\\n\\n.acc-head {\\n  width: 100%;\\n  display: flex;\\n  align-items: center;\\n  gap: 10px;\\n  background: var(--mk-pill-null-bg);\\n  border-bottom: 1px solid var(--border-soft);\\n  padding: 10px 12px;\\n  cursor: pointer;\\n  font-weight: 800;\\n  color: var(--text-subtitle);\\n  transition:\\n    background 0.3s ease,\\n    border-color 0.3s ease,\\n    color 0.3s ease;\\n}\\n.caret {\\n  transition: transform 0.18s ease;\\n}\\n.caret.open {\\n  transform: rotate(90deg);\\n}\\n.title {\\n  font-size: 13px;\\n}\\n.spacer {\\n  flex: 1;\\n}\\n.hint {\\n  font-size: 12px;\\n  color: var(--text-normal);\\n  transition: color 0.3s ease;\\n}\\n\\n.acc-body {\\n  max-height: 0;\\n  overflow: hidden;\\n  transition: max-height 0.28s ease-in-out;\\n  background: var(--accordion-body-bg);\\n}\\n.acc-body.open {\\n  max-height: 600px; /*  */\\n  overflow-y: auto; /*  */\\n}\\n\\n.inner {\\n  padding: 10px 12px;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `:root{--bg-blur-heavy:linear-gradient(180deg,rgba(255,255,255,0.75),rgba(255,255,255,0.65));--bg-blur-light:linear-gradient(90deg,rgba(255,255,255,0.65),rgba(255,255,255,0.45));--bg-solid:#fff;--bg-soft:rgba(255,255,255,0.6);--bg-empty:rgba(255,255,255,0.5);--paper:#fff;--border-strong:rgba(255,255,255,0.6);--border-normal:rgba(0,0,0,0.08);--border-soft:rgba(0,0,0,0.06);--border-dashed:rgba(0,0,0,0.08);--line:rgba(0,0,0,0.08);--text-title:#1f2937;--text-subtitle:#374151;--text-normal:#6b7280;--muted:#6b7280;--shadow-panel:0 10px 40px rgba(0,0,0,0.18);--shadow-button:0 2px 8px rgba(0,0,0,0.08);--shadow-button-hover:0 6px 16px rgba(0,0,0,0.12);--shadow-inset:inset 0 1px 0 rgba(255,255,255,0.6);--chip-bg:linear-gradient(180deg,#fafafa,#f4f4f4);--chip-text:#6b7280;--chip-border:rgba(0,0,0,0.06);--chip-ok-bg:linear-gradient(180deg,#ecfdf5,#d1fae5);--chip-ok-text:#065f46;--chip-ok-border:#a7f3d0;--mk-pill-bg:linear-gradient(180deg,#eef2ff,#e0e7ff);--mk-pill-text:#4338ca;--mk-pill-border:#c7d2fe;--mk-pill-null-bg:linear-gradient(180deg,#f9fafb,#f3f4f6);--mk-pill-null-text:#6b7280;--mk-pill-null-border:#e5e7eb;--settings-bg-glass:linear-gradient(180deg,rgba(255,255,255,0.76),rgba(255,255,255,0.62));--settings-shadow-card:0 10px 40px rgba(0,0,0,0.16);--settings-shadow-inset:inset 0 1px 0 #fff;--settings-shadow-minibtn:0 2px 6px rgba(0,0,0,0.06);--settings-shadow-minibtn-hover:0 5px 12px rgba(0,0,0,0.1);--settings-bg-var-row:linear-gradient(180deg,#ffffff,#f8fafc);--settings-text-input:#111827;--settings-text-primary-btn:#0f172a;--settings-border-input:#e5e7eb;--settings-bg-btn-primary:linear-gradient(180deg,#e0f2fe,#bfdbfe);--settings-border-btn-primary:#93c5fd;--settings-bg-btn-subtle:linear-gradient(180deg,#f9fafb,#f3f4f6);--settings-bg-type-chip:#eef2ff;--settings-border-type-chip:#c7d2fe;--settings-bg-switch-track:#e5e7eb;--settings-bg-switch-handle:#fff;--settings-shadow-switch-handle:0 1px 3px rgba(0,0,0,0.2);--settings-bg-switch-checked:#93c5fd;--settings-text-hint-ok:#065f46;--settings-text-hint-bad:#b91c1c;--actions-bg-glass:linear-gradient(180deg,rgba(255,255,255,0.76),rgba(255,255,255,0.62));--actions-shadow-card:0 10px 40px rgba(0,0,0,0.16);--actions-btn-bg:linear-gradient(180deg,#fafafa,#f3f4f6);--actions-btn-text:#374151;--actions-btn-primary-bg:linear-gradient(180deg,#e0f2fe,#bfdbfe);--actions-btn-primary-border:#93c5fd;--actions-btn-primary-text:#0f172a;--actions-btn-subtle-bg:linear-gradient(180deg,#f9fafb,#f3f4f6);--actions-btn-subtle-border:#e5e7eb;--actions-btn-danger-bg:linear-gradient(180deg,#fee2e2,#fecaca);--actions-btn-danger-border:#fca5a5;--actions-btn-danger-text:#991b1b;--actions-shadow-btn-active:0 2px 8px rgba(0,0,0,0.1);--actions-outline-focus:#60a5fa;--text-soft:#6b7280;--accordion-bg:linear-gradient(180deg,#fff,#fafafa);--accordion-body-bg:rgba(255,255,255,0.82);--meta-bg:linear-gradient(180deg,#ffffff,#f9fafb);--meta-shadow:0 6px 18px rgba(0,0,0,0.06);--meta-key-bg:#f3f4f6;--meta-glow-bg:linear-gradient(90deg,#60a5fa,#a78bfa,#34d399,#f472b6);--json-hover-bg:rgba(59,130,246,0.06);--json-tree-line:rgba(107,114,128,0.25);--json-key-color:#1f2937;--json-val-string:#047857;--json-val-number:#7c3aed;--json-val-boolean:#0369a1;--json-val-null:#9ca3af;--json-caret-shadow:0 1px 0 #fff,0 2px 6px rgba(0,0,0,0.06);--json-caret-open-shadow:0 3px 10px rgba(0,0,0,0.12);--tab-active-shadow:0 0 0 3px rgba(147,197,253,0.35);--tab-content-bg:rgba(255,255,255,0.86);--ball-hue:210;--ball-sat:15%;--ball-lum:95%;--ball-shadow-color:rgba(0,0,0,0.15);--ball-glow-color:rgba(180,200,220,0.55);--ball-inner-shadow-color:rgba(0,0,0,0.1);--ball-specular-color:rgba(255,255,255,0.9);--ball-glass-color:rgba(255,255,255,0.1);--ball-focus-outline:rgba(180,200,220,0.85);--ball-logo-bg:linear-gradient(180deg,#8899aa 0%,#556677 100%);--ball-logo-shadow-top:rgba(0,0,0,0.25);--ball-logo-shadow-near:rgba(255,255,255,0.6);--ball-logo-shadow-far:rgba(0,0,0,0.1);--ball-logo-filter-glow:drop-shadow(0 0 1px rgba(0,0,0,0.2));--snapshot-accent:#5b8cff;--snapshot-accent-soft:rgba(91,140,255,0.25);--snapshot-bg:#fff;--snapshot-stroke:rgba(0,0,0,0.12);--snapshot-text:#2a2a2a;--snapshot-muted:#777;--snapshot-bg-gradient:linear-gradient(180deg,rgba(255,255,255,0.6),rgba(255,255,255,0.3));--snapshot-inner-shadow:inset 0 1px 0 rgba(255,255,255,0.45);--snapshot-outer-shadow:0 1px 2px rgba(0,0,0,0.04);--snapshot-focus-inner-shadow:inset 0 1px 0 rgba(255,255,255,0.5);--snapshot-btn-bg:#f5f5f0;--snapshot-btn-text:#333;--snapshot-btn-hover-bg:#e9e9e0;--snapshot-btn-active-bg:#dcdccf}.dark-theme{--bg-blur-heavy:linear-gradient(180deg,rgba(35,37,43,0.8),rgba(28,29,33,0.75));--bg-blur-light:linear-gradient(90deg,rgba(50,52,59,0.7),rgba(42,43,48,0.6));--bg-solid:#2d2f37;--bg-soft:rgba(60,63,73,0.5);--bg-empty:rgba(60,63,73,0.25);--paper:#2d2f37;--border-strong:rgba(255,255,255,0.12);--border-normal:rgba(255,255,255,0.1);--border-soft:rgba(255,255,255,0.08);--border-dashed:rgba(255,255,255,0.1);--line:rgba(255,255,255,0.1);--text-title:#f9fafb;--text-subtitle:#d1d5db;--text-normal:#9ca3af;--muted:#9ca3af;--shadow-panel:0 10px 40px rgba(0,0,0,0.3);--shadow-button:0 2px 8px rgba(0,0,0,0.25);--shadow-button-hover:0 6px 16px rgba(0,0,0,0.35);--shadow-inset:inset 0 1px 0 rgba(255,255,255,0.1);--chip-bg:linear-gradient(180deg,#4b5563,#374151);--chip-text:#e5e7eb;--chip-border:rgba(255,255,255,0.1);--chip-ok-bg:linear-gradient(180deg,#064e3b,#052e22);--chip-ok-text:#a7f3d0;--chip-ok-border:#047857;--mk-pill-bg:linear-gradient(180deg,#3730a3,#312e81);--mk-pill-text:#c7d2fe;--mk-pill-border:#4f46e5;--mk-pill-null-bg:linear-gradient(180deg,#4b5563,#374151);--mk-pill-null-text:#9ca3af;--mk-pill-null-border:#6b7280;--settings-bg-glass:linear-gradient(180deg,rgba(40,42,48,0.8),rgba(33,34,38,0.75));--settings-shadow-card:0 10px 40px rgba(0,0,0,0.3);--settings-shadow-inset:inset 0 1px 0 rgba(255,255,255,0.05);--settings-shadow-minibtn:0 2px 6px rgba(0,0,0,0.2);--settings-shadow-minibtn-hover:0 5px 12px rgba(0,0,0,0.3);--settings-bg-var-row:#2d2f37;--settings-text-input:#f9fafb;--settings-text-primary-btn:#e0f2fe;--settings-border-input:#4b5563;--settings-bg-btn-primary:linear-gradient(180deg,#3b82f6,#2563eb);--settings-border-btn-primary:#1d4ed8;--settings-bg-btn-subtle:linear-gradient(180deg,#4b5563,#374151);--settings-bg-type-chip:#3730a3;--settings-border-type-chip:#4f46e5;--settings-bg-switch-track:#4b5563;--settings-bg-switch-handle:#d1d5db;--settings-shadow-switch-handle:0 1px 3px rgba(0,0,0,0.4);--settings-bg-switch-checked:#3b82f6;--settings-text-hint-ok:#34d399;--settings-text-hint-bad:#ef4444;--actions-bg-glass:linear-gradient(180deg,rgba(40,42,48,0.8),rgba(33,34,38,0.75));--actions-shadow-card:0 10px 40px rgba(0,0,0,0.3);--actions-btn-bg:linear-gradient(180deg,#4b5563,#374151);--actions-btn-text:#d1d5db;--actions-btn-primary-bg:linear-gradient(180deg,#3b82f6,#2563eb);--actions-btn-primary-border:#1d4ed8;--actions-btn-primary-text:#f1f5f9;--actions-btn-subtle-bg:linear-gradient(180deg,#4b5563,#374151);--actions-btn-subtle-border:#6b7280;--actions-shadow-btn-active:0 2px 8px rgba(0,0,0,0.2);--actions-outline-focus:#2563eb;--accordion-bg:var(--bg-solid);--accordion-body-bg:rgba(45,47,55,0.5);--meta-bg:linear-gradient(180deg,#2d2f37,#24262b);--meta-shadow:0 6px 18px rgba(0,0,0,0.2);--meta-key-bg:#374151;--meta-glow-bg:linear-gradient(90deg,#3b82f6,#8b5cf6,#10b981,#ec4899);--json-hover-bg:rgba(147,197,253,0.1);--json-tree-line:rgba(107,114,128,0.4);--json-key-color:#e5e7eb;--json-val-string:#6ee7b7;--json-val-number:#c4b5fd;--json-val-boolean:#7dd3fc;--json-val-null:#9ca3af;--json-caret-shadow:0 1px 0 rgba(255,255,255,0.05),0 2px 6px rgba(0,0,0,0.2);--json-caret-open-shadow:0 3px 10px rgba(0,0,0,0.3);--tab-active-shadow:0 0 0 3px rgba(59,130,246,0.4);--tab-content-bg:rgba(45,47,55,0.5);--ball-hue:220;--ball-sat:10%;--ball-lum:25%;--ball-shadow-color:rgba(0,0,0,0.3);--ball-glow-color:rgba(150,180,210,0.4);--ball-inner-shadow-color:rgba(0,0,0,0.4);--ball-specular-color:rgba(255,255,255,0.15);--ball-glass-color:rgba(255,255,255,0.05);--ball-focus-outline:rgba(150,180,210,0.7);--ball-logo-bg:linear-gradient(180deg,rgba(255,255,255,0.9) 0%,rgba(233,213,255,0.6) 45%,rgba(220,200,255,0.5) 65%,rgba(191,128,255,0.65) 100%),linear-gradient(180deg,rgba(0,0,0,0.45),rgba(0,0,0,0) 60%);--ball-logo-shadow-top:rgba(255,255,255,0.6);--ball-logo-shadow-near:rgba(0,0,0,0.3);--ball-logo-shadow-far:rgba(138,43,226,0.45);--ball-logo-filter-glow:drop-shadow(0 0 3px rgba(191,128,255,0.35));--snapshot-accent:#3b82f6;--snapshot-accent-soft:rgba(59,130,246,0.3);--snapshot-bg:#2d2f37;--snapshot-stroke:rgba(255,255,255,0.1);--snapshot-text:#f9fafb;--snapshot-muted:#9ca3af;--snapshot-bg-gradient:linear-gradient(180deg,rgba(255,255,255,0.08),transparent);--snapshot-inner-shadow:inset 0 1px 0 rgba(255,255,255,0.05);--snapshot-outer-shadow:0 1px 2px rgba(0,0,0,0.2);--snapshot-focus-inner-shadow:inset 0 1px 0 rgba(255,255,255,0.1);--snapshot-btn-bg:#4a4a4a;--snapshot-btn-text:#eee;--snapshot-btn-hover-bg:#5a5a5a;--snapshot-btn-active-bg:#3a3a3a}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/ERA/ui/components/ThemeManager.vue\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\"<script setup lang=\\\"ts\\\">\\nimport { defineExpose, ref } from 'vue';\\n\\nconst isDarkMode = ref(false);\\n\\n//  defineExpose \\ndefineExpose({\\n  isDarkMode,\\n});\\n</script>\\n\\n<style>\\n/*\\n   style  'scoped' \\n   ThemeManager \\n  \\n*/\\n\\n/*  */\\n:root {\\n  /* === App.vue & General Styles === */\\n  --bg-blur-heavy: linear-gradient(180deg, rgba(255, 255, 255, 0.75), rgba(255, 255, 255, 0.65));\\n  --bg-blur-light: linear-gradient(90deg, rgba(255, 255, 255, 0.65), rgba(255, 255, 255, 0.45));\\n  --bg-solid: #fff;\\n  --bg-soft: rgba(255, 255, 255, 0.6);\\n  --bg-empty: rgba(255, 255, 255, 0.5);\\n  --paper: #fff; /* Component/Card background color */\\n  --border-strong: rgba(255, 255, 255, 0.6);\\n  --border-normal: rgba(0, 0, 0, 0.08);\\n  --border-soft: rgba(0, 0, 0, 0.06);\\n  --border-dashed: rgba(0, 0, 0, 0.08);\\n  --line: rgba(0, 0, 0, 0.08); /* Generic line color */\\n  --text-title: #1f2937;\\n  --text-subtitle: #374151;\\n  --text-normal: #6b7280;\\n  --muted: #6b7280; /* Muted text color */\\n  --shadow-panel: 0 10px 40px rgba(0, 0, 0, 0.18);\\n  --shadow-button: 0 2px 8px rgba(0, 0, 0, 0.08);\\n  --shadow-button-hover: 0 6px 16px rgba(0, 0, 0, 0.12);\\n  --shadow-inset: inset 0 1px 0 rgba(255, 255, 255, 0.6);\\n  --chip-bg: linear-gradient(180deg, #fafafa, #f4f4f4);\\n  --chip-text: #6b7280;\\n  --chip-border: rgba(0, 0, 0, 0.06);\\n  --chip-ok-bg: linear-gradient(180deg, #ecfdf5, #d1fae5);\\n  --chip-ok-text: #065f46;\\n  --chip-ok-border: #a7f3d0;\\n  --mk-pill-bg: linear-gradient(180deg, #eef2ff, #e0e7ff);\\n  --mk-pill-text: #4338ca;\\n  --mk-pill-border: #c7d2fe;\\n  --mk-pill-null-bg: linear-gradient(180deg, #f9fafb, #f3f4f6);\\n  --mk-pill-null-text: #6b7280;\\n  --mk-pill-null-border: #e5e7eb;\\n\\n  /* === EraSettingsPanel.vue Styles === */\\n  --settings-bg-glass: linear-gradient(180deg, rgba(255, 255, 255, 0.76), rgba(255, 255, 255, 0.62));\\n  --settings-shadow-card: 0 10px 40px rgba(0, 0, 0, 0.16);\\n  --settings-shadow-inset: inset 0 1px 0 #fff;\\n  --settings-shadow-minibtn: 0 2px 6px rgba(0, 0, 0, 0.06);\\n  --settings-shadow-minibtn-hover: 0 5px 12px rgba(0, 0, 0, 0.1);\\n  --settings-bg-var-row: linear-gradient(180deg, #ffffff, #f8fafc);\\n  --settings-text-input: #111827;\\n  --settings-text-primary-btn: #0f172a;\\n  --settings-border-input: #e5e7eb;\\n  --settings-bg-btn-primary: linear-gradient(180deg, #e0f2fe, #bfdbfe);\\n  --settings-border-btn-primary: #93c5fd;\\n  --settings-bg-btn-subtle: linear-gradient(180deg, #f9fafb, #f3f4f6);\\n  --settings-bg-type-chip: #eef2ff;\\n  --settings-border-type-chip: #c7d2fe;\\n  --settings-bg-switch-track: #e5e7eb;\\n  --settings-bg-switch-handle: #fff;\\n  --settings-shadow-switch-handle: 0 1px 3px rgba(0, 0, 0, 0.2);\\n  --settings-bg-switch-checked: #93c5fd;\\n  --settings-text-hint-ok: #065f46;\\n  --settings-text-hint-bad: #b91c1c;\\n\\n  /* === ActionButtons.vue & AboutEra.vue Styles === */\\n  --actions-bg-glass: linear-gradient(180deg, rgba(255, 255, 255, 0.76), rgba(255, 255, 255, 0.62));\\n  --actions-shadow-card: 0 10px 40px rgba(0, 0, 0, 0.16);\\n  --actions-btn-bg: linear-gradient(180deg, #fafafa, #f3f4f6);\\n  --actions-btn-text: #374151;\\n  --actions-btn-primary-bg: linear-gradient(180deg, #e0f2fe, #bfdbfe);\\n  --actions-btn-primary-border: #93c5fd;\\n  --actions-btn-primary-text: #0f172a;\\n  --actions-btn-subtle-bg: linear-gradient(180deg, #f9fafb, #f3f4f6);\\n  --actions-btn-subtle-border: #e5e7eb;\\n  --actions-btn-danger-bg: linear-gradient(180deg, #fee2e2, #fecaca);\\n  --actions-btn-danger-border: #fca5a5;\\n  --actions-btn-danger-text: #991b1b;\\n  --actions-shadow-btn-active: 0 2px 8px rgba(0, 0, 0, 0.1);\\n  --actions-outline-focus: #60a5fa;\\n  --text-soft: #6b7280;\\n\\n  /* === EraAccordion.vue Styles === */\\n  --accordion-bg: linear-gradient(180deg, #fff, #fafafa);\\n  --accordion-body-bg: rgba(255, 255, 255, 0.82);\\n\\n  /* === MetaHeader.vue Styles === */\\n  --meta-bg: linear-gradient(180deg, #ffffff, #f9fafb);\\n  --meta-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);\\n  --meta-key-bg: #f3f4f6;\\n  --meta-glow-bg: linear-gradient(90deg, #60a5fa, #a78bfa, #34d399, #f472b6);\\n\\n  /* === JsonNode.vue Styles === */\\n  --json-hover-bg: rgba(59, 130, 246, 0.06);\\n  --json-tree-line: rgba(107, 114, 128, 0.25);\\n  --json-key-color: #1f2937;\\n  --json-val-string: #047857;\\n  --json-val-number: #7c3aed;\\n  --json-val-boolean: #0369a1;\\n  --json-val-null: #9ca3af;\\n  --json-caret-shadow: 0 1px 0 #fff, 0 2px 6px rgba(0, 0, 0, 0.06);\\n  --json-caret-open-shadow: 0 3px 10px rgba(0, 0, 0, 0.12);\\n\\n  /* === TabSwitch.vue Styles === */\\n  --tab-active-shadow: 0 0 0 3px rgba(147, 197, 253, 0.35);\\n  --tab-content-bg: rgba(255, 255, 255, 0.86);\\n\\n  /* === FloatingBall.vue Styles === */\\n  --ball-hue: 210;\\n  --ball-sat: 15%;\\n  --ball-lum: 95%;\\n  --ball-shadow-color: rgba(0, 0, 0, 0.15);\\n  --ball-glow-color: rgba(180, 200, 220, 0.55);\\n  --ball-inner-shadow-color: rgba(0, 0, 0, 0.1);\\n  --ball-specular-color: rgba(255, 255, 255, 0.9);\\n  --ball-glass-color: rgba(255, 255, 255, 0.1);\\n  --ball-focus-outline: rgba(180, 200, 220, 0.85);\\n  --ball-logo-bg: linear-gradient(180deg, #8899aa 0%, #556677 100%);\\n  --ball-logo-shadow-top: rgba(0, 0, 0, 0.25);\\n  --ball-logo-shadow-near: rgba(255, 255, 255, 0.6);\\n  --ball-logo-shadow-far: rgba(0, 0, 0, 0.1);\\n  --ball-logo-filter-glow: drop-shadow(0 0 1px rgba(0, 0, 0, 0.2));\\n\\n  /* === SnapshotManager.vue Styles === */\\n  --snapshot-accent: #5b8cff;\\n  --snapshot-accent-soft: rgba(91, 140, 255, 0.25);\\n  --snapshot-bg: #fff;\\n  --snapshot-stroke: rgba(0, 0, 0, 0.12);\\n  --snapshot-text: #2a2a2a;\\n  --snapshot-muted: #777;\\n  --snapshot-bg-gradient: linear-gradient(180deg, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.3));\\n  --snapshot-inner-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.45);\\n  --snapshot-outer-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);\\n  --snapshot-focus-inner-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.5);\\n\\n  /* Custom Button Colors */\\n  --snapshot-btn-bg: #f5f5f0;\\n  --snapshot-btn-text: #333;\\n  --snapshot-btn-hover-bg: #e9e9e0;\\n  --snapshot-btn-active-bg: #dcdccf;\\n}\\n\\n/*  */\\n.dark-theme {\\n  /* === App.vue & General Styles === */\\n  --bg-blur-heavy: linear-gradient(180deg, rgba(35, 37, 43, 0.8), rgba(28, 29, 33, 0.75));\\n  --bg-blur-light: linear-gradient(90deg, rgba(50, 52, 59, 0.7), rgba(42, 43, 48, 0.6));\\n  --bg-solid: #2d2f37;\\n  --bg-soft: rgba(60, 63, 73, 0.5);\\n  --bg-empty: rgba(60, 63, 73, 0.25);\\n  --paper: #2d2f37; /* Component/Card background color */\\n  --border-strong: rgba(255, 255, 255, 0.12);\\n  --border-normal: rgba(255, 255, 255, 0.1);\\n  --border-soft: rgba(255, 255, 255, 0.08);\\n  --border-dashed: rgba(255, 255, 255, 0.1);\\n  --line: rgba(255, 255, 255, 0.1); /* Generic line color */\\n  --text-title: #f9fafb;\\n  --text-subtitle: #d1d5db;\\n  --text-normal: #9ca3af;\\n  --muted: #9ca3af; /* Muted text color */\\n  --shadow-panel: 0 10px 40px rgba(0, 0, 0, 0.3);\\n  --shadow-button: 0 2px 8px rgba(0, 0, 0, 0.25);\\n  --shadow-button-hover: 0 6px 16px rgba(0, 0, 0, 0.35);\\n  --shadow-inset: inset 0 1px 0 rgba(255, 255, 255, 0.1);\\n  --chip-bg: linear-gradient(180deg, #4b5563, #374151);\\n  --chip-text: #e5e7eb;\\n  --chip-border: rgba(255, 255, 255, 0.1);\\n  --chip-ok-bg: linear-gradient(180deg, #064e3b, #052e22);\\n  --chip-ok-text: #a7f3d0;\\n  --chip-ok-border: #047857;\\n  --mk-pill-bg: linear-gradient(180deg, #3730a3, #312e81);\\n  --mk-pill-text: #c7d2fe;\\n  --mk-pill-border: #4f46e5;\\n  --mk-pill-null-bg: linear-gradient(180deg, #4b5563, #374151);\\n  --mk-pill-null-text: #9ca3af;\\n  --mk-pill-null-border: #6b7280;\\n\\n  /* === EraSettingsPanel.vue Styles === */\\n  --settings-bg-glass: linear-gradient(180deg, rgba(40, 42, 48, 0.8), rgba(33, 34, 38, 0.75));\\n  --settings-shadow-card: 0 10px 40px rgba(0, 0, 0, 0.3);\\n  --settings-shadow-inset: inset 0 1px 0 rgba(255, 255, 255, 0.05);\\n  --settings-shadow-minibtn: 0 2px 6px rgba(0, 0, 0, 0.2);\\n  --settings-shadow-minibtn-hover: 0 5px 12px rgba(0, 0, 0, 0.3);\\n  --settings-bg-var-row: #2d2f37;\\n  --settings-text-input: #f9fafb;\\n  --settings-text-primary-btn: #e0f2fe;\\n  --settings-border-input: #4b5563;\\n  --settings-bg-btn-primary: linear-gradient(180deg, #3b82f6, #2563eb);\\n  --settings-border-btn-primary: #1d4ed8;\\n  --settings-bg-btn-subtle: linear-gradient(180deg, #4b5563, #374151);\\n  --settings-bg-type-chip: #3730a3;\\n  --settings-border-type-chip: #4f46e5;\\n  --settings-bg-switch-track: #4b5563;\\n  --settings-bg-switch-handle: #d1d5db;\\n  --settings-shadow-switch-handle: 0 1px 3px rgba(0, 0, 0, 0.4);\\n  --settings-bg-switch-checked: #3b82f6;\\n  --settings-text-hint-ok: #34d399;\\n  --settings-text-hint-bad: #ef4444;\\n\\n  /* === ActionButtons.vue & AboutEra.vue Styles === */\\n  --actions-bg-glass: linear-gradient(180deg, rgba(40, 42, 48, 0.8), rgba(33, 34, 38, 0.75));\\n  --actions-shadow-card: 0 10px 40px rgba(0, 0, 0, 0.3);\\n  --actions-btn-bg: linear-gradient(180deg, #4b5563, #374151);\\n  --actions-btn-text: #d1d5db;\\n  --actions-btn-primary-bg: linear-gradient(180deg, #3b82f6, #2563eb);\\n  --actions-btn-primary-border: #1d4ed8;\\n  --actions-btn-primary-text: #f1f5f9;\\n  --actions-btn-subtle-bg: linear-gradient(180deg, #4b5563, #374151);\\n  --actions-btn-subtle-border: #6b7280;\\n  --actions-shadow-btn-active: 0 2px 8px rgba(0, 0, 0, 0.2);\\n  --actions-outline-focus: #2563eb;\\n\\n  /* === EraAccordion.vue Styles === */\\n  --accordion-bg: var(--bg-solid);\\n  --accordion-body-bg: rgba(45, 47, 55, 0.5);\\n\\n  /* === MetaHeader.vue Styles === */\\n  --meta-bg: linear-gradient(180deg, #2d2f37, #24262b);\\n  --meta-shadow: 0 6px 18px rgba(0, 0, 0, 0.2);\\n  --meta-key-bg: #374151;\\n  --meta-glow-bg: linear-gradient(90deg, #3b82f6, #8b5cf6, #10b981, #ec4899);\\n\\n  /* === JsonNode.vue Styles === */\\n  --json-hover-bg: rgba(147, 197, 253, 0.1);\\n  --json-tree-line: rgba(107, 114, 128, 0.4);\\n  --json-key-color: #e5e7eb;\\n  --json-val-string: #6ee7b7;\\n  --json-val-number: #c4b5fd;\\n  --json-val-boolean: #7dd3fc;\\n  --json-val-null: #9ca3af;\\n  --json-caret-shadow: 0 1px 0 rgba(255, 255, 255, 0.05), 0 2px 6px rgba(0, 0, 0, 0.2);\\n  --json-caret-open-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);\\n\\n  /* === TabSwitch.vue Styles === */\\n  --tab-active-shadow: 0 0 0 3px rgba(59, 130, 246, 0.4);\\n  --tab-content-bg: rgba(45, 47, 55, 0.5);\\n\\n  /* === FloatingBall.vue Styles === */\\n  --ball-hue: 220;\\n  --ball-sat: 10%;\\n  --ball-lum: 25%;\\n  --ball-shadow-color: rgba(0, 0, 0, 0.3);\\n  --ball-glow-color: rgba(150, 180, 210, 0.4);\\n  --ball-inner-shadow-color: rgba(0, 0, 0, 0.4);\\n  --ball-specular-color: rgba(255, 255, 255, 0.15);\\n  --ball-glass-color: rgba(255, 255, 255, 0.05);\\n  --ball-focus-outline: rgba(150, 180, 210, 0.7);\\n  --ball-logo-bg:\\n    linear-gradient(\\n      180deg,\\n      rgba(255, 255, 255, 0.9) 0%,\\n      rgba(233, 213, 255, 0.6) 45%,\\n      rgba(220, 200, 255, 0.5) 65%,\\n      rgba(191, 128, 255, 0.65) 100%\\n    ),\\n    linear-gradient(180deg, rgba(0, 0, 0, 0.45), rgba(0, 0, 0, 0) 60%);\\n  --ball-logo-shadow-top: rgba(255, 255, 255, 0.6);\\n  --ball-logo-shadow-near: rgba(0, 0, 0, 0.3);\\n  --ball-logo-shadow-far: rgba(138, 43, 226, 0.45);\\n  --ball-logo-filter-glow: drop-shadow(0 0 3px rgba(191, 128, 255, 0.35));\\n\\n  /* === SnapshotManager.vue Styles === */\\n  --snapshot-accent: #3b82f6;\\n  --snapshot-accent-soft: rgba(59, 130, 246, 0.3);\\n  --snapshot-bg: #2d2f37;\\n  --snapshot-stroke: rgba(255, 255, 255, 0.1);\\n  --snapshot-text: #f9fafb;\\n  --snapshot-muted: #9ca3af;\\n  --snapshot-bg-gradient: linear-gradient(180deg, rgba(255, 255, 255, 0.08), transparent);\\n  --snapshot-inner-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05);\\n  --snapshot-outer-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\\n  --snapshot-focus-inner-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1);\\n\\n  /* Custom Button Colors */\\n  --snapshot-btn-bg: #4a4a4a;\\n  --snapshot-btn-text: #eee;\\n  --snapshot-btn-hover-bg: #5a5a5a;\\n  --snapshot-btn-active-bg: #3a3a3a;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ActionButtons.vue?vue&type=style&index=0&id=6bdeb56f&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"b6a6b5b6\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ActionButtons.vue?vue&type=style&index=0&id=6bdeb56f&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./ActionButtons.vue?vue&type=style&index=0&id=6bdeb56f&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./JsonNode.vue?vue&type=style&index=0&id=6c2ac46e&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"34c6832d\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./JsonNode.vue?vue&type=style&index=0&id=6c2ac46e&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./JsonNode.vue?vue&type=style&index=0&id=6c2ac46e&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.era-panel[data-v-1e3782f8]{flex:2 1 600px;min-width:320px;height:min(680px,86vh);display:flex;flex-direction:column;background:var(--bg-blur-heavy);border:1px solid var(--border-strong);backdrop-filter:blur(10px);border-radius:16px;box-shadow:var(--shadow-panel),var(--shadow-inset);overflow:hidden;font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;transition:background 0.3s ease,border-color 0.3s ease}.panel-top[data-v-1e3782f8]{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--border-soft);background:var(--bg-blur-light);transition:background 0.3s ease,border-color 0.3s ease}.panel-title[data-v-1e3782f8]{font-size:16px;font-weight:800;letter-spacing:0.5px;color:var(--text-title);transition:color 0.3s ease}.btn-close[data-v-1e3782f8]{width:32px;height:32px;line-height:30px;text-align:center;border-radius:8px;border:1px solid var(--border-normal);background:var(--bg-solid);cursor:pointer;font-size:18px;color:var(--text-normal);box-shadow:var(--shadow-button);transition:background 0.3s ease,border-color 0.3s ease,color 0.3s ease,transform 0.2s ease,box-shadow 0.2s ease}.btn-close[data-v-1e3782f8]:hover{transform:translateY(-1px);box-shadow:var(--shadow-button-hover)}.panel-body[data-v-1e3782f8]{padding:0;overflow:hidden;flex-grow:1;display:flex;flex-direction:column}.panel-content-wrapper[data-v-1e3782f8]{padding:14px 14px 16px;overflow-y:auto;flex-grow:1}.panel-content-wrapper[data-v-1e3782f8]>*+*{margin-top:12px}.empty[data-v-1e3782f8]{height:100%;display:grid;place-items:center;color:var(--text-normal);font-size:14px;border:1px dashed var(--border-dashed);border-radius:12px;background:var(--bg-empty);transition:background 0.3s ease,border-color 0.3s ease,color 0.3s ease}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/ERA/ui/components/EraPanel.vue\"],\"names\":[],\"mappings\":\"AAoDA,4BACE,cAAe,CACf,eAAgB,CAChB,sBAAwB,CACxB,YAAa,CACb,qBAAsB,CACtB,+BAAgC,CAChC,qCAAsC,CACtC,0BAA2B,CAC3B,kBAAmB,CACnB,kDAAoD,CACpD,eAAgB,CAChB,gEAAqE,CACrE,sDAGF,CAEA,4BACE,YAAa,CACb,kBAAmB,CACnB,6BAA8B,CAC9B,iBAAkB,CAClB,0CAA2C,CAC3C,+BAAgC,CAChC,sDAGF,CACA,8BACE,cAAe,CACf,eAAgB,CAChB,oBAAqB,CACrB,uBAAwB,CACxB,0BACF,CACA,4BACE,UAAW,CACX,WAAY,CACZ,gBAAiB,CACjB,iBAAkB,CAClB,iBAAkB,CAClB,qCAAsC,CACtC,0BAA2B,CAC3B,cAAe,CACf,cAAe,CACf,wBAAyB,CACzB,+BAAgC,CAChC,+GAMF,CACA,kCACE,0BAA2B,CAC3B,qCACF,CAEA,6BACE,SAAU,CACV,eAAgB,CAChB,WAAY,CACZ,YAAa,CACb,qBACF,CAEA,wCACE,sBAAuB,CACvB,eAAgB,CAChB,WACF,CAGA,4CACE,eACF,CAEA,wBACE,WAAY,CACZ,YAAa,CACb,kBAAmB,CACnB,wBAAyB,CACzB,cAAe,CACf,sCAAuC,CACvC,kBAAmB,CACnB,0BAA2B,CAC3B,sEAIF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"era-panel\\\">\\n    <header class=\\\"panel-top\\\">\\n      <h3 class=\\\"panel-title\\\">ERA </h3>\\n      <button class=\\\"btn-close\\\" aria-label=\\\"\\\" @click=\\\"requestSwitchView('FloatingBall')\\\"></button>\\n    </header>\\n    <div class=\\\"panel-body\\\">\\n      <div class=\\\"panel-content-wrapper\\\">\\n        <template v-if=\\\"data\\\">\\n          <EraAccordion title=\\\"\\\" :default-open=\\\"false\\\">\\n            <MetaHeader :mk=\\\"data.mk\\\" :message-id=\\\"data.message_id\\\" :is-user=\\\"data.is_user\\\" />\\n          </EraAccordion>\\n\\n          <OperationDetails :data=\\\"data\\\" />\\n\\n          <SnapshotManager :latest-data=\\\"data\\\" />\\n        </template>\\n        <template v-else>\\n          <div class=\\\"empty\\\"> era:writeDone </div>\\n        </template>\\n      </div>\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport type { WriteDonePayload } from '../../utils/constants';\\nimport { Logger } from '../../utils/log';\\nimport EraAccordion from '../template/EraAccordion.vue';\\nimport MetaHeader from './EraPanelContent/MetaHeader.vue';\\nimport OperationDetails from './EraPanelContent/OperationDetails.vue';\\nimport SnapshotManager from './SnapshotManager.vue';\\n\\ntype TabItem = { key: 'pure' | 'full'; label: string };\\n\\nconst logger = new Logger();\\n\\ndefineProps<{\\n  data: WriteDonePayload | null;\\n}>();\\n\\nconst requestSwitchView = (viewName: 'FloatingBall' | 'ExpandedView') => {\\n  logger.debug('requestSwitchView', `: ${viewName}`);\\n  if ((window as any).eraUiSwitchView) {\\n    (window as any).eraUiSwitchView(viewName);\\n  } else {\\n    logger.warn('requestSwitchView', ' eraUiSwitchView ');\\n  }\\n};\\n</script>\\n\\n<style scoped>\\n.era-panel {\\n  flex: 2 1 600px;\\n  min-width: 320px;\\n  height: min(680px, 86vh);\\n  display: flex;\\n  flex-direction: column;\\n  background: var(--bg-blur-heavy);\\n  border: 1px solid var(--border-strong);\\n  backdrop-filter: blur(10px);\\n  border-radius: 16px;\\n  box-shadow: var(--shadow-panel), var(--shadow-inset);\\n  overflow: hidden;\\n  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;\\n  transition:\\n    background 0.3s ease,\\n    border-color 0.3s ease;\\n}\\n\\n.panel-top {\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  padding: 14px 16px;\\n  border-bottom: 1px solid var(--border-soft);\\n  background: var(--bg-blur-light);\\n  transition:\\n    background 0.3s ease,\\n    border-color 0.3s ease;\\n}\\n.panel-title {\\n  font-size: 16px;\\n  font-weight: 800;\\n  letter-spacing: 0.5px;\\n  color: var(--text-title);\\n  transition: color 0.3s ease;\\n}\\n.btn-close {\\n  width: 32px;\\n  height: 32px;\\n  line-height: 30px;\\n  text-align: center;\\n  border-radius: 8px;\\n  border: 1px solid var(--border-normal);\\n  background: var(--bg-solid);\\n  cursor: pointer;\\n  font-size: 18px;\\n  color: var(--text-normal);\\n  box-shadow: var(--shadow-button);\\n  transition:\\n    background 0.3s ease,\\n    border-color 0.3s ease,\\n    color 0.3s ease,\\n    transform 0.2s ease,\\n    box-shadow 0.2s ease;\\n}\\n.btn-close:hover {\\n  transform: translateY(-1px);\\n  box-shadow: var(--shadow-button-hover);\\n}\\n\\n.panel-body {\\n  padding: 0;\\n  overflow: hidden;\\n  flex-grow: 1;\\n  display: flex; /*  wrapper  */\\n  flex-direction: column;\\n}\\n\\n.panel-content-wrapper {\\n  padding: 14px 14px 16px;\\n  overflow-y: auto; /*  */\\n  flex-grow: 1;\\n}\\n\\n/*  margin  gap */\\n.panel-content-wrapper > * + * {\\n  margin-top: 12px;\\n}\\n\\n.empty {\\n  height: 100%; /*  */\\n  display: grid;\\n  place-items: center;\\n  color: var(--text-normal);\\n  font-size: 14px;\\n  border: 1px dashed var(--border-dashed);\\n  border-radius: 12px;\\n  background: var(--bg-empty);\\n  transition:\\n    background 0.3s ease,\\n    border-color 0.3s ease,\\n    color 0.3s ease;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `:where(#era-snapshot-ui){--snapshot-text:var(--text-normal);--snapshot-muted:var(--muted);--snapshot-bg:var(--paper);--snapshot-bg-gradient:linear-gradient(to bottom,color-mix(in oklab,var(--paper),transparent 92%),transparent);--snapshot-stroke:var(--line);--snapshot-accent:var(--primary,var(--accent,#4f46e5));--on-accent:var(--on-accent,#ffffff);--snapshot-accent-soft:color-mix(in oklab,var(--snapshot-accent),transparent 82%);--snapshot-outer-shadow:0 6px 18px color-mix(in oklab,#000,transparent 90%);--snapshot-inner-shadow:inset 0 1px 0 color-mix(in oklab,#fff,transparent 92%);--snapshot-focus-inner-shadow:inset 0 1px 0 color-mix(in oklab,#fff,transparent 90%);--snapshot-danger:var(--danger,#e11d48);--snapshot-danger-soft:color-mix(in oklab,var(--snapshot-danger),transparent 88%)}:where(html[data-theme='dark'] #era-snapshot-ui),:where(body[data-theme='dark'] #era-snapshot-ui){--snapshot-outer-shadow:0 8px 22px color-mix(in oklab,#000,transparent 70%);--snapshot-inner-shadow:inset 0 1px 0 color-mix(in oklab,#fff,transparent 94%)}@media (prefers-color-scheme:dark){#era-snapshot-ui{--snapshot-outer-shadow:0 8px 22px color-mix(in oklab,#000,transparent 72%);--snapshot-inner-shadow:inset 0 1px 0 color-mix(in oklab,#fff,transparent 94%)}}#era-snapshot-ui.snapshot-manager{display:flex;flex-direction:column;gap:16px}#era-snapshot-ui .selector-wrapper{display:block;margin-bottom:4px}#era-snapshot-ui .select-field{position:relative;display:block}#era-snapshot-ui .selector-label{font-size:14px;font-weight:700;color:var(--text-title);flex-shrink:0;letter-spacing:0.2px}#era-snapshot-ui .select-container{position:relative;flex-grow:1;isolation:isolate}#era-snapshot-ui .select-container::after{content:'';position:absolute;top:50%;right:12px;transform:translateY(-50%) rotate(0deg);font-size:14px;color:var(--snapshot-muted);pointer-events:none;transition:transform 0.18s ease,color 0.2s ease;z-index:1}#era-snapshot-ui .select-container:focus-within::after{transform:translateY(-50%) rotate(180deg);color:var(--snapshot-accent)}#era-snapshot-ui .mk-selector{width:100%;padding:10px 36px 10px 12px;border-radius:10px;border:1px solid var(--snapshot-stroke);background:var(--snapshot-bg-gradient),var(--snapshot-bg);backdrop-filter:saturate(1.05) blur(2px);color:var(--snapshot-text);font-family:inherit;font-size:14px;line-height:1.2;cursor:pointer;-webkit-appearance:none;appearance:none;transition:border-color 0.18s ease,box-shadow 0.18s ease,background 0.25s ease;box-shadow:var(--snapshot-inner-shadow),var(--snapshot-outer-shadow)}#era-snapshot-ui .mk-selector:hover{border-color:color-mix(in oklab,var(--snapshot-stroke),var(--snapshot-accent) 22%)}#era-snapshot-ui .mk-selector:focus{outline:none;border-color:var(--snapshot-accent);box-shadow:0 0 0 3px var(--snapshot-accent-soft),var(--snapshot-focus-inner-shadow)}#era-snapshot-ui .mk-selector:focus-visible{outline:none}#era-snapshot-ui .mk-selector option{color:var(--snapshot-text);background:var(--snapshot-bg)}#era-snapshot-ui .loading-indicator,#era-snapshot-ui .error-message{padding:18px;text-align:center;border-radius:12px;border:1px dashed var(--line,rgba(0,0,0,0.12));background:var(--bg-empty,rgba(0,0,0,0.03));color:var(--text-normal,#2a2a2a)}#era-snapshot-ui .error-message{color:var(--snapshot-danger);background:var(--snapshot-danger-soft);border-color:color-mix(in oklab,var(--snapshot-danger),transparent 55%)}@media (prefers-reduced-motion:reduce){#era-snapshot-ui .select-container::after,#era-snapshot-ui .mk-selector{transition:none}}#era-snapshot-ui .field-label{position:absolute;top:0;left:12px;transform:translateY(-50%);padding:0 6px;font-size:12px;line-height:1;color:var(--snapshot-muted);background:var(--snapshot-bg);border-radius:6px;pointer-events:none;z-index:1}#era-snapshot-ui .mk-selector{padding-top:22px}#era-snapshot-ui .select-field:focus-within .field-label{color:var(--snapshot-accent)}#era-snapshot-ui .select-container::after{content:'';position:absolute;top:50%;right:12px;transform:translateY(-50%);font-size:14px;color:var(--snapshot-muted);pointer-events:none;transition:transform 0.18s ease,color 0.2s ease}#era-snapshot-ui .select-container:focus-within::after{transform:translateY(-50%) rotate(180deg);color:var(--snapshot-accent)}#era-snapshot-ui .id-query-container{display:flex;border-radius:10px;transition:box-shadow 0.18s ease}#era-snapshot-ui .id-query-container:focus-within{box-shadow:0 0 0 3px var(--snapshot-accent-soft)}#era-snapshot-ui .id-input{flex-grow:1;border-top-right-radius:0;border-bottom-right-radius:0;border-right-width:0}#era-snapshot-ui .id-input:focus{box-shadow:none;border-color:var(--snapshot-stroke)}#era-snapshot-ui .query-button{flex-shrink:0;padding:22px 16px 10px;border-radius:10px;border-top-left-radius:0;border-bottom-left-radius:0;background-color:var(--snapshot-btn-bg);color:var(--snapshot-btn-text);border:1px solid var(--snapshot-stroke);font-family:inherit;font-size:14px;line-height:1.2;font-weight:700;cursor:pointer;transition:background-color 0.2s ease,border-color 0.2s ease,transform 0.1s ease}#era-snapshot-ui .query-button:hover{background-color:var(--snapshot-btn-hover-bg);border-color:color-mix(in oklab,var(--snapshot-stroke),var(--snapshot-text) 10%)}#era-snapshot-ui .query-button:active{transform:scale(0.97);background-color:var(--snapshot-btn-active-bg)}#era-snapshot-ui .query-button:focus-visible{outline:none;z-index:1;box-shadow:0 0 0 3px var(--snapshot-accent-soft)}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/ERA/ui/components/SnapshotManager.vue\"],\"names\":[],\"mappings\":\"AAmNA,yBAEE,kCAAmC,CACnC,6BAA8B,CAC9B,0BAA2B,CAC3B,8GAAmH,CAGnH,6BAA8B,CAG9B,sDAAyD,CACzD,oCAAsC,CAGtC,iFAAoF,CACpF,2EAA8E,CAC9E,8EAAiF,CACjF,oFAAuF,CAGvF,uCAAyC,CACzC,iFACF,CAGA,kGAEE,2EAA8E,CAC9E,8EACF,CAGA,mCACE,iBACE,2EAA8E,CAC9E,8EACF,CACF,CAQA,kCAEE,YAAa,CACb,qBAAsB,CACtB,QACF,CAGA,mCAEE,aAAc,CACd,iBACF,CACA,+BAEE,iBAAkB,CAClB,aACF,CAGA,iCAEE,cAAe,CACf,eAAgB,CAChB,uBAAwB,CACxB,aAAc,CACd,oBACF,CAGA,mCAEE,iBAAkB,CAClB,WAAY,CACZ,iBACF,CAGA,0CAEE,WAAY,CACZ,iBAAkB,CAClB,OAAQ,CACR,UAAW,CACX,uCAAwC,CACxC,cAAe,CACf,2BAA4B,CAC5B,mBAAoB,CACpB,+CAEiB,CACjB,SACF,CAGA,uDAEE,yCAA0C,CAC1C,4BACF,CAGA,8BAEE,UAAW,CACX,2BAA4B,CAC5B,kBAAmB,CACnB,uCAAwC,CACxC,yDAA2D,CAC3D,wCAAyC,CACzC,0BAA2B,CAC3B,mBAAoB,CACpB,cAAe,CACf,eAAgB,CAChB,cAAe,CACf,uBAAwB,CAExB,eAAgB,CAChB,8EAGuB,CACvB,oEACF,CAGA,oCAEE,kFACF,CAGA,oCAEE,YAAa,CACb,mCAAoC,CACpC,mFAGF,CACA,4CAEE,YACF,CAGA,qCAEE,0BAA2B,CAC3B,6BACF,CAGA,oEAGE,YAAa,CACb,iBAAkB,CAClB,kBAAmB,CACnB,8CAAmD,CACnD,2CAAgD,CAChD,gCACF,CAGA,gCAEE,4BAA6B,CAC7B,sCAAuC,CACvC,uEACF,CAGA,uCACE,wEAEE,eACF,CACF,CAGA,8BAEE,iBAAkB,CAClB,KAAM,CACN,SAAU,CACV,0BAA2B,CAC3B,aAAc,CACd,cAAe,CACf,aAAc,CACd,2BAA4B,CAC5B,6BAA8B,CAC9B,iBAAkB,CAClB,mBAAoB,CACpB,SACF,CAGA,8BACE,gBACF,CAGA,yDACE,4BACF,CAGA,0CACE,WAAY,CACZ,iBAAkB,CAClB,OAAQ,CACR,UAAW,CACX,0BAA2B,CAC3B,cAAe,CACf,2BAA4B,CAC5B,mBAAoB,CACpB,+CAGF,CAGA,uDACE,yCAA0C,CAC1C,4BACF,CAOA,qCACE,YAAa,CACb,kBAAmB,CACnB,gCACF,CACA,kDACE,gDACF,CAGA,2BACE,WAAY,CACZ,yBAA0B,CAC1B,4BAA6B,CAC7B,oBACF,CAEA,iCACE,eAAgB,CAChB,mCACF,CAGA,+BACE,aAAc,CACd,sBAAuB,CACvB,kBAAmB,CACnB,wBAAyB,CACzB,2BAA4B,CAC5B,uCAAwC,CACxC,8BAA+B,CAC/B,uCAAwC,CACxC,mBAAoB,CACpB,cAAe,CACf,eAAgB,CAChB,eAAgB,CAChB,cAAe,CACf,gFAIF,CACA,qCACE,6CAA8C,CAC9C,gFACF,CACA,sCACE,qBAAsB,CACtB,8CACF,CACA,6CACE,YAAa,CACb,SAAU,CACV,gDACF\",\"sourcesContent\":[\"<template>\\n  <!--   id -->\\n  <div id=\\\"era-snapshot-ui\\\" class=\\\"snapshot-manager\\\">\\n    <div class=\\\"selector-wrapper\\\">\\n      <!--  -->\\n      <div class=\\\"select-field\\\" role=\\\"group\\\" aria-labelledby=\\\"mk-label\\\">\\n        <!--  -->\\n        <label id=\\\"mk-label\\\" for=\\\"mk-selector\\\" class=\\\"field-label\\\">(MK)</label>\\n        <!--  -->\\n        <div class=\\\"select-container\\\">\\n          <!--  -->\\n          <select id=\\\"mk-selector\\\" v-model=\\\"selectedMk\\\" class=\\\"mk-selector\\\" @change=\\\"handleSelectionChange\\\">\\n            <option :value=\\\"null\\\" disabled>--  --</option>\\n            <option v-for=\\\"(mk, index) in reversedSelectedMks\\\" :key=\\\"mk || `null-${index}`\\\" :value=\\\"mk\\\">\\n              {{ formatMkForDisplay(mk, index) }}\\n              <!--  -->\\n            </option>\\n          </select>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div class=\\\"selector-wrapper\\\">\\n      <div class=\\\"select-field\\\" role=\\\"group\\\" aria-labelledby=\\\"mid-label\\\">\\n        <label id=\\\"mid-label\\\" for=\\\"mid-input\\\" class=\\\"field-label\\\">ID</label>\\n        <div class=\\\"id-query-container\\\">\\n          <input\\n            id=\\\"mid-input\\\"\\n            v-model.number=\\\"messageIdInput\\\"\\n            type=\\\"number\\\"\\n            class=\\\"mk-selector id-input\\\"\\n            placeholder=\\\" ID...\\\"\\n            @keyup.enter=\\\"queryByMId\\\"\\n          />\\n          <button class=\\\"query-button\\\" @click=\\\"queryByMId\\\"></button>\\n        </div>\\n      </div>\\n    </div>\\n\\n    <div v-if=\\\"loading\\\" class=\\\"loading-indicator\\\">...</div>\\n    <div v-if=\\\"error\\\" class=\\\"error-message\\\">{{ error }}</div>\\n\\n    <template v-if=\\\"displayData\\\">\\n      <EraAccordion title=\\\"\\\" :default-open=\\\"true\\\">\\n        <MetaHeader :mk=\\\"displayData.mk\\\" :message-id=\\\"displayData.message_id\\\" :is-user=\\\"isUserMessageComputed\\\" />\\n      </EraAccordion>\\n\\n      <TabSwitch v-model:active=\\\"activeTab\\\" :tabs=\\\"tabs\\\">\\n        <template #pure>\\n          <PrettyJsonViewer :value=\\\"displayData.statWithoutMeta\\\" :default-collapsed=\\\"true\\\" :max-depth=\\\"Infinity\\\" />\\n        </template>\\n        <template #full>\\n          <PrettyJsonViewer :value=\\\"displayData.stat\\\" :default-collapsed=\\\"true\\\" :max-depth=\\\"Infinity\\\" />\\n        </template>\\n      </TabSwitch>\\n    </template>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { computed, onMounted, onUnmounted, ref, watch } from 'vue';\\nimport type { QueryResultItem, QueryResultPayload, WriteDonePayload } from '../../utils/constants';\\nimport { Logger } from '../../utils/log';\\nimport { isUserMessage } from '../../utils/message';\\nimport EraAccordion from '../template/EraAccordion.vue';\\nimport PrettyJsonViewer from '../template/PrettyJsonViewer.vue';\\nimport TabSwitch from '../template/TabSwitch.vue';\\nimport MetaHeader from './EraPanelContent/MetaHeader.vue';\\n\\ntype DisplayData = Pick<WriteDonePayload, 'mk' | 'message_id' | 'stat' | 'statWithoutMeta'>;\\ntype TabItem = { key: 'pure' | 'full'; label: string };\\n\\nconst props = defineProps<{\\n  latestData: WriteDonePayload | null;\\n}>();\\n\\nconst logger = new Logger();\\n\\nconst latestMkFromProps = computed(() => props.latestData?.mk ?? null);\\nconst selectedMk = ref<string | null>(latestMkFromProps.value);\\nconst messageIdInput = ref<number | null>(null);\\nconst historicalSnapshot = ref<QueryResultItem | null>(null);\\nconst loading = ref(false);\\nconst error = ref<string | null>(null);\\n\\nconst tabs: TabItem[] = [\\n  { key: 'pure', label: '' },\\n  { key: 'full', label: '' },\\n];\\nconst activeTab = ref<'pure' | 'full'>('pure');\\n\\nconst reversedSelectedMks = computed(() => {\\n  return props.latestData?.selectedMks?.slice().reverse() ?? [];\\n});\\n\\nconst displayData = computed<DisplayData | null>(() => {\\n  // \\n  if (historicalSnapshot.value) {\\n    return historicalSnapshot.value;\\n  }\\n  // MK\\n  if (selectedMk.value === latestMkFromProps.value) {\\n    return props.latestData;\\n  }\\n  // \\n  return null;\\n});\\n\\nconst isUserMessageComputed = computed(() => {\\n  if (!displayData.value) return false;\\n  // (QueryResultItem) is_user \\n  if ('is_user' in displayData.value) {\\n    return (displayData.value as QueryResultItem).is_user;\\n  }\\n  // (WriteDonePayload)\\n  const message = getChatMessages(displayData.value.message_id, { include_swipes: false })[0];\\n  return message ? isUserMessage(message) : false;\\n});\\n\\nwatch(\\n  () => latestMkFromProps.value,\\n  newLatestMk => {\\n    // UI\\n    selectedMk.value = newLatestMk;\\n    historicalSnapshot.value = null;\\n    messageIdInput.value = null;\\n    error.value = null;\\n    loading.value = false;\\n  },\\n  { immediate: true },\\n);\\n\\nconst handleSelectionChange = () => {\\n  const mk = selectedMk.value;\\n  // \\n  messageIdInput.value = null;\\n  historicalSnapshot.value = null;\\n  error.value = null;\\n\\n  if (!mk || mk === latestMkFromProps.value) {\\n    loading.value = false;\\n    return;\\n  }\\n\\n  loading.value = true;\\n  logger.debug('SnapshotManager', `(MK Select) , mk: ${mk}`);\\n  eventEmit('era:getSnapshotAtMk', { mk });\\n};\\n\\nconst queryByMId = () => {\\n  if (messageIdInput.value === null || messageIdInput.value < 0) {\\n    error.value = ' ID';\\n    return;\\n  }\\n  // \\n  selectedMk.value = null; // \\n  historicalSnapshot.value = null;\\n  error.value = null;\\n  loading.value = true;\\n\\n  logger.debug('SnapshotManager', `(ID Query) , message_id: ${messageIdInput.value}`);\\n  eventEmit('era:getSnapshotAtMId', { message_id: messageIdInput.value });\\n};\\n\\nconst handleQueryResult = (detail: QueryResultPayload) => {\\n  loading.value = false;\\n\\n  const handleResult = (result: QueryResultItem | null, errorMsg: string) => {\\n    if (result) {\\n      historicalSnapshot.value = result;\\n      // \\n      selectedMk.value = result.mk;\\n      error.value = null;\\n    } else {\\n      historicalSnapshot.value = null;\\n      error.value = errorMsg;\\n    }\\n  };\\n\\n  if (detail.queryType === 'getSnapshotAtMk' && detail.request.mk === selectedMk.value) {\\n    handleResult(detail.result as QueryResultItem | null, ` MK \\\"${selectedMk.value}\\\" `);\\n  } else if (detail.queryType === 'getSnapshotAtMId' && detail.request.message_id === messageIdInput.value) {\\n    handleResult(detail.result as QueryResultItem | null, ` ID \\\"${messageIdInput.value}\\\" `);\\n  }\\n};\\n\\nconst formatMkForDisplay = (mk: string | null, index: number): string => {\\n  const total = reversedSelectedMks.value.length;\\n  const msgId = total - 1 - index;\\n  const isLatest = mk === latestMkFromProps.value;\\n\\n  if (!mk) return ` ${msgId} (MK)`;\\n\\n  const shortMk = mk.substring(mk.length - 6);\\n  const label = ` ${msgId} (...${shortMk})`;\\n\\n  return isLatest ? `${label} ()` : label;\\n};\\n\\nonMounted(() => {\\n  eventOn('era:queryResult', handleQueryResult);\\n});\\n\\nonUnmounted(() => {\\n  eventRemoveListener('era:queryResult', handleQueryResult);\\n});\\n</script>\\n\\n<!--   scoped #era-snapshot-ui  -->\\n<style>\\n/*  /  */\\n:where(#era-snapshot-ui) {\\n  /*  */\\n  --snapshot-text: var(--text-normal); /*  */\\n  --snapshot-muted: var(--muted); /*  */\\n  --snapshot-bg: var(--paper); /* / */\\n  --snapshot-bg-gradient: linear-gradient(to bottom, color-mix(in oklab, var(--paper), transparent 92%), transparent);\\n\\n  /*  */\\n  --snapshot-stroke: var(--line); /*  */\\n\\n  /* / --primary --accent */\\n  --snapshot-accent: var(--primary, var(--accent, #4f46e5));\\n  --on-accent: var(--on-accent, #ffffff); /*  */\\n\\n  /* / */\\n  --snapshot-accent-soft: color-mix(in oklab, var(--snapshot-accent), transparent 82%);\\n  --snapshot-outer-shadow: 0 6px 18px color-mix(in oklab, #000, transparent 90%);\\n  --snapshot-inner-shadow: inset 0 1px 0 color-mix(in oklab, #fff, transparent 92%);\\n  --snapshot-focus-inner-shadow: inset 0 1px 0 color-mix(in oklab, #fff, transparent 90%);\\n\\n  /* / danger */\\n  --snapshot-danger: var(--danger, #e11d48);\\n  --snapshot-danger-soft: color-mix(in oklab, var(--snapshot-danger), transparent 88%);\\n}\\n\\n/*  ThemeToggle  data-theme  */\\n:where(html[data-theme='dark'] #era-snapshot-ui),\\n:where(body[data-theme='dark'] #era-snapshot-ui) {\\n  --snapshot-outer-shadow: 0 8px 22px color-mix(in oklab, #000, transparent 70%);\\n  --snapshot-inner-shadow: inset 0 1px 0 color-mix(in oklab, #fff, transparent 94%);\\n}\\n\\n/*  */\\n@media (prefers-color-scheme: dark) {\\n  #era-snapshot-ui {\\n    --snapshot-outer-shadow: 0 8px 22px color-mix(in oklab, #000, transparent 72%);\\n    --snapshot-inner-shadow: inset 0 1px 0 color-mix(in oklab, #fff, transparent 94%);\\n  }\\n}\\n\\n/* =========================\\n   ERA Snapshot \\n    #era-snapshot-ui \\n   ========================= */\\n\\n/* ----  ---- */\\n#era-snapshot-ui.snapshot-manager {\\n  /*  */\\n  display: flex; /*  */\\n  flex-direction: column; /*  */\\n  gap: 16px; /*  */\\n}\\n\\n/* ----  ---- */\\n#era-snapshot-ui .selector-wrapper {\\n  /*  */\\n  display: block; /*  */\\n  margin-bottom: 4px; /*  */\\n}\\n#era-snapshot-ui .select-field {\\n  /*  */\\n  position: relative; /*  */\\n  display: block; /*  */\\n}\\n\\n/* ----  ---- */\\n#era-snapshot-ui .selector-label {\\n  /* :  */\\n  font-size: 14px; /*  */\\n  font-weight: 700; /*  */\\n  color: var(--text-title); /*  */\\n  flex-shrink: 0; /*  */\\n  letter-spacing: 0.2px; /*  */\\n}\\n\\n/* ----  ---- */\\n#era-snapshot-ui .select-container {\\n  /*  */\\n  position: relative; /*  */\\n  flex-grow: 1; /*  */\\n  isolation: isolate; /*  */\\n}\\n\\n/* ----  ---- */\\n#era-snapshot-ui .select-container::after {\\n  /*  */\\n  content: ''; /*  */\\n  position: absolute; /*  */\\n  top: 50%; /*  */\\n  right: 12px; /*  */\\n  transform: translateY(-50%) rotate(0deg); /*  */\\n  font-size: 14px; /*  */\\n  color: var(--snapshot-muted); /*  */\\n  pointer-events: none; /*  */\\n  transition:\\n    transform 0.18s ease,\\n    color 0.2s ease; /*  */\\n  z-index: 1; /*  */\\n}\\n\\n/* ----  ---- */\\n#era-snapshot-ui .select-container:focus-within::after {\\n  /*  */\\n  transform: translateY(-50%) rotate(180deg); /*  */\\n  color: var(--snapshot-accent); /*  */\\n}\\n\\n/* ----  +  +  ---- */\\n#era-snapshot-ui .mk-selector {\\n  /*  */\\n  width: 100%; /*  */\\n  padding: 10px 36px 10px 12px; /*  */\\n  border-radius: 10px; /*  */\\n  border: 1px solid var(--snapshot-stroke); /*  */\\n  background: var(--snapshot-bg-gradient), var(--snapshot-bg); /*  */\\n  backdrop-filter: saturate(1.05) blur(2px); /*  */\\n  color: var(--snapshot-text); /*  */\\n  font-family: inherit; /*  */\\n  font-size: 14px; /*  */\\n  line-height: 1.2; /*  */\\n  cursor: pointer; /*  */\\n  -webkit-appearance: none; /* Safari/Chrome */\\n  -moz-appearance: none; /* Firefox */\\n  appearance: none; /*  */\\n  transition:\\n    border-color 0.18s ease,\\n    box-shadow 0.18s ease,\\n    background 0.25s ease; /*  */\\n  box-shadow: var(--snapshot-inner-shadow), var(--snapshot-outer-shadow); /*  */\\n}\\n\\n/* ----  ---- */\\n#era-snapshot-ui .mk-selector:hover {\\n  /*  */\\n  border-color: color-mix(in oklab, var(--snapshot-stroke), var(--snapshot-accent) 22%); /*  */\\n}\\n\\n/* ---- / +  ---- */\\n#era-snapshot-ui .mk-selector:focus {\\n  /*  */\\n  outline: none; /*  */\\n  border-color: var(--snapshot-accent); /*  */\\n  box-shadow:\\n    0 0 0 3px var(--snapshot-accent-soft),\\n    /*  */ var(--snapshot-focus-inner-shadow); /*  */\\n}\\n#era-snapshot-ui .mk-selector:focus-visible {\\n  /*  */\\n  outline: none; /*  */\\n}\\n\\n/* ----  ---- */\\n#era-snapshot-ui .mk-selector option {\\n  /*  */\\n  color: var(--snapshot-text); /*  */\\n  background: var(--snapshot-bg); /*  */\\n}\\n\\n/* ----  /  ---- */\\n#era-snapshot-ui .loading-indicator,\\n#era-snapshot-ui .error-message {\\n  /*  */\\n  padding: 18px; /*  */\\n  text-align: center; /*  */\\n  border-radius: 12px; /*  */\\n  border: 1px dashed var(--line, rgba(0, 0, 0, 0.12)); /*  */\\n  background: var(--bg-empty, rgba(0, 0, 0, 0.03)); /*  */\\n  color: var(--text-normal, #2a2a2a); /*  */\\n}\\n\\n/* ----  ---- */\\n#era-snapshot-ui .error-message {\\n  /*  snapshot danger  */\\n  color: var(--snapshot-danger);\\n  background: var(--snapshot-danger-soft);\\n  border-color: color-mix(in oklab, var(--snapshot-danger), transparent 55%);\\n}\\n\\n/* ----  ---- */\\n@media (prefers-reduced-motion: reduce) {\\n  #era-snapshot-ui .select-container::after,\\n  #era-snapshot-ui .mk-selector {\\n    transition: none; /*  */\\n  }\\n}\\n\\n/*    */\\n#era-snapshot-ui .field-label {\\n  /*  */\\n  position: absolute; /*  */\\n  top: 0; /*  */\\n  left: 12px; /*  */\\n  transform: translateY(-50%); /*  */\\n  padding: 0 6px; /*  */\\n  font-size: 12px; /*  */\\n  line-height: 1; /*  */\\n  color: var(--snapshot-muted); /*  */\\n  background: var(--snapshot-bg); /*  */\\n  border-radius: 6px; /*  */\\n  pointer-events: none; /*  select */\\n  z-index: 1; /*  */\\n}\\n\\n/*    */\\n#era-snapshot-ui .mk-selector {\\n  padding-top: 22px;\\n}\\n\\n/*    */\\n#era-snapshot-ui .select-field:focus-within .field-label {\\n  color: var(--snapshot-accent);\\n}\\n\\n/*    */\\n#era-snapshot-ui .select-container::after {\\n  content: '';\\n  position: absolute;\\n  top: 50%;\\n  right: 12px;\\n  transform: translateY(-50%);\\n  font-size: 14px;\\n  color: var(--snapshot-muted);\\n  pointer-events: none;\\n  transition:\\n    transform 0.18s ease,\\n    color 0.2s ease;\\n}\\n\\n/*    */\\n#era-snapshot-ui .select-container:focus-within::after {\\n  transform: translateY(-50%) rotate(180deg);\\n  color: var(--snapshot-accent);\\n}\\n\\n/* =========================\\n   ID \\n   ========================= */\\n\\n/*  */\\n#era-snapshot-ui .id-query-container {\\n  display: flex;\\n  border-radius: 10px;\\n  transition: box-shadow 0.18s ease;\\n}\\n#era-snapshot-ui .id-query-container:focus-within {\\n  box-shadow: 0 0 0 3px var(--snapshot-accent-soft);\\n}\\n\\n/*  .mk-selector  */\\n#era-snapshot-ui .id-input {\\n  flex-grow: 1;\\n  border-top-right-radius: 0;\\n  border-bottom-right-radius: 0;\\n  border-right-width: 0;\\n}\\n/*  */\\n#era-snapshot-ui .id-input:focus {\\n  box-shadow: none;\\n  border-color: var(--snapshot-stroke);\\n}\\n\\n/*  */\\n#era-snapshot-ui .query-button {\\n  flex-shrink: 0;\\n  padding: 22px 16px 10px; /*  padding  */\\n  border-radius: 10px;\\n  border-top-left-radius: 0;\\n  border-bottom-left-radius: 0;\\n  background-color: var(--snapshot-btn-bg);\\n  color: var(--snapshot-btn-text);\\n  border: 1px solid var(--snapshot-stroke);\\n  font-family: inherit;\\n  font-size: 14px;\\n  line-height: 1.2;\\n  font-weight: 700;\\n  cursor: pointer;\\n  transition:\\n    background-color 0.2s ease,\\n    border-color 0.2s ease,\\n    transform 0.1s ease;\\n}\\n#era-snapshot-ui .query-button:hover {\\n  background-color: var(--snapshot-btn-hover-bg);\\n  border-color: color-mix(in oklab, var(--snapshot-stroke), var(--snapshot-text) 10%);\\n}\\n#era-snapshot-ui .query-button:active {\\n  transform: scale(0.97);\\n  background-color: var(--snapshot-btn-active-bg);\\n}\\n#era-snapshot-ui .query-button:focus-visible {\\n  outline: none;\\n  z-index: 1; /*  */\\n  box-shadow: 0 0 0 3px var(--snapshot-accent-soft);\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TabSwitch.vue?vue&type=style&index=0&id=2874077c&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"30f9a8d6\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TabSwitch.vue?vue&type=style&index=0&id=2874077c&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./TabSwitch.vue?vue&type=style&index=0&id=2874077c&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./EraAccordion.vue?vue&type=style&index=0&id=f723f6d6&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"2219d4c9\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./EraAccordion.vue?vue&type=style&index=0&id=f723f6d6&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./EraAccordion.vue?vue&type=style&index=0&id=f723f6d6&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./EraPanel.vue?vue&type=style&index=0&id=1e3782f8&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"11cf3555\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./EraPanel.vue?vue&type=style&index=0&id=1e3782f8&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./EraPanel.vue?vue&type=style&index=0&id=1e3782f8&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./App.vue?vue&type=style&index=0&id=7634a531&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"7024b4af\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./App.vue?vue&type=style&index=0&id=7634a531&lang=css\", function() {\n     var newContent = require(\"!!../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./App.vue?vue&type=style&index=0&id=7634a531&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.input-btn-combo[data-v-6bdeb56f]{display:flex;gap:8px}.input-field[data-v-6bdeb56f]{flex-grow:1;width:0;padding:8px 12px;border-radius:10px;border:1px solid var(--settings-border-input,var(--border-soft));background:var(--settings-bg-btn-subtle,var(--actions-btn-bg));color:var(--settings-text-input,var(--text-normal));font-size:13px;font-weight:600;text-align:center;transition:all 0.3s ease;box-shadow:var(--settings-shadow-inset)}.input-field[data-v-6bdeb56f]::placeholder{color:var(--text-soft);font-weight:500}.input-field[data-v-6bdeb56f]:focus{outline:none;border-color:var(--actions-outline-focus);box-shadow:var(--settings-shadow-inset),0 0 0 3px var(--snapshot-accent-soft)}.input-field[data-v-6bdeb56f]::-webkit-outer-spin-button,.input-field[data-v-6bdeb56f]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.input-field[type='number'][data-v-6bdeb56f]{-moz-appearance:textfield}.combo-btn[data-v-6bdeb56f]{flex-shrink:0;padding-left:12px;padding-right:12px}.action-buttons-card[data-v-6bdeb56f]{width:100%;padding:12px;background:var(--actions-bg-glass);border:1px solid var(--border-strong);border-radius:16px;backdrop-filter:blur(10px);box-shadow:var(--actions-shadow-card),var(--shadow-inset);display:flex;flex-direction:column;gap:10px;transition:background 0.3s ease,border-color 0.3s ease}.card-title[data-v-6bdeb56f]{margin:0 0 4px;font-size:14px;font-weight:800;letter-spacing:0.3px;color:var(--text-title);transition:color 0.3s ease}.btns[data-v-6bdeb56f]{display:flex;flex-direction:column;gap:16px}.btn-group[data-v-6bdeb56f]{display:flex;flex-direction:column;gap:6px}.btn-desc[data-v-6bdeb56f]{font-size:11px;color:var(--text-soft);padding:0 4px;line-height:1.5;margin:0;transition:color 0.3s ease}.btn[data-v-6bdeb56f]{display:grid;grid-template-columns:22px 1fr;align-items:center;-moz-column-gap:8px;column-gap:8px;padding:10px 12px;border-radius:12px;border:1px solid var(--border-soft);background:var(--actions-btn-bg);color:var(--actions-btn-text);font-weight:700;font-size:13px;cursor:pointer;box-shadow:var(--settings-shadow-inset),var(--shadow-button);transition:transform 0.12s ease,box-shadow 0.12s ease,background 0.2s ease,color 0.3s ease,border-color 0.3s ease;text-align:left}.btn.primary[data-v-6bdeb56f]{background:var(--actions-btn-primary-bg);border-color:var(--actions-btn-primary-border);color:var(--actions-btn-primary-text)}.btn.subtle[data-v-6bdeb56f]{background:var(--actions-btn-subtle-bg);border-color:var(--actions-btn-subtle-border)}.btn.danger[data-v-6bdeb56f]{background:var(--actions-btn-danger-bg);border-color:var(--actions-btn-danger-border);color:var(--actions-btn-danger-text)}.btn[data-v-6bdeb56f]:hover{transform:translateY(-1px);box-shadow:var(--settings-shadow-inset),var(--shadow-button-hover)}.btn[data-v-6bdeb56f]:active{transform:translateY(0);box-shadow:var(--settings-shadow-inset),var(--actions-shadow-btn-active)}.btn[data-v-6bdeb56f]:focus-visible{outline:2px solid var(--actions-outline-focus);outline-offset:2px}.ico[data-v-6bdeb56f]{display:inline-grid;place-items:center;width:22px;height:22px;filter:saturate(0.95)}.label[data-v-6bdeb56f]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/ERA/ui/components/RightRailContent/ActionButtons.vue\"],\"names\":[],\"mappings\":\"AA4LA,kCACE,YAAa,CACb,OACF,CAEA,8BACE,WAAY,CACZ,OAAQ,CACR,gBAAiB,CACjB,kBAAmB,CACnB,gEAAkE,CAClE,8DAAgE,CAChE,mDAAqD,CACrD,cAAe,CACf,eAAgB,CAChB,iBAAkB,CAClB,wBAAyB,CACzB,uCACF,CACA,2CACE,sBAAuB,CACvB,eACF,CACA,oCACE,YAAa,CACb,yCAA0C,CAC1C,6EAGF,CAEA,kHAEE,uBAAwB,CACxB,QACF,CACA,6CACE,yBACF,CAEA,4BACE,aAAc,CACd,iBAAkB,CAClB,kBACF,CAGA,sCAEE,UAAW,CACX,YAAa,CACb,kCAAmC,CACnC,qCAAsC,CACtC,kBAAmB,CACnB,0BAA2B,CAC3B,yDAA2D,CAC3D,YAAa,CACb,qBAAsB,CACtB,QAAS,CACT,sDAGF,CAGA,6BAEE,cAAe,CACf,cAAe,CACf,eAAgB,CAChB,oBAAqB,CACrB,uBAAwB,CACxB,0BACF,CAGA,uBAEE,YAAa,CACb,qBAAsB,CACtB,QACF,CAEA,4BACE,YAAa,CACb,qBAAsB,CACtB,OACF,CAEA,2BACE,cAAe,CACf,sBAAuB,CACvB,aAAc,CACd,eAAgB,CAChB,QAAS,CACT,0BACF,CAGA,sBAEE,YAAa,CACb,8BAA+B,CAC/B,kBAAmB,CACnB,mBAAe,CAAf,cAAe,CACf,iBAAkB,CAClB,kBAAmB,CACnB,mCAAoC,CACpC,gCAAiC,CACjC,6BAA8B,CAC9B,eAAgB,CAChB,cAAe,CACf,cAAe,CACf,4DAA8D,CAC9D,iHAKwB,CACxB,eACF,CAGA,8BAEE,wCAAyC,CACzC,8CAA+C,CAC/C,qCACF,CAGA,6BAEE,uCAAwC,CACxC,6CACF,CAGA,6BACE,uCAAwC,CACxC,6CAA8C,CAC9C,oCACF,CAGA,4BAEE,0BAA2B,CAC3B,kEACF,CACA,6BAEE,uBAAwB,CACxB,wEACF,CAGA,oCAEE,8CAA+C,CAC/C,kBACF,CAGA,sBAEE,mBAAoB,CACpB,kBAAmB,CACnB,UAAW,CACX,WAAY,CACZ,qBACF,CACA,wBAEE,kBAAmB,CACnB,eAAgB,CAChB,sBACF\",\"sourcesContent\":[\"<template>\\n  <!--  -->\\n  <section class=\\\"action-buttons-card\\\" role=\\\"complementary\\\" aria-label=\\\"ERA \\\">\\n    <!--  -->\\n    <h4 class=\\\"card-title\\\"></h4>\\n    <!--  -->\\n    <div class=\\\"btns\\\">\\n      <!--  -->\\n      <div class=\\\"btn-group\\\">\\n        <button class=\\\"btn primary\\\" title=\\\"\\\" @click.stop=\\\"onFullSync\\\">\\n          <!--  -->\\n          <span class=\\\"ico\\\" aria-hidden=\\\"true\\\"></span>\\n          <!--  -->\\n          <span class=\\\"label\\\"></span>\\n          <!--  -->\\n        </button>\\n        <p class=\\\"btn-desc\\\">\\n          ****\\n        </p>\\n      </div>\\n\\n      <div class=\\\"btn-group\\\">\\n        <button class=\\\"btn subtle\\\" title=\\\"\\\" @click.stop=\\\"onLastSync\\\">\\n          <!--  -->\\n          <span class=\\\"ico\\\" aria-hidden=\\\"true\\\"></span>\\n          <!--  -->\\n          <span class=\\\"label\\\"></span>\\n          <!--  -->\\n        </button>\\n        <p class=\\\"btn-desc\\\">\\n          era****\\n        </p>\\n      </div>\\n\\n      <!-- / -->\\n      <div class=\\\"btn-group\\\">\\n        <div class=\\\"input-btn-combo\\\">\\n          <input\\n            v-model.number=\\\"rollbackId\\\"\\n            type=\\\"number\\\"\\n            class=\\\"input-field\\\"\\n            placeholder=\\\" ID\\\"\\n            aria-label=\\\" ID\\\"\\n          />\\n          <button class=\\\"btn subtle combo-btn\\\" title=\\\"\\\" @click.stop=\\\"onRollbackTo\\\">\\n            <span class=\\\"ico\\\" aria-hidden=\\\"true\\\"></span>\\n            <span class=\\\"label\\\"></span>\\n          </button>\\n        </div>\\n        <p class=\\\"btn-desc\\\"> ID</p>\\n      </div>\\n\\n      <div class=\\\"btn-group\\\">\\n        <button class=\\\"btn danger\\\" title=\\\" ERA \\\" @click.stop=\\\"onInjectRegex\\\">\\n          <span class=\\\"ico\\\" aria-hidden=\\\"true\\\"></span>\\n          <span class=\\\"label\\\">ERA </span>\\n        </button>\\n        <p class=\\\"btn-desc\\\">\\n          <br />\\n          1. ERA <br />\\n          2. ERA<br />\\n          3. ERAaiera<br />\\n          4. ERA<br />\\n          era<br />\\n          1. <br />\\n          2. ERAai<br />\\n          3. ERA****\\n        </p>\\n      </div>\\n    </div>\\n  </section>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { ref } from 'vue';\\nimport toastr from 'toastr';\\nimport { initEraCharacterRegexes } from '../../../initer/manual/regex';\\nimport { initEraWorldbookEntries } from '../../../initer/manual/worldbook';\\nimport { Logger } from '../../../utils/log'; // \\nimport { ui } from 'jquery';\\n\\nconst logger = new Logger(); // \\nconst rollbackId = ref<number | null>(null);\\n\\nasync function onInjectRegex() {\\n  logger.log('onInjectRegex', 'ERA ...');\\n  try {\\n    //  0 \\n    try {\\n      const firstMessage = getChatMessages(0);\\n      if (!firstMessage || firstMessage.length === 0) {\\n        throw new Error('No messages found');\\n      }\\n    } catch (e) {\\n      toastr.error('', '');\\n      logger.warn('onInjectRegex', ' 0 ', e);\\n      return;\\n    }\\n\\n    // \\n    const regexResult = await initEraCharacterRegexes();\\n    if (!regexResult.success) {\\n      toastr.error(regexResult.reason ?? '', '');\\n      logger.error('onInjectRegex', ':', regexResult.reason);\\n      return;\\n    } else {\\n      const injectedCount = regexResult.details.filter(d => d.status === 'injected').length;\\n      const existsCount = regexResult.details.filter(d => d.status === 'exists').length;\\n      let message = '';\\n      if (injectedCount > 0) {\\n        message += ` ${injectedCount} `;\\n      }\\n      if (existsCount > 0) {\\n        message += ` ${existsCount} `;\\n      }\\n      if (message) {\\n        toastr.success(message.trim(), '');\\n      }\\n    }\\n\\n    // \\n    const worldbookResult = await initEraWorldbookEntries();\\n    if (!worldbookResult.success) {\\n      toastr.error(worldbookResult.reason ?? '', '');\\n      logger.error('onInjectRegex', ':', worldbookResult);\\n    } else {\\n      const injectedCount = worldbookResult.details.filter(d => d.status === 'injected').length;\\n      const existsCount = worldbookResult.details.filter(d => d.status === 'exists').length;\\n      let message = '';\\n      if (injectedCount > 0) {\\n        message += ` ${injectedCount} `;\\n      }\\n      if (existsCount > 0) {\\n        message += ` ${existsCount} `;\\n      }\\n      toastr.success(message.trim(), '');\\n    }\\n\\n    logger.log('onInjectRegex', '');\\n  } catch (error) {\\n    logger.error('onInjectRegex', ':', error);\\n    toastr.error('', '');\\n  }\\n}\\n\\nfunction onFullSync() {\\n  logger.log('onFullSync', ' era:forceSync  (mode: full)');\\n  try {\\n    eventEmit('era:forceSync', { mode: 'full' });\\n    toastr.success('', '');\\n  } catch (error) {\\n    logger.error('onFullSync', ' era:forceSync :', error);\\n    toastr.error('', '');\\n  }\\n}\\n\\nfunction onLastSync() {\\n  logger.log('onLastSync', ' era:forceSync  (mode: latest)');\\n  try {\\n    eventEmit('era:forceSync', { mode: 'latest' });\\n    toastr.success('', '');\\n  } catch (error) {\\n    logger.error('onLastSync', ' era:forceSync :', error);\\n    toastr.error('', '');\\n  }\\n}\\n\\nfunction onRollbackTo() {\\n  if (rollbackId.value === null || rollbackId.value < 0) {\\n    toastr.warning(' ID', '');\\n    return;\\n  }\\n  logger.log(\\n    'onRollbackTo',\\n    ` era:forceSync  (mode: rollbackTo, message_id: ${rollbackId.value})`,\\n  );\\n  try {\\n    eventEmit('era:forceSync', { mode: 'rollbackTo', message_id: rollbackId.value });\\n    toastr.success(` #${rollbackId.value} `, '');\\n  } catch (error) {\\n    logger.error('onRollbackTo', ' era:forceSync :', error);\\n    toastr.error('', '');\\n  }\\n}\\n</script>\\n\\n<style scoped>\\n/* ===  === */\\n.input-btn-combo {\\n  display: flex;\\n  gap: 8px;\\n}\\n\\n.input-field {\\n  flex-grow: 1;\\n  width: 0; /*  flex-grow  */\\n  padding: 8px 12px;\\n  border-radius: 10px;\\n  border: 1px solid var(--settings-border-input, var(--border-soft));\\n  background: var(--settings-bg-btn-subtle, var(--actions-btn-bg));\\n  color: var(--settings-text-input, var(--text-normal));\\n  font-size: 13px;\\n  font-weight: 600;\\n  text-align: center;\\n  transition: all 0.3s ease;\\n  box-shadow: var(--settings-shadow-inset);\\n}\\n.input-field::placeholder {\\n  color: var(--text-soft);\\n  font-weight: 500;\\n}\\n.input-field:focus {\\n  outline: none;\\n  border-color: var(--actions-outline-focus);\\n  box-shadow:\\n    var(--settings-shadow-inset),\\n    0 0 0 3px var(--snapshot-accent-soft);\\n}\\n/*  number input  */\\n.input-field::-webkit-outer-spin-button,\\n.input-field::-webkit-inner-spin-button {\\n  -webkit-appearance: none;\\n  margin: 0;\\n}\\n.input-field[type='number'] {\\n  -moz-appearance: textfield;\\n}\\n\\n.combo-btn {\\n  flex-shrink: 0; /*  */\\n  padding-left: 12px;\\n  padding-right: 12px;\\n}\\n\\n/* ===  ERA  +  === */\\n.action-buttons-card {\\n  /*  */\\n  width: 100%; /*  */ /*  */\\n  padding: 12px; /*  */ /*  */\\n  background: var(--actions-bg-glass);\\n  border: 1px solid var(--border-strong);\\n  border-radius: 16px; /*  */\\n  backdrop-filter: blur(10px); /*  */\\n  box-shadow: var(--actions-shadow-card), var(--shadow-inset);\\n  display: flex; /*  */\\n  flex-direction: column; /*  */\\n  gap: 10px; /*  */\\n  transition:\\n    background 0.3s ease,\\n    border-color 0.3s ease;\\n}\\n\\n/*  */\\n.card-title {\\n  /*  */\\n  margin: 0 0 4px; /*  */\\n  font-size: 14px; /*  */\\n  font-weight: 800; /*  */\\n  letter-spacing: 0.3px; /*  */\\n  color: var(--text-title);\\n  transition: color 0.3s ease;\\n}\\n\\n/*  */\\n.btns {\\n  /*  */\\n  display: flex; /* flex  */\\n  flex-direction: column; /*  */\\n  gap: 16px; /*  */\\n}\\n\\n.btn-group {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 6px;\\n}\\n\\n.btn-desc {\\n  font-size: 11px;\\n  color: var(--text-soft);\\n  padding: 0 4px;\\n  line-height: 1.5;\\n  margin: 0;\\n  transition: color 0.3s ease;\\n}\\n\\n/*  */\\n.btn {\\n  /*  */\\n  display: grid; /*  */\\n  grid-template-columns: 22px 1fr; /*  22px  +  */\\n  align-items: center; /*  */\\n  column-gap: 8px; /*  */\\n  padding: 10px 12px; /*  */\\n  border-radius: 12px; /*  */\\n  border: 1px solid var(--border-soft);\\n  background: var(--actions-btn-bg);\\n  color: var(--actions-btn-text);\\n  font-weight: 700; /*  */\\n  font-size: 13px; /*  */\\n  cursor: pointer; /*  */\\n  box-shadow: var(--settings-shadow-inset), var(--shadow-button);\\n  transition:\\n    transform 0.12s ease,\\n    box-shadow 0.12s ease,\\n    background 0.2s ease,\\n    color 0.3s ease,\\n    border-color 0.3s ease;\\n  text-align: left; /*  */\\n}\\n\\n/*  */\\n.btn.primary {\\n  /*  */\\n  background: var(--actions-btn-primary-bg);\\n  border-color: var(--actions-btn-primary-border);\\n  color: var(--actions-btn-primary-text);\\n}\\n\\n/*  */\\n.btn.subtle {\\n  /*  */\\n  background: var(--actions-btn-subtle-bg);\\n  border-color: var(--actions-btn-subtle-border);\\n}\\n\\n/*  */\\n.btn.danger {\\n  background: var(--actions-btn-danger-bg);\\n  border-color: var(--actions-btn-danger-border);\\n  color: var(--actions-btn-danger-text);\\n}\\n\\n/*  */\\n.btn:hover {\\n  /*  */\\n  transform: translateY(-1px); /*  */\\n  box-shadow: var(--settings-shadow-inset), var(--shadow-button-hover);\\n}\\n.btn:active {\\n  /*  */\\n  transform: translateY(0); /*  */\\n  box-shadow: var(--settings-shadow-inset), var(--actions-shadow-btn-active);\\n}\\n\\n/*  */\\n.btn:focus-visible {\\n  /*  */\\n  outline: 2px solid var(--actions-outline-focus);\\n  outline-offset: 2px; /*  */\\n}\\n\\n/*  */\\n.ico {\\n  /*  */\\n  display: inline-grid; /*  */\\n  place-items: center; /*  */\\n  width: 22px; /*  */\\n  height: 22px; /*  */\\n  filter: saturate(0.95); /*  */\\n}\\n.label {\\n  /*  */\\n  white-space: nowrap; /*  */\\n  overflow: hidden; /*  */\\n  text-overflow: ellipsis; /*  */\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./AboutEra.vue?vue&type=style&index=0&id=9b1026a6&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"5ee7afac\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./AboutEra.vue?vue&type=style&index=0&id=9b1026a6&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./AboutEra.vue?vue&type=style&index=0&id=9b1026a6&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.tabs[data-v-2874077c]{border:1px solid var(--border-soft);border-radius:12px;overflow:hidden;background:var(--accordion-bg);transition:background 0.3s ease,border-color 0.3s ease}.tab-bar[data-v-2874077c]{display:flex;gap:8px;padding:8px;border-bottom:1px solid var(--border-soft);background:var(--mk-pill-null-bg);transition:background 0.3s ease,border-color 0.3s ease}.tab-btn[data-v-2874077c]{padding:8px 12px;font-weight:800;font-size:13px;color:var(--text-normal);background:var(--bg-solid);border:1px solid var(--settings-border-input);border-radius:10px;cursor:pointer;transition:background 0.3s ease,border-color 0.3s ease,color 0.3s ease,box-shadow 0.3s ease}.tab-btn.active[data-v-2874077c]{color:var(--settings-text-input);border-color:var(--settings-border-btn-primary);box-shadow:var(--settings-shadow-inset),var(--tab-active-shadow)}.tab-content[data-v-2874077c]{padding:10px 12px;background:var(--tab-content-bg);transition:background 0.3s ease}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/ERA/ui/template/TabSwitch.vue\"],\"names\":[],\"mappings\":\"AA+DA,uBACE,mCAAoC,CACpC,kBAAmB,CACnB,eAAgB,CAChB,8BAA+B,CAC/B,sDAGF,CACA,0BACE,YAAa,CACb,OAAQ,CACR,WAAY,CACZ,0CAA2C,CAC3C,iCAAkC,CAClC,sDAGF,CACA,0BACE,gBAAiB,CACjB,eAAgB,CAChB,cAAe,CACf,wBAAyB,CACzB,0BAA2B,CAC3B,6CAA8C,CAC9C,kBAAmB,CACnB,cAAe,CACf,2FAKF,CACA,iCACE,gCAAiC,CACjC,+CAAgD,CAChD,gEACF,CACA,8BACE,iBAAkB,CAClB,gCAAiC,CACjC,+BACF\",\"sourcesContent\":[\"<template>\\n  <section class=\\\"tabs\\\">\\n    <!--  -->\\n    <div class=\\\"tab-bar\\\" role=\\\"tablist\\\">\\n      <button\\n        v-for=\\\"t in tabs\\\"\\n        :key=\\\"t.key\\\"\\n        class=\\\"tab-btn\\\"\\n        :class=\\\"{ active: t.key === innerActive }\\\"\\n        role=\\\"tab\\\"\\n        @click=\\\"setActive(t.key)\\\"\\n      >\\n        {{ t.label }}\\n      </button>\\n    </div>\\n\\n    <!--  -->\\n    <div class=\\\"tab-content\\\">\\n      <div v-if=\\\"innerActive === 'pure'\\\">\\n        <slot name=\\\"pure\\\" />\\n        <!--  -->\\n      </div>\\n      <div v-else>\\n        <slot name=\\\"full\\\" />\\n        <!--  -->\\n      </div>\\n    </div>\\n  </section>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { onMounted, ref, watch } from 'vue'; // \\nimport { Logger } from '../../utils/log';\\n\\ntype TabItem = { key: 'pure' | 'full'; label: string }; // Tab \\n\\nconst logger = new Logger();\\nconst props = defineProps<{ tabs: TabItem[]; active?: 'pure' | 'full' }>(); //  tabs  active\\nconst emit = defineEmits<{ 'update:active': ['pure' | 'full'] }>(); // v-model:active\\n\\nconst innerActive = ref<'pure' | 'full'>(props.active ?? 'pure'); // \\n\\nwatch(\\n  () => props.active,\\n  v => {\\n    if (v) {\\n      logger.debug('watch:active', ` active tab : ${v}`);\\n      innerActive.value = v;\\n    }\\n  },\\n); // \\nfunction setActive(k: 'pure' | 'full') {\\n  logger.debug('setActive', ` tab : ${k}`);\\n  innerActive.value = k;\\n  emit('update:active', k);\\n} // \\n\\nonMounted(() => {\\n  //logger.debug('onMounted', '', { props });\\n});\\n</script>\\n\\n<style scoped>\\n.tabs {\\n  border: 1px solid var(--border-soft);\\n  border-radius: 12px;\\n  overflow: hidden;\\n  background: var(--accordion-bg);\\n  transition:\\n    background 0.3s ease,\\n    border-color 0.3s ease;\\n}\\n.tab-bar {\\n  display: flex;\\n  gap: 8px;\\n  padding: 8px;\\n  border-bottom: 1px solid var(--border-soft);\\n  background: var(--mk-pill-null-bg);\\n  transition:\\n    background 0.3s ease,\\n    border-color 0.3s ease;\\n}\\n.tab-btn {\\n  padding: 8px 12px;\\n  font-weight: 800;\\n  font-size: 13px;\\n  color: var(--text-normal);\\n  background: var(--bg-solid);\\n  border: 1px solid var(--settings-border-input);\\n  border-radius: 10px;\\n  cursor: pointer;\\n  transition:\\n    background 0.3s ease,\\n    border-color 0.3s ease,\\n    color 0.3s ease,\\n    box-shadow 0.3s ease;\\n}\\n.tab-btn.active {\\n  color: var(--settings-text-input);\\n  border-color: var(--settings-border-btn-primary);\\n  box-shadow: var(--settings-shadow-inset), var(--tab-active-shadow);\\n}\\n.tab-content {\\n  padding: 10px 12px;\\n  background: var(--tab-content-bg);\\n  transition: background 0.3s ease;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","/* unplugin-vue-components disabled */// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./FloatingBall.vue?vue&type=style&index=0&id=3bb5cc6c&scoped=true&lang=css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/.pnpm/vue-style-loader@4.1.3/node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"6b6ad5f4\", content, false, {\"ssrId\":true});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./FloatingBall.vue?vue&type=style&index=0&id=3bb5cc6c&scoped=true&lang=css\", function() {\n     var newContent = require(\"!!../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/cjs.js??clonedRuleSet-78.use[1]!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/stylePostLoader.js!../../../../node_modules/.pnpm/postcss-loader@8.2.0_postcss@8.5.6_typescript@6.0.0-dev.20250807_webpack@5.102.1/node_modules/postcss-loader/dist/cjs.js!../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/index.js??ruleSet[1].rules[6].use[0]!./FloatingBall.vue?vue&type=style&index=0&id=3bb5cc6c&scoped=true&lang=css\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.right-rail[data-v-61d00544]{flex:1 1 420px;min-width:400px;height:min(680px,86vh);position:sticky;top:10px;align-self:flex-start;z-index:1;display:flex;flex-direction:column}.right-rail-content-wrapper[data-v-61d00544]{display:flex;flex-direction:column;gap:12px;overflow-y:auto;flex-grow:1}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/ERA/ui/components/RightRail.vue\"],\"names\":[],\"mappings\":\"AAiBA,6BACE,cAAe,CACf,eAAgB,CAChB,sBAAwB,CACxB,eAAgB,CAChB,QAAS,CACT,qBAAsB,CACtB,SAAU,CACV,YAAa,CACb,qBACF,CAEA,6CACE,YAAa,CACb,qBAAsB,CACtB,QAAS,CACT,eAAgB,CAChB,WACF\",\"sourcesContent\":[\"<template>\\n  <aside class=\\\"right-rail\\\">\\n    <div class=\\\"right-rail-content-wrapper\\\">\\n      <ActionButtons />\\n      <EraSettingsPanel />\\n      <AboutEra />\\n    </div>\\n  </aside>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport AboutEra from './RightRailContent/AboutEra.vue';\\nimport ActionButtons from './RightRailContent/ActionButtons.vue';\\nimport EraSettingsPanel from './RightRailContent/EraSettingsPanel.vue';\\n</script>\\n\\n<style scoped>\\n.right-rail {\\n  flex: 1 1 420px;\\n  min-width: 400px;\\n  height: min(680px, 86vh);\\n  position: sticky;\\n  top: 10px;\\n  align-self: flex-start;\\n  z-index: 1;\\n  display: flex;\\n  flex-direction: column;\\n}\\n\\n.right-rail-content-wrapper {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 12px;\\n  overflow-y: auto;\\n  flex-grow: 1;\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.settings-card[data-v-e1f9e9e0]{width:100%;padding:12px;background:var(--settings-bg-glass);border:1px solid var(--border-strong);border-radius:16px;backdrop-filter:blur(10px);box-shadow:var(--settings-shadow-card),var(--settings-shadow-inset);display:flex;flex-direction:column;gap:10px;transition:background 0.3s ease,border-color 0.3s ease}.card-header[data-v-e1f9e9e0]{display:flex;align-items:center;justify-content:space-between;padding:8px 10px;border-radius:10px;border:1px solid var(--border-soft);background:var(--chip-bg);color:var(--text-title);font-weight:800;font-size:13px;cursor:pointer;box-shadow:var(--settings-shadow-inset),var(--shadow-button);transition:background 0.3s ease,border-color 0.3s ease,color 0.3s ease,transform 0.2s ease,box-shadow 0.2s ease}.card-header[data-v-e1f9e9e0]:hover{transform:translateY(-1px);box-shadow:var(--settings-shadow-inset),var(--shadow-button-hover)}.title[data-v-e1f9e9e0]{pointer-events:none}.chev[data-v-e1f9e9e0]{opacity:0.7}.content[data-v-e1f9e9e0]{display:flex;flex-direction:column;gap:10px}.toolbar[data-v-e1f9e9e0]{display:flex;align-items:center;gap:8px}.spacer[data-v-e1f9e9e0]{flex:1}.mini-btn[data-v-e1f9e9e0]{padding:6px 10px;border-radius:8px;border:1px solid var(--border-normal);background:var(--chip-bg);color:var(--text-normal);cursor:pointer;font-size:12px;font-weight:700;box-shadow:var(--settings-shadow-inset),var(--settings-shadow-minibtn);transition:background 0.3s ease,border-color 0.3s ease,color 0.3s ease,transform 0.2s ease,box-shadow 0.2s ease}.mini-btn[data-v-e1f9e9e0]:hover{transform:translateY(-1px);box-shadow:var(--settings-shadow-inset),var(--settings-shadow-minibtn-hover)}.mini-btn.primary[data-v-e1f9e9e0]{background:var(--settings-bg-btn-primary);border-color:var(--settings-border-btn-primary);color:var(--settings-text-primary-btn)}.mini-btn.subtle[data-v-e1f9e9e0]{background:var(--settings-bg-btn-subtle);border-color:var(--settings-border-input)}.vars[data-v-e1f9e9e0]{display:flex;flex-direction:column;gap:8px}.var-row[data-v-e1f9e9e0]{display:grid;grid-template-columns:1fr minmax(120px,1.2fr) auto;align-items:center;gap:10px;padding:8px 10px;border:1px solid var(--border-soft);border-radius:10px;background:var(--settings-bg-var-row);transition:background 0.3s ease,border-color 0.3s ease}.var-key[data-v-e1f9e9e0]{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;font-size:12px;color:var(--text-subtitle);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;transition:color 0.3s ease}.var-editor[data-v-e1f9e9e0]{display:flex;align-items:center;gap:8px}.ipt[data-v-e1f9e9e0]{width:100%;padding:8px 10px;border-radius:8px;border:1px solid var(--settings-border-input);background:var(--bg-solid);font-size:12px;color:var(--settings-text-input);box-shadow:var(--settings-shadow-inset);transition:background 0.3s ease,border-color 0.3s ease,color 0.3s ease}.ta[data-v-e1f9e9e0]{min-height:64px;font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}.type-chip[data-v-e1f9e9e0]{font-size:11px;color:var(--text-subtitle);background:var(--settings-bg-type-chip);border:1px solid var(--settings-border-type-chip);border-radius:999px;padding:4px 8px;white-space:nowrap;transition:background 0.3s ease,border-color 0.3s ease,color 0.3s ease}.switch[data-v-e1f9e9e0]{position:relative;width:42px;height:24px;display:inline-block}.switch input[data-v-e1f9e9e0]{opacity:0;width:0;height:0}.switch .track[data-v-e1f9e9e0]{position:absolute;inset:0;border-radius:999px;background:var(--settings-bg-switch-track);box-shadow:var(--settings-shadow-inset);transition:background 0.2s ease}.switch .track[data-v-e1f9e9e0]::after{content:'';position:absolute;top:3px;left:3px;width:18px;height:18px;border-radius:50%;background:var(--settings-bg-switch-handle);box-shadow:var(--settings-shadow-switch-handle);transition:transform 0.2s ease,background 0.3s ease}.switch input:checked+.track[data-v-e1f9e9e0]{background:var(--settings-bg-switch-checked)}.switch input:checked+.track[data-v-e1f9e9e0]::after{transform:translateX(18px)}.hint[data-v-e1f9e9e0]{font-size:11px;color:var(--text-normal);transition:color 0.3s ease}.hint.ok[data-v-e1f9e9e0]{color:var(--settings-text-hint-ok)}.hint.bad[data-v-e1f9e9e0]{color:var(--settings-text-hint-bad)}.placeholder[data-v-e1f9e9e0]{padding:10px;color:var(--text-normal);font-size:12px;border:1px dashed var(--border-dashed);border-radius:10px;background:var(--bg-placeholder);transition:background 0.3s ease,border-color 0.3s ease,color 0.3s ease}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/ERA/ui/components/RightRailContent/EraSettingsPanel.vue\"],\"names\":[],\"mappings\":\"AAiSA,gCAEE,UAAW,CACX,YAAa,CACb,mCAAoC,CACpC,qCAAsC,CACtC,kBAAmB,CACnB,0BAA2B,CAC3B,mEAAqE,CACrE,YAAa,CACb,qBAAsB,CACtB,QAAS,CACT,sDAGF,CAGA,8BAEE,YAAa,CACb,kBAAmB,CACnB,6BAA8B,CAC9B,gBAAiB,CACjB,kBAAmB,CACnB,mCAAoC,CACpC,yBAA0B,CAC1B,uBAAwB,CACxB,eAAgB,CAChB,cAAe,CACf,cAAe,CACf,4DAA8D,CAC9D,+GAMF,CACA,oCACE,0BAA2B,CAC3B,kEACF,CACA,wBACE,mBACF,CACA,uBACE,WACF,CAGA,0BACE,YAAa,CACb,qBAAsB,CACtB,QACF,CAGA,0BACE,YAAa,CACb,kBAAmB,CACnB,OACF,CACA,yBACE,MACF,CAEA,2BAEE,gBAAiB,CACjB,iBAAkB,CAClB,qCAAsC,CACtC,yBAA0B,CAC1B,wBAAyB,CACzB,cAAe,CACf,cAAe,CACf,eAAgB,CAChB,sEAAwE,CACxE,+GAMF,CACA,iCACE,0BAA2B,CAC3B,4EACF,CACA,mCACE,yCAA0C,CAC1C,+CAAgD,CAChD,sCACF,CACA,kCACE,wCAAyC,CACzC,yCACF,CAGA,uBACE,YAAa,CACb,qBAAsB,CACtB,OACF,CAEA,0BAEE,YAAa,CACb,kDAAoD,CACpD,kBAAmB,CACnB,QAAS,CACT,gBAAiB,CACjB,mCAAoC,CACpC,kBAAmB,CACnB,qCAAsC,CACtC,sDAGF,CACA,0BACE,gEAAqE,CACrE,cAAe,CACf,0BAA2B,CAC3B,eAAgB,CAChB,sBAAuB,CACvB,kBAAmB,CACnB,0BACF,CACA,6BACE,YAAa,CACb,kBAAmB,CACnB,OACF,CAEA,sBAEE,UAAW,CACX,gBAAiB,CACjB,iBAAkB,CAClB,6CAA8C,CAC9C,0BAA2B,CAC3B,cAAe,CACf,gCAAiC,CACjC,uCAAwC,CACxC,sEAIF,CACA,qBACE,eAAgB,CAChB,gEACF,CAEA,4BAEE,cAAe,CACf,0BAA2B,CAC3B,uCAAwC,CACxC,iDAAkD,CAClD,mBAAoB,CACpB,eAAgB,CAChB,kBAAmB,CACnB,sEAIF,CAGA,yBACE,iBAAkB,CAClB,UAAW,CACX,WAAY,CACZ,oBACF,CACA,+BACE,SAAU,CACV,OAAQ,CACR,QACF,CACA,gCACE,iBAAkB,CAClB,OAAQ,CACR,mBAAoB,CACpB,0CAA2C,CAC3C,uCAAwC,CACxC,+BACF,CACA,uCACE,UAAW,CACX,iBAAkB,CAClB,OAAQ,CACR,QAAS,CACT,UAAW,CACX,WAAY,CACZ,iBAAkB,CAClB,2CAA4C,CAC5C,+CAAgD,CAChD,mDAGF,CACA,8CACE,4CACF,CACA,qDACE,0BACF,CAEA,uBACE,cAAe,CACf,wBAAyB,CACzB,0BACF,CACA,0BACE,kCACF,CACA,2BACE,mCACF,CAEA,8BACE,YAAa,CACb,wBAAyB,CACzB,cAAe,CACf,sCAAuC,CACvC,kBAAmB,CACnB,gCAAiC,CACjC,sEAIF\",\"sourcesContent\":[\"<template>\\n  <!--  ActionButtons  -->\\n  <section class=\\\"settings-card\\\" role=\\\"region\\\" aria-label=\\\"ERA \\\">\\n    <!--  -->\\n    <!-- / -->\\n    <button class=\\\"card-header\\\" :aria-expanded=\\\"isOpen\\\" @click=\\\"onToggle\\\">\\n      <!--  -->\\n      <span class=\\\"title\\\">ERA </span>\\n      <!--  -->\\n      <span class=\\\"chev\\\" aria-hidden=\\\"true\\\">{{ isOpen ? '' : '' }}</span>\\n      <!--  -->\\n    </button>\\n\\n    <!--  -->\\n    <div v-show=\\\"isOpen\\\" class=\\\"content\\\">\\n      <!--  -->\\n      <!-- // -->\\n      <div class=\\\"toolbar\\\">\\n        <!--  -->\\n        <button class=\\\"mini-btn\\\" title=\\\"\\\" @click.stop=\\\"loadVars\\\"> </button>\\n        <!--  -->\\n        <div class=\\\"spacer\\\"></div>\\n        <!--  -->\\n        <button class=\\\"mini-btn subtle\\\" title=\\\"\\\" @click.stop=\\\"discardEdits\\\"> </button>\\n        <!--  -->\\n        <button class=\\\"mini-btn primary\\\" title=\\\"\\\" @click.stop=\\\"saveEdits\\\"> </button>\\n        <!--  -->\\n      </div>\\n\\n      <!--  -->\\n      <div class=\\\"vars\\\">\\n        <template v-if=\\\"rows.length > 0\\\">\\n          <!--  -->\\n          <div v-for=\\\"row in rows\\\" :key=\\\"row.key\\\" class=\\\"var-row\\\">\\n            <!--  -->\\n            <label class=\\\"var-key\\\" :title=\\\"row.key\\\">{{ row.key }}</label>\\n            <!--  -->\\n            <!--  -->\\n            <div class=\\\"var-editor\\\">\\n              <!--  -->\\n              <!--  -->\\n              <template v-if=\\\"row.type === 'boolean'\\\">\\n                <label class=\\\"switch\\\">\\n                  <!--  -->\\n                  <input v-model=\\\"edits[row.key]\\\" type=\\\"checkbox\\\" />\\n                  <!--  -->\\n                  <span class=\\\"track\\\"></span>\\n                  <!--  -->\\n                </label>\\n              </template>\\n\\n              <!-- number  -->\\n              <template v-else-if=\\\"row.type === 'number'\\\">\\n                <input v-model.number=\\\"edits[row.key]\\\" type=\\\"number\\\" class=\\\"ipt\\\" :placeholder=\\\"String(row.value)\\\" />\\n                <!--  -->\\n              </template>\\n\\n              <!-- text  -->\\n              <template v-else-if=\\\"row.type === 'string'\\\">\\n                <input v-model=\\\"edits[row.key]\\\" type=\\\"text\\\" class=\\\"ipt\\\" :placeholder=\\\"String(row.value)\\\" />\\n                <!--  -->\\n              </template>\\n\\n              <!-- //null/JSON  -->\\n              <template v-else>\\n                <textarea\\n                  v-model=\\\"jsonBuffers[row.key]\\\"\\n                  class=\\\"ipt ta\\\"\\n                  :placeholder=\\\"safeStringify(row.value)\\\"\\n                  @input=\\\"markJsonTouched(row.key)\\\"\\n                ></textarea>\\n                <!-- JSON  -->\\n                <span class=\\\"hint\\\" :class=\\\"{ ok: jsonState[row.key]?.ok, bad: jsonState[row.key]?.bad }\\\">{{\\n                  jsonState[row.key]?.msg ?? ' JSON '\\n                }}</span>\\n                <!-- JSON  -->\\n              </template>\\n            </div>\\n            <!--  -->\\n            <span class=\\\"type-chip\\\">{{ humanType(row.type) }}</span>\\n            <!--  -->\\n          </div>\\n        </template>\\n\\n        <template v-else>\\n          <!--  -->\\n          <div class=\\\"placeholder\\\">\\n            <p></p>\\n            <!--  -->\\n            <p class=\\\"dim\\\">\\n               <code>app_ready</code> \\n              <code>initializeExternalSettings()</code> \\n            </p>\\n            <!--  -->\\n          </div>\\n        </template>\\n      </div>\\n    </div>\\n  </section>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\n/* \\n   - \\n   -  boolean/number/string/json \\n   - \\n*/\\nimport { reactive, ref } from 'vue'; // Vue  API\\nimport toastr from 'toastr';\\nimport { z } from 'zod';\\nimport { SettingsSchema } from '../../../utils/constants';\\nimport { settings, updateScriptSettings } from '../../../utils/era_data';\\nimport { Logger } from '../../../utils/log'; // \\n\\nconst logger = new Logger(); // \\n\\n// ===  ===\\nconst isOpen = ref(false); // \\n\\n// ===  ===\\ntype Row = { key: string; value: any; type: 'boolean' | 'number' | 'string' | 'json' }; // \\nconst rows = ref<Row[]>([]); // \\nconst edits = reactive<Record<string, any>>({}); // //\\nconst jsonBuffers = reactive<Record<string, string>>({}); //  JSON \\nconst jsonState = reactive<Record<string, { ok?: boolean; bad?: boolean; msg?: string }>>({}); // JSON \\n\\n// ===  ===\\nfunction detectType(v: any): Row['type'] {\\n  // \\n  if (typeof v === 'boolean') return 'boolean'; // \\n  if (typeof v === 'number' && Number.isFinite(v)) return 'number'; // \\n  if (typeof v === 'string') return 'string'; // \\n  return 'json'; //  json//null/\\n}\\nfunction humanType(t: Row['type']): string {\\n  // \\n  return t === 'boolean' ? '' : t === 'number' ? '' : t === 'string' ? '' : 'JSON'; // \\n}\\nfunction safeStringify(v: any): string {\\n  //  JSON \\n  try {\\n    return JSON.stringify(v, null, 2);\\n  } catch {\\n    return String(v);\\n  } // \\n}\\n\\n// ===  ===\\nfunction loadVars() {\\n  try {\\n    logger.debug('loadVars', '...');\\n    const obj = settings.value;\\n    logger.debug('loadVars', ':', obj);\\n\\n    if (!obj || Object.keys(obj).length === 0) {\\n      logger.warn('loadVars', 'UI ');\\n      rows.value = [];\\n      toastr.info('');\\n      return;\\n    }\\n\\n    // \\n    rows.value = [];\\n    for (const k of Object.keys(edits)) delete edits[k];\\n    for (const k of Object.keys(jsonBuffers)) delete jsonBuffers[k];\\n    for (const k of Object.keys(jsonState)) delete jsonState[k];\\n\\n    // \\n    Object.entries(obj)\\n      .filter(([key]) => key !== '')\\n      .forEach(([key, value]) => {\\n        const t = detectType(value);\\n        rows.value.push({ key, value, type: t });\\n        if (t === 'json') {\\n          jsonBuffers[key] = safeStringify(value);\\n        } else {\\n          edits[key] = value;\\n        }\\n      });\\n    toastr.success('', '');\\n  } catch (e) {\\n    logger.error('loadVars', ':', e);\\n    toastr.error(' ERA ', '');\\n  }\\n}\\n\\n// ===  ===\\nfunction onToggle() {\\n  // \\n  isOpen.value = !isOpen.value; // \\n  if (isOpen.value && rows.value.length === 0) loadVars(); // \\n}\\n\\n// === JSON  +  ===\\nfunction markJsonTouched(key: string) {\\n  //  JSON \\n  const txt = jsonBuffers[key] ?? ''; // \\n  if (txt.trim() === '') {\\n    // \\n    jsonState[key] = { bad: true, ok: false, msg: ' null  null' }; // \\n    return; // \\n  }\\n  try {\\n    JSON.parse(txt);\\n    jsonState[key] = { ok: true, bad: false, msg: 'JSON ' };\\n  } catch (e: any) {\\n    // \\n    jsonState[key] = { bad: true, ok: false, msg: `JSON ${e?.message ?? ''}` };\\n  } // \\n}\\n\\n// ===  ===\\nfunction discardEdits() {\\n  // \\n  logger.log('discardEdits', '');\\n  loadVars(); // \\n  toastr.info('', '');\\n}\\n\\n// ===  ===\\nasync function saveEdits() {\\n  // \\n  const originalRows = JSON.parse(JSON.stringify(rows.value)); // \\n\\n  try {\\n    // 1.  UI\\n    const updatedSettings: Record<string, any> = {};\\n    rows.value.forEach(row => {\\n      if (row.type === 'json') {\\n        if (jsonState[row.key]?.bad) {\\n          throw new Error(` ${row.key}  JSON `);\\n        }\\n        if (jsonBuffers[row.key] != null) {\\n          const newValue = JSON.parse(jsonBuffers[row.key]);\\n          row.value = newValue;\\n          updatedSettings[row.key] = newValue;\\n        }\\n      } else if (edits[row.key] !== undefined) {\\n        row.value = edits[row.key];\\n        updatedSettings[row.key] = edits[row.key];\\n      }\\n    });\\n    toastr.success('...', '');\\n\\n    // 2. \\n    await updateScriptSettings(currentSettings => {\\n      const next: z.infer<typeof SettingsSchema> = { ...currentSettings };\\n\\n      // //\\n      Object.entries(edits).forEach(([k, v]) => {\\n        const key = k as keyof z.infer<typeof SettingsSchema>;\\n        (next as any)[key] = v;\\n      });\\n\\n      //  JSON \\n      Object.entries(jsonBuffers).forEach(([k, txt]) => {\\n        if (txt != null) {\\n          if (jsonState[k]?.bad) throw new Error(` ${k}  JSON `);\\n          const key = k as keyof z.infer<typeof SettingsSchema>;\\n          (next as any)[key] = JSON.parse(txt);\\n        }\\n      });\\n\\n      return next;\\n    });\\n\\n    logger.log('saveEdits', '');\\n    toastr.success('', '');\\n    window.dispatchEvent(new CustomEvent('era-settings-updated'));\\n    //  loadVars()\\n  } catch (e) {\\n    logger.error('saveEdits', '', e);\\n    toastr.error(`${(e as any)?.message ?? e}`, '');\\n    // 3.  UI\\n    rows.value = originalRows;\\n    //  edits  jsonBuffers  UI\\n    originalRows.forEach((row: Row) => {\\n      if (row.type === 'json') {\\n        jsonBuffers[row.key] = safeStringify(row.value);\\n      } else {\\n        edits[row.key] = row.value;\\n      }\\n    });\\n  }\\n}\\n</script>\\n\\n<style scoped>\\n/* ===  ActionButtons  === */\\n.settings-card {\\n  /*  */\\n  width: 100%; /*  */\\n  padding: 12px; /*  */\\n  background: var(--settings-bg-glass);\\n  border: 1px solid var(--border-strong);\\n  border-radius: 16px; /*  */\\n  backdrop-filter: blur(10px); /*  */\\n  box-shadow: var(--settings-shadow-card), var(--settings-shadow-inset);\\n  display: flex; /*  */\\n  flex-direction: column; /*  */\\n  gap: 10px; /*  */\\n  transition:\\n    background 0.3s ease,\\n    border-color 0.3s ease;\\n}\\n\\n/* / */\\n.card-header {\\n  /*  */\\n  display: flex; /*  */\\n  align-items: center; /*  */\\n  justify-content: space-between; /*  */\\n  padding: 8px 10px; /*  */\\n  border-radius: 10px; /*  */\\n  border: 1px solid var(--border-soft);\\n  background: var(--chip-bg);\\n  color: var(--text-title);\\n  font-weight: 800; /*  */\\n  font-size: 13px; /*  */\\n  cursor: pointer; /*  */\\n  box-shadow: var(--settings-shadow-inset), var(--shadow-button);\\n  transition:\\n    background 0.3s ease,\\n    border-color 0.3s ease,\\n    color 0.3s ease,\\n    transform 0.2s ease,\\n    box-shadow 0.2s ease;\\n}\\n.card-header:hover {\\n  transform: translateY(-1px);\\n  box-shadow: var(--settings-shadow-inset), var(--shadow-button-hover);\\n} /*  */\\n.title {\\n  pointer-events: none;\\n} /*  */\\n.chev {\\n  opacity: 0.7;\\n} /*  */\\n\\n/*  */\\n.content {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 10px;\\n} /*  */\\n\\n/*  */\\n.toolbar {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n} /*  */\\n.spacer {\\n  flex: 1;\\n} /*  */\\n\\n.mini-btn {\\n  /*  */\\n  padding: 6px 10px; /*  */\\n  border-radius: 8px; /*  */\\n  border: 1px solid var(--border-normal);\\n  background: var(--chip-bg);\\n  color: var(--text-normal);\\n  cursor: pointer; /*  */\\n  font-size: 12px; /*  */\\n  font-weight: 700; /*  */\\n  box-shadow: var(--settings-shadow-inset), var(--settings-shadow-minibtn);\\n  transition:\\n    background 0.3s ease,\\n    border-color 0.3s ease,\\n    color 0.3s ease,\\n    transform 0.2s ease,\\n    box-shadow 0.2s ease;\\n}\\n.mini-btn:hover {\\n  transform: translateY(-1px);\\n  box-shadow: var(--settings-shadow-inset), var(--settings-shadow-minibtn-hover);\\n} /*  */\\n.mini-btn.primary {\\n  background: var(--settings-bg-btn-primary);\\n  border-color: var(--settings-border-btn-primary);\\n  color: var(--settings-text-primary-btn);\\n} /*  */\\n.mini-btn.subtle {\\n  background: var(--settings-bg-btn-subtle);\\n  border-color: var(--settings-border-input);\\n} /*  */\\n\\n/*  */\\n.vars {\\n  display: flex;\\n  flex-direction: column;\\n  gap: 8px;\\n} /*  */\\n\\n.var-row {\\n  /*  */\\n  display: grid; /*  */\\n  grid-template-columns: 1fr minmax(120px, 1.2fr) auto; /*  /  /  */\\n  align-items: center; /*  */\\n  gap: 10px; /*  */\\n  padding: 8px 10px; /*  */\\n  border: 1px solid var(--border-soft);\\n  border-radius: 10px; /*  */\\n  background: var(--settings-bg-var-row);\\n  transition:\\n    background 0.3s ease,\\n    border-color 0.3s ease;\\n}\\n.var-key {\\n  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;\\n  font-size: 12px;\\n  color: var(--text-subtitle);\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n  transition: color 0.3s ease;\\n} /*  */\\n.var-editor {\\n  display: flex;\\n  align-items: center;\\n  gap: 8px;\\n} /*  */\\n\\n.ipt {\\n  /*  */\\n  width: 100%; /*  */\\n  padding: 8px 10px; /*  */\\n  border-radius: 8px; /*  */\\n  border: 1px solid var(--settings-border-input);\\n  background: var(--bg-solid);\\n  font-size: 12px; /*  */\\n  color: var(--settings-text-input);\\n  box-shadow: var(--settings-shadow-inset);\\n  transition:\\n    background 0.3s ease,\\n    border-color 0.3s ease,\\n    color 0.3s ease;\\n}\\n.ta {\\n  min-height: 64px;\\n  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;\\n} /* JSON  */\\n\\n.type-chip {\\n  /*  */\\n  font-size: 11px; /*  */\\n  color: var(--text-subtitle);\\n  background: var(--settings-bg-type-chip);\\n  border: 1px solid var(--settings-border-type-chip);\\n  border-radius: 999px; /*  */\\n  padding: 4px 8px; /*  */\\n  white-space: nowrap; /*  */\\n  transition:\\n    background 0.3s ease,\\n    border-color 0.3s ease,\\n    color 0.3s ease;\\n}\\n\\n/*  */\\n.switch {\\n  position: relative;\\n  width: 42px;\\n  height: 24px;\\n  display: inline-block;\\n} /*  */\\n.switch input {\\n  opacity: 0;\\n  width: 0;\\n  height: 0;\\n} /*  */\\n.switch .track {\\n  position: absolute;\\n  inset: 0;\\n  border-radius: 999px;\\n  background: var(--settings-bg-switch-track);\\n  box-shadow: var(--settings-shadow-inset);\\n  transition: background 0.2s ease;\\n} /*  */\\n.switch .track::after {\\n  content: '';\\n  position: absolute;\\n  top: 3px;\\n  left: 3px;\\n  width: 18px;\\n  height: 18px;\\n  border-radius: 50%;\\n  background: var(--settings-bg-switch-handle);\\n  box-shadow: var(--settings-shadow-switch-handle);\\n  transition:\\n    transform 0.2s ease,\\n    background 0.3s ease;\\n} /*  */\\n.switch input:checked + .track {\\n  background: var(--settings-bg-switch-checked);\\n} /*  */\\n.switch input:checked + .track::after {\\n  transform: translateX(18px);\\n} /*  */\\n\\n.hint {\\n  font-size: 11px;\\n  color: var(--text-normal);\\n  transition: color 0.3s ease;\\n} /* JSON  */\\n.hint.ok {\\n  color: var(--settings-text-hint-ok);\\n} /*  */\\n.hint.bad {\\n  color: var(--settings-text-hint-bad);\\n} /*  */\\n\\n.placeholder {\\n  padding: 10px;\\n  color: var(--text-normal);\\n  font-size: 12px;\\n  border: 1px dashed var(--border-dashed);\\n  border-radius: 10px;\\n  background: var(--bg-placeholder);\\n  transition:\\n    background 0.3s ease,\\n    border-color 0.3s ease,\\n    color 0.3s ease;\\n} /*  */\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/.pnpm/css-loader@7.1.2_webpack@5.102.1/node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.json-root[data-v-6fc9ef75]{font-size:12px;color:var(--settings-text-input);transition:color 0.3s ease}.json-line[data-v-6fc9ef75]{position:relative;display:flex;align-items:center;gap:6px;padding:2px 6px;border-radius:6px;transition:background 0.2s ease}.json-line[data-v-6fc9ef75]:hover{background:var(--json-hover-bg)}.json-children[data-v-6fc9ef75]{border-left:1px dashed var(--json-tree-line);transition:border-color 0.3s ease}.key[data-v-6fc9ef75]{color:var(--json-key-color);font-weight:700;transition:color 0.3s ease}.colon[data-v-6fc9ef75]{color:var(--text-normal);transition:color 0.3s ease}.brace[data-v-6fc9ef75]{color:var(--text-normal);transition:color 0.3s ease}.val.string[data-v-6fc9ef75]{color:var(--json-val-string)}.val.number[data-v-6fc9ef75]{color:var(--json-val-number)}.val.boolean[data-v-6fc9ef75]{color:var(--json-val-boolean)}.val.null[data-v-6fc9ef75]{color:var(--json-val-null)}.val.undefined[data-v-6fc9ef75]{color:var(--json-val-null)}.json-root[data-v-6fc9ef75]{overflow:clip;contain:layout paint;min-height:0}.json-children[data-v-6fc9ef75]{overflow:clip;contain:paint}\n`, \"\",{\"version\":3,\"sources\":[\"webpack://./src/ERA/ui/template/PrettyJsonViewer.vue\"],\"names\":[],\"mappings\":\"AAkIA,4BACE,cAAe,CACf,gCAAiC,CACjC,0BACF,CACA,4BACE,iBAAkB,CAClB,YAAa,CACb,kBAAmB,CACnB,OAAQ,CACR,eAAgB,CAChB,iBAAkB,CAClB,+BACF,CACA,kCACE,+BACF,CACA,gCACE,4CAA6C,CAC7C,iCACF,CAEA,sBACE,2BAA4B,CAC5B,eAAgB,CAChB,0BACF,CACA,wBACE,wBAAyB,CACzB,0BACF,CACA,wBACE,wBAAyB,CACzB,0BACF,CAEA,6BACE,4BACF,CACA,6BACE,4BACF,CACA,8BACE,6BACF,CACA,2BACE,0BACF,CACA,gCACE,0BACF,CAGA,4BAEE,aAAc,CACd,oBAAqB,CACrB,YACF,CAEA,gCAEE,aAAc,CACd,aACF\",\"sourcesContent\":[\"<template>\\n  <div class=\\\"json-root\\\">\\n    <div class=\\\"json-line\\\">\\n      <span class=\\\"brace\\\">{{ rootOpen }}</span>\\n      <!-- { / [ -->\\n    </div>\\n\\n    <div class=\\\"json-children\\\">\\n      <template v-if=\\\"isPlainObjectOrArray\\\">\\n        <JsonNode\\n          v-for=\\\"(v, k) in value\\\"\\n          :key=\\\"String(k)\\\"\\n          :k=\\\"String(k)\\\"\\n          :v=\\\"v\\\"\\n          :path=\\\"String(k)\\\"\\n          :level=\\\"1\\\"\\n          :default-collapsed=\\\"defaultCollapsed\\\"\\n          :max-depth=\\\"maxDepth\\\"\\n        />\\n      </template>\\n\\n      <template v-else>\\n        <div class=\\\"json-line\\\" :style=\\\"{ paddingLeft: 1 * 14 + 'px' }\\\">\\n          <span class=\\\"key\\\">value</span><span class=\\\"colon\\\">:</span>\\n          <span class=\\\"val\\\" :class=\\\"primitiveType\\\">{{ primitiveText }}</span>\\n        </div>\\n      </template>\\n    </div>\\n\\n    <div class=\\\"json-line\\\">\\n      <span class=\\\"brace\\\">{{ rootClose }}</span>\\n      <!-- } / ] -->\\n    </div>\\n  </div>\\n</template>\\n\\n<script setup lang=\\\"ts\\\">\\nimport { computed } from 'vue'; // \\nimport { Logger } from '../../utils/log';\\nimport JsonNode from './JsonNode.vue'; //   SFC \\n\\nconst logger = new Logger();\\n\\nconst props = withDefaults(\\n  defineProps<{\\n    value: any; //  JSON \\n    defaultCollapsed?: boolean; // \\n    maxDepth?: number; // \\n  }>(),\\n  {\\n    defaultCollapsed: true, // \\n    maxDepth: 3, //  3 \\n  },\\n);\\n\\nconst isPlainObjectOrArray = computed(() => {\\n  const v = props.value; // \\n  const result = v !== null && typeof v === 'object'; // /\\n  logger.debug('isPlainObjectOrArray', `: ${result}${result ? '' : ''}`, {\\n    : v,\\n  });\\n  return result;\\n}); // /\\n\\nconst primitiveType = computed(() => {\\n  const v = props.value; // \\n  let result: string;\\n  if (v === null) {\\n    result = 'null';\\n  } else if (Array.isArray(v)) {\\n    result = 'array'; //  isPlainObjectOrArray \\n  } else {\\n    const t = typeof v; // \\n    result = t === 'undefined' ? 'undefined' : t;\\n  }\\n  logger.debug('primitiveType', `: ${result}`, { : v });\\n  return result;\\n}); // \\n\\nconst primitiveText = computed(() => {\\n  const v = props.value; // \\n  let result: string;\\n  switch (\\n    primitiveType.value // \\n  ) {\\n    case 'string':\\n      result = JSON.stringify(v); // \\n      break;\\n    case 'number':\\n      result = String(v); // \\n      break;\\n    case 'boolean':\\n      result = v ? 'true' : 'false'; // \\n      break;\\n    case 'null':\\n      result = 'null'; // null\\n      break;\\n    case 'undefined':\\n      result = 'undefined'; // undefined\\n      break;\\n    case 'bigint':\\n      result = String(v) + 'n'; // bigint\\n      break;\\n    case 'symbol':\\n      result = String(v); // symbol\\n      break;\\n    case 'function':\\n      result = '()'; // \\n      break;\\n    default:\\n      result = ''; // \\n      break;\\n  }\\n  logger.debug('primitiveText', `: \\\"${result}\\\"`, {\\n    : v,\\n    : primitiveType.value,\\n  });\\n  return result;\\n}); // \\n\\nconst isArrayRoot = computed(() => {\\n  const result = Array.isArray(props.value);\\n  logger.debug('isArrayRoot', `: ${result}`, { : props.value });\\n  return result;\\n}); // \\nconst rootOpen = computed(() => (isArrayRoot.value ? '[' : '{')); // \\nconst rootClose = computed(() => (isArrayRoot.value ? ']' : '}')); // \\n</script>\\n\\n<style scoped>\\n.json-root {\\n  font-size: 12px;\\n  color: var(--settings-text-input);\\n  transition: color 0.3s ease;\\n}\\n.json-line {\\n  position: relative;\\n  display: flex;\\n  align-items: center;\\n  gap: 6px;\\n  padding: 2px 6px;\\n  border-radius: 6px;\\n  transition: background 0.2s ease;\\n}\\n.json-line:hover {\\n  background: var(--json-hover-bg);\\n}\\n.json-children {\\n  border-left: 1px dashed var(--json-tree-line);\\n  transition: border-color 0.3s ease;\\n}\\n\\n.key {\\n  color: var(--json-key-color);\\n  font-weight: 700;\\n  transition: color 0.3s ease;\\n}\\n.colon {\\n  color: var(--text-normal);\\n  transition: color 0.3s ease;\\n}\\n.brace {\\n  color: var(--text-normal);\\n  transition: color 0.3s ease;\\n}\\n\\n.val.string {\\n  color: var(--json-val-string);\\n}\\n.val.number {\\n  color: var(--json-val-number);\\n}\\n.val.boolean {\\n  color: var(--json-val-boolean);\\n}\\n.val.null {\\n  color: var(--json-val-null);\\n}\\n.val.undefined {\\n  color: var(--json-val-null);\\n}\\n\\n/* ===[]  0  === */\\n.json-root {\\n  /* JSON  */\\n  overflow: clip; /*  hidden  */\\n  contain: layout paint; /*  */\\n  min-height: 0; /*  flex  min-content  */\\n}\\n\\n.json-children {\\n  /*  */\\n  overflow: clip; /*  */\\n  contain: paint; /*  */\\n}\\n</style>\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = z;","/**\n * @file ERA  - \n * @description\n *  ERA \n *  `chat`  ERA \n *\n * ****:\n * ERA  `chat` \n * 1. ** (ERAMetaData)**:  `EditLogs`  `SelectedMks`\n * 2. ** (stat_data)**:  AI / `player``world_state` \n *\n * \n * ```json\n * {\n *   \"ERAMetaData\": {\n *     \"EditLogs\": { ... },\n *     \"SelectedMks\": [ ... ]\n *   },\n *   \"stat_data\": {\n *     \"player\": { \"hp\": 100, \"gold\": 50 },\n *     \"world_state\": { ... }\n *   }\n * }\n * ```\n * \n * 1. **** bug\n * 2. ****\n * 3. ****\n */\n\n'use strict';\n\nimport { z } from 'zod';\n\n/**\n * @constant {z.ZodObject} SettingsSchema\n * @description\n *  Zod schema\n */\nexport const SettingsSchema = z.object({\n  ai: z.boolean().default(true),\n  : z.string().default('<StatusPlaceHolderImpl/>'),\n  : z.boolean().default(true),\n  : z.boolean().default(false),\n  : z.boolean().default(false),\n  : z.number().default(2),\n  : z.boolean().default(false),\n  : z.boolean().default(false),\n});\n\n/**\n * @type {EraConfig}\n * @description ERA \n */\nexport type EraConfig = z.infer<typeof SettingsSchema>;\n\n/**\n * @constant {object} CHAT_SCOPE\n * @description\n *  `getVariables`  `replaceVariables`  `scope` \n * **Chat**\n * ERA \n */\nexport const CHAT_SCOPE = { type: 'chat' as const };\n\n/**\n * @constant {string} META_DATA_PATH\n * @description  `chat`  ERA ****\n */\nexport const META_DATA_PATH = 'ERAMetaData';\n\n/**\n * @constant {string} STAT_DATA_PATH\n * @description  `chat` ****\n */\nexport const STAT_DATA_PATH = 'stat_data';\n\n/**\n * @constant {string} LOGS_PATH\n * @description\n *  `ERAMetaData` **Edit Logs** `\"EditLogs\"`\n * `EditLogs` **MK**\n * \n *\n * @example\n * // chat.ERAMetaData.EditLogs \n * \"era_mk_1759246942209_jipmrj\": [\n *   { \"op\": \"insert\", \"path\": \"testData.inventory\", \"value_new\": { \"gold\": 100, \"slots\": [\"sword\", \"shield\"] } },\n *   { \"op\": \"update\", \"path\": \"player.hp\", \"value_old\": 90, \"value_new\": 100 }\n * ]\n */\nexport const LOGS_PATH = 'EditLogs';\n\n/**\n * @constant {string} SEL_PATH\n * @description\n *  `ERAMetaData` **Selected Message Keys** `\"SelectedMks\"`\n * `SelectedMks` ** ID** MK\n *  ERA \n *  `SelectedMks`  MK\n *\n * @example\n * // chat.ERAMetaData.SelectedMks\n * [ , \"era_mk_greeting\", \"era_mk_abc123\", , \"era_mk_xyz789\"]\n */\nexport const SEL_PATH = 'SelectedMks';\n\n/**\n * @constant {string} ERA_DATA_TAG\n * @description\n *  ERA  MK XML \n * e.g., `<era_data>{...}</era_data>`\n */\nexport const ERA_DATA_TAG = 'era_data';\n\n/**\n * @constant {RegExp} ERA_DATA_REGEX\n * @description\n *  `<era_data>` \n *  `message_key.ts`  `message_utils.ts` \n */\nexport const ERA_DATA_REGEX = new RegExp(`<${ERA_DATA_TAG}>({.*?})<\\\\/${ERA_DATA_TAG}>`);\n\n/**\n * @constant {object} ERA_API_EVENTS\n * @description\n *  `eventEmit`  API \n * \n */\nexport const ERA_API_EVENTS = {\n  INSERT_BY_OBJECT: 'era:insertByObject',\n  UPDATE_BY_OBJECT: 'era:updateByObject',\n  INSERT_BY_PATH: 'era:insertByPath',\n  UPDATE_BY_PATH: 'era:updateByPath',\n  DELETE_BY_OBJECT: 'era:deleteByObject',\n  DELETE_BY_PATH: 'era:deleteByPath',\n  /**  */\n  GET_CURRENT_VARS: 'era:getCurrentVars',\n  /**  MK  */\n  GET_SNAPSHOT_AT_MK: 'era:getSnapshotAtMk',\n  /**  MK  */\n  GET_SNAPSHOTS_BETWEEN_MKS: 'era:getSnapshotsBetweenMks',\n  /**  message_id  */\n  GET_SNAPSHOT_AT_MID: 'era:getSnapshotAtMId',\n  /**  message_id  */\n  GET_SNAPSHOTS_BETWEEN_MIDS: 'era:getSnapshotsBetweenMIds',\n  /**  ERA  `writeDone`  */\n  REQUEST_WRITE_DONE: 'era:requestWriteDone',\n  /**  */\n  FORCE_SYNC: 'era:forceSync',\n} as const;\n\n/**\n * @constant {object} ERA_EVENT_EMITTER\n * @description  ERA ****\n */\nexport const ERA_EVENT_EMITTER = {\n  /**  */\n  WRITE_DONE: 'era:writeDone',\n  /** API */\n  API_WRITE: 'era:apiWrite',\n  /**  GET_...  API  */\n  VARS_QUERY_RESULT: 'era:queryResult',\n} as const;\n\n/**\n * \n * \n */\nexport interface ActionsTaken {\n  /**  `rollbackByMk`  */\n  rollback: boolean;\n  /**  `ApplyVarChange`  */\n  apply: boolean;\n  /**  `resyncStateOnHistoryChange`  */\n  resync: boolean;\n  /**  API  */\n  api: boolean;\n  /** API */\n  apiWrite: boolean;\n  /**  */\n  editedResync: boolean;\n  /**  */\n  swipedRollback: boolean;\n}\n\n/**\n * `era:writeDone` \n */\nexport interface WriteDonePayload {\n  /**\n   * ** (Message Key)**\n   *  `ensureMkForLatestMessage` \n   */\n  mk: string;\n  /**\n   * ** ID**\n   */\n  message_id: number;\n  /**\n   * \n   */\n  is_user: boolean;\n  /**\n   * \n   */\n  actions: ActionsTaken;\n  /**\n   * ****** (Selected Message Keys)** \n   *  ID MK\n   *  ERA \n   */\n  selectedMks: (string | null)[];\n  /**\n   * ****`chat` ** (EditLogs)**\n   *  MK \n   */\n  editLogs: { [key: string]: any[] };\n  /**\n   * ****** (`stat_data`)** \n   * **** `$meta` \n   */\n  stat: any;\n  /**\n   * ******** `$meta`  `stat_data` \n   * \n   */\n  statWithoutMeta: any;\n  /**\n   *  `mk` \n   *  `mk`  1\n   * \n   */\n  consecutiveProcessingCount: number;\n}\n\n/**\n * `era:queryResult` \n */\nexport interface QueryResultItem {\n  mk: string;\n  message_id: number;\n  is_user: boolean;\n  stat: any;\n  statWithoutMeta: any;\n}\n\n/**\n * `era:queryResult` \n */\nexport interface QueryResultPayload {\n  /**  */\n  queryType:\n    | 'getCurrentVars'\n    | 'getSnapshotAtMk'\n    | 'getSnapshotsBetweenMks'\n    | 'getSnapshotAtMId'\n    | 'getSnapshotsBetweenMIds';\n  /**  detail  */\n  request: any;\n  /**  queryType */\n  result: QueryResultItem | QueryResultItem[];\n  /**\n   * ** (Selected Message Keys)** \n   */\n  selectedMks: (string | null)[];\n  /**\n   * `chat` ** (EditLogs)**\n   */\n  editLogs: { [key: string]: any[] };\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = _;","const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","/**\n * @file ERA  - ERA \n */\n\n'use strict';\n\nimport _ from 'lodash';\nimport { CHAT_SCOPE, META_DATA_PATH, STAT_DATA_PATH, SettingsSchema, EraConfig } from './constants';\nimport { ref, readonly, DeepReadonly, Ref } from 'vue';\n\ndeclare function getScriptId(): string;\n\n// ---  ---\n\n/**\n * @description \n * @internal\n */\nconst scriptSettingsRef: Ref<EraConfig> = ref(SettingsSchema.parse({}));\n\n/**\n * @description \n * @example\n * import { settings } from './utils/era_data';\n * if (settings.value.) { ... }\n */\nexport const settings: DeepReadonly<Ref<EraConfig>> = readonly(scriptSettingsRef);\n\n/**\n * @description \n * \n */\nexport function initEraSettings() {\n  const rawSettings = getVariables({ type: 'script', script_id: getScriptId() });\n  scriptSettingsRef.value = SettingsSchema.parse(rawSettings ?? {});\n}\n\n/**\n *  `$`  `$meta`, `$template`\n * \n * @param {any} obj - \n * @returns {any}  `$` \n */\nexport function removeMetaFields(obj: any): any {\n  // \n  if (!_.isObject(obj)) {\n    return obj;\n  }\n\n  // \n  const newObj = _.cloneDeep(obj);\n\n  function recurse(current: any) {\n    if (Array.isArray(current)) {\n      // \n      current.forEach(item => recurse(item));\n    } else if (_.isPlainObject(current)) {\n      // \n      for (const key in current) {\n        //  '$' \n        if (key.startsWith('$')) {\n          delete current[key];\n        } else {\n          // \n          recurse(current[key]);\n        }\n      }\n    }\n  }\n\n  recurse(newObj);\n  return newObj;\n}\n\n/**\n *  ERA \n * @returns {{meta: object, stat: object}} \n */\nexport function getEraData(): { meta: any; stat: any } {\n  const chatVars = getVariables(CHAT_SCOPE) || {};\n  const meta = _.get(chatVars, META_DATA_PATH, {});\n  const stat = _.get(chatVars, STAT_DATA_PATH, {});\n  return { meta, stat };\n}\n\n/**\n *  ERA  (stat_data)\n * @param {(currentStatData: any) => (any | Promise<any>)} updater -  stat_data  stat_data  ( async)\n */\nexport async function updateEraStatData(updater: (currentStatData: any) => any | Promise<any>) {\n  await updateVariablesWith(async v => {\n    const currentStat = _.get(v, STAT_DATA_PATH, {});\n    const newStat = await updater(currentStat);\n    _.set(v, STAT_DATA_PATH, newStat);\n    return v;\n  }, CHAT_SCOPE);\n}\n\n/**\n *  ERA  (ERAMetaData)\n * @param {(currentMetaData: any) => (any | Promise<any>)} updater -  ERAMetaData  ERAMetaData  ( async)\n */\nexport async function updateEraMetaData(updater: (currentMetaData: any) => any | Promise<any>) {\n  await updateVariablesWith(async v => {\n    const currentMeta = _.get(v, META_DATA_PATH, {});\n    const newMeta = await updater(currentMeta);\n    _.set(v, META_DATA_PATH, newMeta);\n    return v;\n  }, CHAT_SCOPE);\n}\n\n/**\n * \n * @param {(currentSettings: EraConfig) => EraConfig | Promise<EraConfig>} updater\n * @returns {Promise<void>}\n */\nexport async function updateScriptSettings(\n  updater: (currentSettings: EraConfig) => EraConfig | Promise<EraConfig>,\n): Promise<void> {\n  await updateVariablesWith(\n    async rawSettings => {\n      const currentSettings = SettingsSchema.parse(rawSettings ?? {});\n      const newSettings = await updater(currentSettings);\n      // \n      scriptSettingsRef.value = newSettings;\n      return newSettings;\n    },\n    { type: 'script', script_id: getScriptId() },\n  );\n}\n","/**\n * @file ERA  -  (V3 - )\n */\n\n'use strict';\n\nimport { settings } from './era_data';\n\n// ---  (V3) ---\n\n/**\n * @constant {string} DEBUG_CONFIG_LS_KEY\n * @description  localStorage \n */\nconst DEBUG_CONFIG_LS_KEY = 'era_debug_config';\n\nlet enabledPatterns: RegExp[] = [];\nlet disabledPatterns: RegExp[] = [];\n\n/**\n * @typedef {object} DebugConfig\n * @property {string[]} enabled - \n * @property {string[]} disabled - \n */\n\n/**\n *  localStorage \n */\nfunction loadDebugConfig() {\n  try {\n    const configStr = globalThis.localStorage?.getItem(DEBUG_CONFIG_LS_KEY) || '{\"enabled\":[],\"disabled\":[]}';\n    /** @type {DebugConfig} */\n    const config = JSON.parse(configStr);\n\n    const toRegex = (p: string) => new RegExp(`^${p.replace(/\\*/g, '.*?')}$`);\n    enabledPatterns = (config.enabled || []).map(toRegex);\n    disabledPatterns = (config.disabled || []).map(toRegex);\n  } catch (e) {\n    console.error('ERA-Log: ', e);\n    enabledPatterns = [];\n    disabledPatterns = [];\n  }\n}\n\n/**\n *  debug \n * @param {string} moduleName - \n * @returns {boolean} -  true\n */\nfunction isDebugEnabled(moduleName: string): boolean {\n  if (!moduleName) return false;\n\n  //  1: \n  if (disabledPatterns.some(re => re.test(moduleName))) {\n    return false;\n  }\n\n  //  2: \n  if (enabledPatterns.length === 0) {\n    return false;\n  }\n\n  //  3: \n  if (enabledPatterns.some(re => re.test(moduleName))) {\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * \n * @param {{ enabled: string[], disabled: string[] }} newConfig\n */\nfunction updateConfig(newConfig: { enabled: string[]; disabled: string[] }) {\n  const uniqueConfig = {\n    enabled: [...new Set(newConfig.enabled)],\n    disabled: [...new Set(newConfig.disabled)],\n  };\n  globalThis.localStorage?.setItem(DEBUG_CONFIG_LS_KEY, JSON.stringify(uniqueConfig));\n  loadDebugConfig();\n  console.log(`%cERA-Log`, 'color: #3498db; font-weight: bold;', {\n    ' (Enabled)': uniqueConfig.enabled,\n    ' (Disabled)': uniqueConfig.disabled,\n  });\n}\n\n// \nloadDebugConfig();\n\n// \nif (typeof globalThis !== 'undefined') {\n  const eraDebug = {\n    /**\n     * \n     * \n     * @param {string} pattern -  * \n     * @example\n     * //  core \n     * eraDebug.add('core*')\n     */\n    add(pattern: string) {\n      const configStr = globalThis.localStorage?.getItem(DEBUG_CONFIG_LS_KEY) || '{\"enabled\":[],\"disabled\":[]}';\n      const config: { enabled: string[]; disabled: string[] } = JSON.parse(configStr);\n      const enabled = new Set(config.enabled || []);\n      const disabled = new Set(config.disabled || []);\n\n      enabled.add(pattern);\n      disabled.delete(pattern);\n\n      updateConfig({ enabled: Array.from(enabled), disabled: Array.from(disabled) });\n    },\n\n    /**\n     * \n     * \n     * @param {string} pattern -  * \n     * @example\n     * //  core-key \n     * eraDebug.remove('core-key')\n     */\n    remove(pattern: string) {\n      const configStr = globalThis.localStorage?.getItem(DEBUG_CONFIG_LS_KEY) || '{\"enabled\":[],\"disabled\":[]}';\n      const config: { enabled: string[]; disabled: string[] } = JSON.parse(configStr);\n      const enabled = new Set(config.enabled || []);\n      const disabled = new Set(config.disabled || []);\n\n      disabled.add(pattern);\n      enabled.delete(pattern);\n\n      updateConfig({ enabled: Array.from(enabled), disabled: Array.from(disabled) });\n    },\n\n    /**\n     * \n     */\n    status() {\n      const configStr = globalThis.localStorage?.getItem(DEBUG_CONFIG_LS_KEY) || '{\"enabled\":[],\"disabled\":[]}';\n      const config = JSON.parse(configStr);\n      console.log(`%cERA-Log:`, 'color: #3498db; font-weight: bold;', config);\n    },\n\n    /**\n     * \n     */\n    clear() {\n      updateConfig({ enabled: [], disabled: [] });\n    },\n  };\n\n  (globalThis as any).eraDebug = eraDebug;\n}\n\n// --- Logger  ---\n\n/**\n * @class Logger\n * @description  ERA \n *\n * ****:\n * 1. ****:  `eraDebug('...')` / `debug` \n * 2. ****:  `ERA` \n * 3. ****:  logger \n *    : `const logger = new Logger();`\n */\nexport const logContext = {\n  mk: '',\n};\n\nexport class Logger {\n  private moduleName: string;\n\n  /**\n   *  Logger \n   * @param moduleName -  Webpack \n   */\n  constructor(moduleName?: string) {\n    //  Webpack \n    this.moduleName = moduleName || this._getModuleNameFromStack() || 'unknown';\n  }\n\n  private _getModuleNameFromStack(): string | null {\n    try {\n      const stack = new Error().stack || '';\n      //  log.ts \n      const callerLine = stack\n        .split('\\n')\n        .find(\n          line =>\n            (line.includes(`/src/ERA/`) ||\n              line.includes(`/dist/ERA/`) ||\n              line.includes(`\\\\src\\\\ERA\\\\`) ||\n              line.includes(`\\\\dist\\\\ERA\\\\`)) &&\n            !line.includes('/utils/log.ts'),\n        );\n\n      if (!callerLine) {\n        return null;\n      }\n\n      // \n      const match = callerLine.match(new RegExp(`(src|dist)[\\\\\\\\/]ERA[\\\\\\\\/]([^?:]+)`));\n\n      if (!match || !match[2]) {\n        return null;\n      }\n\n      const path = match[2];\n\n      //  /index \n      return path\n        .replace(/\\\\/g, '/')\n        .replace(/\\.(vue|ts|js)$/, '')\n        .replace(/\\/index$/, '');\n    } catch (e) {\n      console.error('ERA-Log-Debug: ', e);\n      return null;\n    }\n  }\n\n  private formatMessage(funcName: string, message: any): string {\n    const mkString = logContext.mk ? `${logContext.mk}` : '';\n    return `ERA${mkString}${this.moduleName}${funcName}${String(message)}`;\n  }\n\n  debug(funcName: string, message: any, obj?: any) {\n    if (!isDebugEnabled(this.moduleName)) {\n      return;\n    }\n\n    const formattedMessage = this.formatMessage(funcName, message);\n    if (obj !== undefined) {\n      console.debug(formattedMessage, obj);\n    } else {\n      console.debug(formattedMessage);\n    }\n  }\n\n  log(funcName: string, message: any, obj?: any) {\n    const formattedMessage = this.formatMessage(funcName, message);\n    if (obj !== undefined) {\n      console.log(`%c${formattedMessage}`, 'color: #3498db;', obj);\n    } else {\n      console.log(`%c${formattedMessage}`, 'color: #3498db;');\n    }\n  }\n\n  warn(funcName: string, message: any, obj?: any) {\n    const formattedMessage = this.formatMessage(funcName, message);\n    if (obj !== undefined) {\n      console.warn(`%c${formattedMessage}`, 'color: #f39c12;', obj);\n    } else {\n      console.warn(`%c${formattedMessage}`, 'color: #f39c12;');\n    }\n    if (settings.value.) {\n      toastr.warning(formattedMessage);\n    }\n  }\n\n  error(funcName: string, message: any, errorObj?: any) {\n    const formattedMessage = this.formatMessage(funcName, message);\n    if (errorObj !== undefined) {\n      console.error(`%c${formattedMessage}`, 'color: #e74c3c; font-weight: bold;', errorObj);\n    } else {\n      console.error(`%c${formattedMessage}`, 'color: #e74c3c; font-weight: bold;');\n    }\n    if (settings.value.) {\n      toastr.error(formattedMessage);\n    }\n  }\n}\n","'use strict';\n\nimport { ERA_API_EVENTS, ERA_EVENT_EMITTER } from '../utils/constants';\nimport { Logger } from '../utils/log';\n\nconst logger = new Logger();\n\n/**\n * @description \n */\nexport const EVENT_GROUPS = {\n  INIT: [tavern_events.APP_READY],\n  SYNC: [\n    'manual_write',\n    ERA_EVENT_EMITTER.API_WRITE,\n    tavern_events.MESSAGE_RECEIVED,\n    tavern_events.MESSAGE_DELETED,\n    tavern_events.MESSAGE_SWIPED,\n    tavern_events.CHAT_CHANGED,\n    'manual_sync',\n    'manual_full_sync',\n    /**  message_updated  generation_started  */\n    'combo_edit_and_continue',\n  ],\n  API: Object.values(ERA_API_EVENTS),\n  /** MK */\n  UPDATE_MK_ONLY: [tavern_events.MESSAGE_SENT],\n  /**  */\n  COLLISION_DETECTORS: [tavern_events.GENERATION_STARTED],\n  /**  */\n  COMBO_STARTERS: [tavern_events.MESSAGE_UPDATED],\n  /**  */\n  DIRECTED_SYNC: [\n    tavern_events.MESSAGE_EDITED,\n    /**  swiped  generation_started  */\n    'combo_swipe_and_regenerate',\n  ],\n};\n\n/**\n * @constant {Map<string, string>} EVENT_COLLISION_MAP\n * @description\n * \n *  key  value \n * \n *\n * @example\n * //  `MESSAGE_SWIPED`  `GENERATION_STARTED`\n * // \n * new Map([\n *   [tavern_events.MESSAGE_SWIPED, { next: tavern_events.GENERATION_STARTED, maxInterval: 500 }]\n * ])\n */\nexport const EVENT_COLLISION_MAP = new Map<string, { next: string; maxInterval: number }>([]);\n\n/**\n * @constant {Map<string, { next: string; resultType: string; maxInterval: number }>} EVENT_COMBO_MAP\n * @description\n * \n *  key  `next` \n *  `resultType` \n *\n * @example\n * // AI `MESSAGE_UPDATED`  `GENERATION_STARTED`\n * //  `combo_sync` \n * new Map([\n *   [tavern_events.MESSAGE_UPDATED, { next: tavern_events.GENERATION_STARTED, resultType: 'combo_sync', maxInterval: 2100 }]\n * ])\n */\nexport const EVENT_COMBO_MAP = new Map<string, { next: string; resultType: string; maxInterval: number }>([\n  [\n    tavern_events.MESSAGE_UPDATED,\n    { next: tavern_events.GENERATION_STARTED, resultType: 'combo_edit_and_continue', maxInterval: 1600 },\n  ],\n  [\n    tavern_events.MESSAGE_SWIPED,\n    { next: tavern_events.GENERATION_STARTED, resultType: 'combo_swipe_and_regenerate', maxInterval: 600 },\n  ],\n]);\n\n/**\n * @constant {Map<string, number>} EVENT_DEBOUNCE_MAP\n * @description\n * \n * \n * \n * \n *\n * @example\n * //  MESSAGE_SWIPED  GENERATION_STARTED\n * new Map([\n *   [tavern_events.MESSAGE_SWIPED, 500]\n * ])\n */\nexport const EVENT_DEBOUNCE_MAP = new Map<string, number>([\n  [tavern_events.MESSAGE_SWIPED, 500], // \n  [tavern_events.MESSAGE_UPDATED, 1500], // \n]);\n\n/**\n * @interface EventJob\n * @description \n */\nexport interface EventJob {\n  type: string;\n  detail?: any;\n  timestamp: number;\n}\n\n/**\n * \n * @param {string} eventType - \n * @returns {string}  ('INIT', 'SYNC', 'API', 'UPDATE_MK_ONLY', 'UNKNOWN')\n */\nexport function getEventGroup(eventType: string): string {\n  //  as string[]  TypeScript  'as const' \n  if ((EVENT_GROUPS.INIT as string[]).includes(eventType)) return 'INIT';\n  if ((EVENT_GROUPS.SYNC as string[]).includes(eventType)) return 'SYNC';\n  if ((EVENT_GROUPS.API as string[]).includes(eventType)) return 'API';\n  if ((EVENT_GROUPS.UPDATE_MK_ONLY as string[]).includes(eventType)) return 'UPDATE_MK_ONLY';\n  if ((EVENT_GROUPS.COLLISION_DETECTORS as string[]).includes(eventType)) return 'COLLISION_DETECTORS';\n  if ((EVENT_GROUPS.COMBO_STARTERS as string[]).includes(eventType)) return 'COMBO_STARTERS';\n  if ((EVENT_GROUPS.DIRECTED_SYNC as string[]).includes(eventType)) return 'DIRECTED_SYNC';\n  return 'UNKNOWN';\n}\n\n/**\n * ****\n * \n * @param {EventJob[]} batchToProcess - \n * @returns {EventJob[]} - \n */\nexport function mergeEventBatch(batchToProcess: EventJob[]): EventJob[] {\n  const originalEvents = _.cloneDeep(batchToProcess);\n  const finalJobs: EventJob[] = [];\n\n  //  for...of \n  for (const currentJob of batchToProcess) {\n    // \n    if (finalJobs.length === 0) {\n      finalJobs.push(currentJob);\n      continue; // \n    }\n\n    const prevJob = finalJobs[finalJobs.length - 1];\n    const timeDifference = currentJob.timestamp - prevJob.timestamp;\n\n    // 1. \n    const comboRule = EVENT_COMBO_MAP.get(prevJob.type);\n    if (comboRule && currentJob.type === comboRule.next) {\n      if (timeDifference <= comboRule.maxInterval) {\n        logger.debug(\n          'mergeEventBatch',\n          `: ${prevJob.type}  ${currentJob.type} (: ${timeDifference}ms <= ${comboRule.maxInterval}ms) ${comboRule.resultType} `,\n        );\n        finalJobs.pop(); // \n        finalJobs.push({ type: comboRule.resultType, timestamp: currentJob.timestamp, detail: currentJob.detail });\n        continue;\n      } else {\n        logger.debug(\n          'mergeEventBatch',\n          `: ${prevJob.type}  ${currentJob.type} (: ${timeDifference}ms > ${comboRule.maxInterval}ms)`,\n        );\n      }\n    }\n\n    // 2. \n    const collisionRule = EVENT_COLLISION_MAP.get(prevJob.type);\n    if (collisionRule && currentJob.type === collisionRule.next) {\n      if (timeDifference <= collisionRule.maxInterval) {\n        logger.debug(\n          'mergeEventBatch',\n          `: ${prevJob.type}  ${currentJob.type} (: ${timeDifference}ms <= ${collisionRule.maxInterval}ms)`,\n        );\n        finalJobs.pop(); // \n        continue; // \n      } else {\n        logger.debug(\n          'mergeEventBatch',\n          `: ${prevJob.type}  ${currentJob.type} (: ${timeDifference}ms > ${collisionRule.maxInterval}ms)`,\n        );\n      }\n    }\n\n    // 3. \n    const prevGroup = getEventGroup(prevJob.type);\n    const currentGroup = getEventGroup(currentJob.type);\n\n    //  if \n    const areInSameGroup = prevGroup === currentGroup;\n    const isMergeableGroup = prevGroup === 'SYNC';\n\n    // \n    if (areInSameGroup && isMergeableGroup) {\n      // \n      finalJobs[finalJobs.length - 1] = currentJob;\n    } else {\n      // \n      finalJobs.push(currentJob);\n    }\n  }\n  // \n  const filteredJobs = finalJobs.filter(job => {\n    const group = getEventGroup(job.type);\n    const isOrphanedDetector = group === 'COLLISION_DETECTORS';\n    const isOrphanedComboStarter = group === 'COMBO_STARTERS';\n    if (isOrphanedDetector || isOrphanedComboStarter) {\n      logger.debug('mergeEventBatch', `: ${job.type}`);\n    }\n    return !isOrphanedDetector && !isOrphanedComboStarter;\n  });\n\n  // \n  logger.debug('mergeEventBatch', `: ${originalEvents.length} -> ${filteredJobs.length}`, {\n    before: originalEvents.map((e: EventJob) => e.type),\n    after: filteredJobs.map((e: EventJob) => e.type),\n  });\n\n  return filteredJobs;\n}\n","/**\n * @file ERA  - \n */\n\n'use strict';\n\nimport { Logger } from './log';\n\nconst logger = new Logger();\n\nconst ESCAPE_MAP: { [key: string]: string } = {\n  '.': '__DOT__',\n  '\"': '__DQUOTE__',\n  \"'\": '__SQUOTE__',\n};\n\nconst UNESCAPE_MAP: { [key: string]: string } = _.invert(ESCAPE_MAP);\n\nconst escapeRegex = new RegExp(Object.keys(ESCAPE_MAP).map(_.escapeRegExp).join('|'), 'g');\nconst unescapeRegex = new RegExp(Object.values(ESCAPE_MAP).map(_.escapeRegExp).join('|'), 'g');\n\n/**\n * \n * @param data - \n * @returns - \n */\nexport function escapeEraData<T>(data: T): T {\n  if (Array.isArray(data)) {\n    return data.map(item => escapeEraData(item)) as any;\n  }\n  if (_.isPlainObject(data)) {\n    const newObj: { [key: string]: any } = {};\n    for (const key in data) {\n      if (Object.prototype.hasOwnProperty.call(data, key)) {\n        const escapedKey = key.replace(escapeRegex, match => ESCAPE_MAP[match]);\n        newObj[escapedKey] = escapeEraData((data as any)[key]);\n      }\n    }\n    return newObj as any;\n  }\n  if (typeof data === 'string') {\n    return data.replace(escapeRegex, match => ESCAPE_MAP[match]) as any;\n  }\n  return data;\n}\n\n/**\n * \n * @param data - \n * @returns - \n */\nexport function unescapeEraData<T>(data: T): T {\n  if (Array.isArray(data)) {\n    return data.map(item => unescapeEraData(item)) as any;\n  }\n  if (_.isPlainObject(data)) {\n    const newObj: { [key: string]: any } = {};\n    for (const key in data) {\n      if (Object.prototype.hasOwnProperty.call(data, key)) {\n        const unescapedKey = key.replace(unescapeRegex, match => UNESCAPE_MAP[match]);\n        newObj[unescapedKey] = unescapeEraData((data as any)[key]);\n      }\n    }\n    return newObj as any;\n  }\n  if (typeof data === 'string') {\n    return data.replace(unescapeRegex, match => UNESCAPE_MAP[match]) as any;\n  }\n  return data;\n}\n\n/**\n * Plain Object\n * nullDate  false\n * @param {*} v - \n * @returns {boolean}  true false\n */\nexport const isPO = (v: any): v is Record<string, any> => _.isPlainObject(v);\n\n/**\n * \n * \n * @param {*} v - \n * @returns {*} \n */\nexport function sanitizeArrays(v: any): any {\n  if (Array.isArray(v)) {\n    // \n    return v.map(e => (Array.isArray(e) || _.isPlainObject(e) ? JSON.stringify(e) : e));\n  } else if (_.isPlainObject(v)) {\n    // \n    const o: { [key: string]: any } = {};\n    for (const k in v) o[k] = sanitizeArrays(v[k]);\n    return o;\n  } else {\n    // \n    return v;\n  }\n}\n\n/**\n *  JSON \n * \n * @param {*} o - \n * @returns {string}  JSON \n */\nexport const J = (o: any): string => {\n  try {\n    return JSON.stringify(o, null, 2); //  2 \n  } catch (e: any) {\n    return `<<stringify: ${e?.message || e}>>`;\n  }\n};\n\n/**\n * \n *  `_.merge` \n * \n * @param {*} base - \n * @param {*} patch - \n * @returns {*} \n */\nexport function mergeReplaceArray(base: any, patch: any): any {\n  //  _.cloneDeep \n  return _.mergeWith(_.cloneDeep(base), _.cloneDeep(patch), (a: any, b: any) => {\n    // b\n    if (Array.isArray(a) || Array.isArray(b)) return b;\n    //  undefined  _.merge \n    return undefined;\n  });\n}\n\n/**\n *  `EditLog` \n * `EditLog` JSON\n * @param {*} raw -  `EditLog` \n * @returns {any[]}  `EditLog` \n */\nexport function parseEditLog(raw: any): any[] {\n  if (Array.isArray(raw)) return raw;\n  if (raw && typeof raw === 'object') return [raw]; // \n  if (typeof raw === 'string') {\n    const s = raw.replace(/^\\s*```(?:json)?\\s*|\\s*```\\s*$/g, ''); // \n    try {\n      const arr = JSON.parse(s);\n      return Array.isArray(arr) ? arr : [];\n    } catch {\n      return [];\n    }\n  }\n  return [];\n}\n\n/**\n * \n *\n * ****:\n *  `inString` \n * \n *\n * 1.  `\"``inString` \n * 2.  `inString`  `true` URL `//`  `/*` \n * 3.  `inString`  `false``//`, `/*`, `<!--`\n * 4. \n * 5. \n *\n * @param str - \n * @returns \n */\nfunction stripComments(str: string): string {\n  if (!str) return '';\n\n  let result = '';\n  let inString = false; // \n\n  for (let i = 0; i < str.length; i++) {\n    const char = str[i];\n\n    //  `\\\"`\n    if (char === '\"' && (i === 0 || str[i - 1] !== '\\\\')) {\n      inString = !inString;\n    }\n\n    // \n    if (inString) {\n      result += char;\n      continue;\n    }\n\n    // ---  ---\n    const nextChar = str[i + 1];\n\n    //  `//`\n    if (char === '/' && nextChar === '/') {\n      const endOfLine = str.indexOf('\\n', i + 2);\n      if (endOfLine === -1) {\n        // \n        break;\n      }\n      //  `i` \n      result += '\\n';\n      i = endOfLine;\n      continue;\n    }\n\n    //  `/* ... */`\n    if (char === '/' && nextChar === '*') {\n      const endOfComment = str.indexOf('*/', i + 2);\n      if (endOfComment === -1) {\n        // \n        break;\n      }\n      //  `i` \n      i = endOfComment + 1;\n      continue;\n    }\n\n    //  HTML  `<!-- ... -->`\n    if (char === '<' && str.substring(i, i + 4) === '<!--') {\n      const endOfComment = str.indexOf('-->', i + 4);\n      if (endOfComment === -1) {\n        // \n        break;\n      }\n      i = endOfComment + 2;\n      continue;\n    }\n\n    // \n    result += char;\n  }\n  return result;\n}\n\n/**\n *  JSON  JSONL \n *  AI \n *\n * @param {string} str - \n * @returns {any[]} \n */\nexport function parseJsonl(str: string): any[] {\n  const objects: any[] = [];\n  if (!str || typeof str !== 'string') {\n    return objects;\n  }\n\n  //  JSON \n  //  `/\\/\\/.*/g` URL \"https://...\" `//`\n  //  JSON `stripComments` \n  const strWithoutComments = stripComments(str);\n  const trimmedStr = strWithoutComments.trim();\n\n  let braceCount = 0; // \n  let startIndex = -1; //  JSON \n  let inString = false; // \n\n  for (let i = 0; i < trimmedStr.length; i++) {\n    const char = trimmedStr[i];\n\n    //  inString \n    if (char === '\"' && (i === 0 || trimmedStr[i - 1] !== '\\\\')) {\n      inString = !inString;\n    }\n\n    // \n    if (inString) continue;\n\n    if (char === '{') {\n      if (braceCount === 0) {\n        //  JSON \n        startIndex = i;\n      }\n      braceCount++;\n    } else if (char === '}') {\n      if (braceCount > 0) {\n        braceCount--;\n        if (braceCount === 0 && startIndex !== -1) {\n          //  JSON \n          const jsonString = trimmedStr.substring(startIndex, i + 1);\n          try {\n            const obj = JSON.parse(jsonString);\n            objects.push(obj);\n          } catch (e: any) {\n            // \n            logger.error(`JSONL : ${e?.message || e}. : ${jsonString}`, e);\n          }\n          // \n          startIndex = -1;\n        }\n      }\n    }\n  }\n  return objects;\n}\n","/**\n * @file ERA  - \n */\n\n'use strict';\n\nimport { Converter } from 'opencc-js';\n\n/**\n * \n * @returns {string} \n */\nexport function rnd(): string {\n  return Math.random().toString(36).slice(2, 8);\n}\n\n/**\n *  AI  Markdown  ```json ... ```\n * @param {string} s - \n * @returns {string} \n */\nexport function stripCodeFence(s: string): string {\n  if (!s) return s;\n  let t = String(s).trim();\n  t = t.replace(/^\\s*(?:```|~~~)\\[a-zA-Z0-9_-\\]*\\s*\\r?\\n/, '');\n  t = t.replace(/\\r?\\n(?:```|~~~)\\s*$/, '');\n  return t.trim();\n}\n\nexport type TagMatchMode = 'exact' | 'prefix' | 'suffix' | 'contains' | 'any';\n\n/**\n * \n * @param {string} [keyword=''] - \n * @param {TagMatchMode} [mode='exact'] - \n * @returns {RegExp} \n */\nexport function createTagRegex(keyword: string = '', mode: TagMatchMode = 'exact'): RegExp {\n  if (mode === 'any' || keyword === '*') {\n    return /([a-zA-Z][a-zA-Z0-9_]*)/;\n  }\n  //  keyword \n  const escapedKeyword = keyword.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n\n  switch (mode) {\n    case 'exact':\n      return new RegExp(`(${escapedKeyword})`);\n    case 'prefix':\n      return new RegExp(`(${escapedKeyword}[a-zA-Z0-9_]*)`);\n    case 'suffix':\n      return new RegExp(`([a-zA-Z0-9_]*${escapedKeyword})`);\n    case 'contains':\n    default:\n      return new RegExp(`([a-zA-Z0-9_]*${escapedKeyword}[a-zA-Z0-9_]*)`);\n  }\n}\n\n/**\n * \n * @param {string} text - \n * @param {RegExp} tagNameRegex - \n * @param {number} [endIndex=text.length] - \n * @returns {{startIndex: number, endIndex: number, content: string, tagName: string} | null}  null\n */\nfunction findTagFromEndByRegex(\n  text: string,\n  tagNameRegex: RegExp,\n  endIndex: number = text.length,\n): { startIndex: number; endIndex: number; content: string; tagName: string } | null {\n  const closeTagRegex = new RegExp(`</${tagNameRegex.source}>`, 'g');\n  let lastMatch = null;\n  let currentMatch;\n\n  // 1.  endIndex \n  while ((currentMatch = closeTagRegex.exec(text)) !== null) {\n    if (currentMatch.index < endIndex) {\n      lastMatch = currentMatch;\n    } else {\n      break;\n    }\n  }\n\n  if (!lastMatch) {\n    return null;\n  }\n\n  const tagName = lastMatch[1];\n  const closeIndex = lastMatch.index;\n\n  // 2. \n  const openTag = `<${tagName}>`;\n  const openIndex = text.lastIndexOf(openTag, closeIndex);\n\n  if (openIndex === -1) {\n    // \n    return findTagFromEndByRegex(text, tagNameRegex, closeIndex);\n  }\n\n  return {\n    startIndex: openIndex,\n    endIndex: closeIndex + `</${tagName}>`.length,\n    content: text.substring(openIndex + openTag.length, closeIndex),\n    tagName: tagName,\n  };\n}\n\n/**\n *  XML \n * @param {string} text - \n * @param {RegExp} tagNameRegex - \n * @returns {string} \n */\nexport function removeTagsByRegex(text: string, tagNameRegex: RegExp): string {\n  let processedText = text;\n  while (true) {\n    const found = findTagFromEndByRegex(processedText, tagNameRegex);\n    if (!found) {\n      break;\n    }\n    processedText = processedText.slice(0, found.startIndex) + processedText.slice(found.endIndex);\n  }\n  return processedText;\n}\n\n/**\n *  XML \n * @param {string} text - \n * @param {RegExp} [tagNameRegex] - \n * @returns {boolean}  true false\n */\nexport function containsXMLTags(text: string, tagNameRegex?: RegExp): boolean {\n  if (!text) {\n    return false;\n  }\n\n  const tagRegex = tagNameRegex ? new RegExp(`</?${tagNameRegex.source}>`) : /<\\/?\\s*[a-zA-Z][a-zA-Z0-9_]*\\s*>/;\n\n  let inSingleQuote = false;\n  let inDoubleQuote = false;\n  let backslashRun = 0;\n\n  for (let i = 0; i < text.length; i++) {\n    const ch = text[i];\n\n    if (ch === '\\\\') {\n      backslashRun += 1;\n      continue;\n    }\n\n    const isEscaped = backslashRun % 2 === 1;\n    backslashRun = 0;\n\n    if (ch === '\"' && !isEscaped && !inSingleQuote) {\n      inDoubleQuote = !inDoubleQuote;\n      continue;\n    }\n\n    if (ch === \"'\" && !isEscaped && !inDoubleQuote) {\n      inSingleQuote = !inSingleQuote;\n      continue;\n    }\n\n    if (ch === '<' && !isEscaped && !inSingleQuote && !inDoubleQuote) {\n      let j = i + 1;\n      let innerSingleQuote = false;\n      let innerDoubleQuote = false;\n      let innerBackslashRun = 0;\n\n      for (; j < text.length; j++) {\n        const innerCh = text[j];\n\n        if (innerCh === '\\\\') {\n          innerBackslashRun += 1;\n          continue;\n        }\n\n        const innerEscaped = innerBackslashRun % 2 === 1;\n        innerBackslashRun = 0;\n\n        if (innerCh === '\"' && !innerEscaped && !innerSingleQuote) {\n          innerDoubleQuote = !innerDoubleQuote;\n          continue;\n        }\n\n        if (innerCh === \"'\" && !innerEscaped && !innerDoubleQuote) {\n          innerSingleQuote = !innerSingleQuote;\n          continue;\n        }\n\n        if (innerCh === '>' && !innerEscaped && !innerSingleQuote && !innerDoubleQuote) {\n          const rawTag = text.slice(i, j + 1);\n          if (tagRegex.test(rawTag)) {\n            return true;\n          }\n          break;\n        }\n      }\n\n      i = j;\n      backslashRun = 0;\n    }\n  }\n\n  return false;\n}\n\n/**\n *  XML \n * @param {string} text - \n * @param {RegExp} tagNameRegex - \n * @returns {string[]} \n */\nexport function extractBlocksByRegex(text: string, tagNameRegex: RegExp): string[] {\n  const blocks: string[] = [];\n  let searchIndex = text.length;\n\n  while (searchIndex > 0) {\n    const found = findTagFromEndByRegex(text, tagNameRegex, searchIndex);\n    if (!found) {\n      break;\n    }\n    blocks.unshift(found.content); // \n    searchIndex = found.startIndex;\n  }\n\n  return blocks;\n}\n\n/**\n * \n * \n *\n * @param {string} text - \n * @param {RegExp} targetTagNameRegex - \n * @param {boolean} [toSimplified=false] - \n * @returns {string[]} \n */\nexport function extractValidBlocks(text: string, targetTagNameRegex: RegExp, toSimplified: boolean = false): string[] {\n  // 1.  \"think\" \n  const thinkRegex = createTagRegex('think', 'contains');\n  const processedText = removeTagsByRegex(text, thinkRegex);\n\n  // 2.  tag\n  const extracted = extractBlocksByRegex(processedText, targetTagNameRegex);\n\n  const validBlocks: string[] = [];\n  for (const block of extracted) {\n    // 3. \n    const cleanedBlock = stripCodeFence(block.trim());\n\n    // XML\n    if (containsXMLTags(cleanedBlock)) {\n      continue;\n    }\n\n    if (cleanedBlock) {\n      if (toSimplified) {\n        const simplifiedBlock = traditionalToSimplified(cleanedBlock);\n        validBlocks.push(simplifiedBlock);\n      } else {\n        validBlocks.push(cleanedBlock);\n      }\n    }\n  }\n\n  return validBlocks;\n}\n\n/**\n * \n * @param {string} text - \n * @returns {string} \n */\nconst converter = Converter({ from: 'tw', to: 'cn' });\nexport function traditionalToSimplified(text: string): string {\n  return converter(text);\n}\n","/**\n * , \n * \n * @param text - \n * @returns - \n */\nexport function parseCharacterMacros(text: string): string {\n  // , \n  if (!text.includes('{{')) {\n    return text;\n  }\n\n  let result = text;\n  // \n  result = result.replace(/{{user}}/gi, SillyTavern.name1);\n  result = result.replace(/{{char}}/gi, SillyTavern.name2);\n  return result;\n}\n\n/**\n * ,  parseCharacterMacros \n * @param data - \n * @returns - \n */\nexport const deepParseCharacterMacros = (data: any): any => {\n  if (typeof data === 'string') {\n    return parseCharacterMacros(data);\n  }\n  if (Array.isArray(data)) {\n    return data.map(item => deepParseCharacterMacros(item));\n  }\n  if (typeof data === 'object' && data !== null) {\n    return Object.entries(data).reduce(\n      (acc, [key, value]) => {\n        acc[key] = deepParseCharacterMacros(value);\n        return acc;\n      },\n      {} as Record<string, any>,\n    );\n  }\n  return data;\n};\n","/**\n * @file ERA  - \n * @description\n * \n */\n\n'use strict';\n\nimport { ERA_DATA_REGEX } from './constants';\nimport { escapeEraData, parseJsonl } from './data';\nimport { Logger } from './log';\nimport {\n  containsXMLTags,\n  createTagRegex,\n  extractValidBlocks,\n  removeTagsByRegex,\n  stripCodeFence,\n  traditionalToSimplified,\n} from './string';\nimport { parseCharacterMacros } from './text';\n\nconst log = new Logger();\n\nexport function extractMessageIdFromDetail(detail: any): number | null {\n  if (detail === null || detail === undefined) {\n    log.debug('extractMessageIdFromDetail', 'detail  message_id');\n    return null;\n  }\n\n  if (typeof detail === 'number') {\n    if (Number.isFinite(detail)) {\n      log.debug('extractMessageIdFromDetail', ' number detail  message_id', { message_id: detail });\n      return detail;\n    }\n    log.debug('extractMessageIdFromDetail', 'number detail ', { detail });\n    return null;\n  }\n\n  if (typeof detail === 'string') {\n    const parsed = Number(detail);\n    if (Number.isFinite(parsed)) {\n      log.debug('extractMessageIdFromDetail', ' string detail  message_id', {\n        raw: detail,\n        message_id: parsed,\n      });\n      return parsed;\n    }\n    log.debug('extractMessageIdFromDetail', 'string detail ', { raw: detail });\n    return null;\n  }\n\n  if (Array.isArray(detail) && detail.length > 0) {\n    const parsed = Number(detail[0]);\n    if (Number.isFinite(parsed)) {\n      log.debug('extractMessageIdFromDetail', ' detail[0]  message_id', {\n        raw: detail[0],\n        message_id: parsed,\n      });\n      return parsed;\n    }\n    log.debug('extractMessageIdFromDetail', ' detail[0] ', { raw: detail[0] });\n    return null;\n  }\n\n  if (typeof detail === 'object') {\n    if (typeof detail.message_id === 'number') {\n      if (Number.isFinite(detail.message_id)) {\n        log.debug('extractMessageIdFromDetail', ' detail.message_id(number)  message_id', {\n          message_id: detail.message_id,\n        });\n        return detail.message_id;\n      }\n      log.debug('extractMessageIdFromDetail', ' detail.message_id(number) ', {\n        message_id: detail.message_id,\n      });\n      return null;\n    }\n    if (typeof detail.message_id === 'string') {\n      const parsed = Number(detail.message_id);\n      if (Number.isFinite(parsed)) {\n        log.debug('extractMessageIdFromDetail', ' detail.message_id(string)  message_id', {\n          raw: detail.message_id,\n          message_id: parsed,\n        });\n        return parsed;\n      }\n      log.debug('extractMessageIdFromDetail', ' detail.message_id(string) ', {\n        raw: detail.message_id,\n      });\n      return null;\n    }\n    if (Array.isArray(detail.eventArgs) && detail.eventArgs.length > 0) {\n      const parsed = Number(detail.eventArgs[0]);\n      if (Number.isFinite(parsed)) {\n        log.debug('extractMessageIdFromDetail', ' detail.eventArgs[0]  message_id', {\n          raw: detail.eventArgs[0],\n          message_id: parsed,\n        });\n        return parsed;\n      }\n      log.debug('extractMessageIdFromDetail', ' detail.eventArgs[0] ', {\n        raw: detail.eventArgs[0],\n      });\n      return null;\n    }\n  }\n\n  log.debug('extractMessageIdFromDetail', ' detail  message_id', { detail });\n  return null;\n}\n\n/**\n * @type {EraData} -  `<era_data>` \n */\ntype EraData = {\n  'era-message-key': string;\n  'era-message-type': 'user' | 'assistant';\n};\n\n// ==================================================================\n// \n// ==================================================================\n\n/**\n * **** \n *  ERA \n * @param {TavernMessage} msg - \n * @returns {string | null}  null\n */\nexport function getMessageContent(msg: any): string | null {\n  if (!msg) return null;\n\n  let content: string | null = null;\n\n  //  .mes \n  if (typeof msg.mes === 'string') {\n    content = msg.mes;\n  }\n  //  .mes swipes\n  else if (Array.isArray(msg.swipes)) {\n    const sid = Number(msg.swipe_id ?? 0);\n    content = msg.swipes[sid] || null;\n  }\n  //  .message \n  else if (typeof msg.message === 'string') {\n    content = msg.message;\n  }\n\n  if (content === null) {\n    return null;\n  }\n\n  // \n  // \n  // \n  // \n  return parseCharacterMacros(content);\n}\n\n/**\n *  `EraData` \n * @param {string | null | undefined} messageContent - \n * @returns {EraData | null}  `EraData`  null\n */\nfunction parseEraData(messageContent: string | null | undefined): EraData | null {\n  if (typeof messageContent !== 'string') {\n    return null;\n  }\n  const match = messageContent.match(ERA_DATA_REGEX);\n  if (!match || !match[1]) {\n    return null;\n  }\n  try {\n    //  MK  `{\"key\"=\"value\"}`  JSON.parse\n    // \n    const customFormatBlock = match[1];\n    const keyMatch = customFormatBlock.match(/\"era-message-key\"\\s*=\\s*\"(.*?)\"/);\n    const typeMatch = customFormatBlock.match(/\"era-message-type\"\\s*=\\s*\"(.*?)\"/);\n\n    if (keyMatch?.[1] && typeMatch?.[1]) {\n      const eraData = {\n        'era-message-key': keyMatch[1],\n        'era-message-type': typeMatch[1] as 'user' | 'assistant',\n      };\n      log.debug('parseEraData', ' EraData', eraData);\n      return eraData;\n    }\n    log.debug('parseEraData', ' EraData ', { customFormatBlock });\n    return null;\n  } catch (e) {\n    log.warn('parseEraData', ' EraData ', e);\n    return null;\n  }\n}\n\n/**\n * ****  `era-message-type`  `role` \n * \n * @param {TavernMessage} msg - \n * @returns {boolean}  true\n */\nexport function isUserMessage(msg: any): boolean {\n  const content = getMessageContent(msg);\n  const data = parseEraData(content);\n  if (data) {\n    return data['era-message-type'] === 'user';\n  }\n  //  role \n  return msg?.role === 'user';\n}\n\n/**\n *  AI \n * @returns {TavernMessage | null}  AI  null\n */\nexport function findLastAiMessage(): any | null {\n  const messages = getChatMessages('0-{{lastMessageId}}', { include_swipes: true });\n  if (!messages || messages.length === 0) {\n    log.debug('findLastAiMessage', ', ');\n    return null;\n  }\n\n  for (let i = messages.length - 1; i >= 0; i--) {\n    const msg = messages[i];\n    if (!isUserMessage(msg)) {\n      log.debug('findLastAiMessage', ` AI , ID: ${msg.message_id}`);\n      return msg;\n    }\n  }\n\n  log.debug('findLastAiMessage', ' AI ');\n  return null;\n}\n\n/**\n * ****\n * AI\n * \n * @param {TavernMessage | number} [messageOrId] -  ID AI \n * @param {number} [retries=3] - \n * @param {number} [delay=50] - \n * @returns {Promise<string | null>}  null\n */\nexport async function getMessageContentWithRetry(\n  messageOrId?: any | number,\n  retries: number = 20,\n  delay: number = 50,\n): Promise<string | null> {\n  let msg: any;\n\n  if (messageOrId) {\n    if (typeof messageOrId === 'number') {\n      const messages = getChatMessages(messageOrId, { include_swipes: true });\n      msg = messages ? messages[0] : null;\n    } else {\n      msg = messageOrId;\n    }\n  } else {\n    msg = findLastAiMessage();\n  }\n\n  if (!msg) {\n    log.warn('getMessageContentWithRetry', '', { messageOrId });\n    return null;\n  }\n\n  for (let i = 0; i < retries; i++) {\n    const content = getMessageContent(msg);\n    if (content) {\n      return content;\n    }\n    log.log('getMessageContentWithRetry', ` ${delay}ms  ( ${i + 1} )`);\n    await new Promise(resolve => setTimeout(resolve, delay));\n  }\n\n  log.warn('getMessageContentWithRetry', ` ${retries} `, { message_id: msg.message_id });\n  return getMessageContent(msg); //  ( null)\n}\n\n// ==================================================================\n// \n// ==================================================================\n\n/**\n * **** \n *  `swipes`  `message` \n * @param {any} message - \n * @param {string} newContent - \n * @param {'none' | 'affected' | 'all'} [refresh='none'] - \n */\nexport async function updateMessageContent(\n  message: any,\n  newContent: string,\n  refresh: 'none' | 'affected' | 'all' = 'none',\n) {\n  const oldContent = getMessageContent(message);\n  //log.debug('updateMessageContent', ':', oldContent);\n  //log.debug('updateMessageContent', ':', newContent);\n\n  const updatePayload: { message_id: number; message?: string; swipes?: string[] } = {\n    message_id: message.message_id,\n  };\n\n  if (Array.isArray(message.swipes)) {\n    const sid = Number(message.swipe_id ?? 0);\n    const newSwipes = [...message.swipes];\n    newSwipes[sid] = newContent;\n    updatePayload.swipes = newSwipes;\n  } else {\n    updatePayload.message = newContent;\n  }\n\n  await setChatMessages([updatePayload], { refresh });\n}\n\n/**\n *  ERA \n */\nexport interface EraCommand {\n  type: 'insert' | 'edit' | 'delete';\n  data: any[];\n}\n\n/**\n *  ERA \n *\n * @param {any} msg - \n * @param {boolean} [toSimplified=false] - \n * @returns {EraCommand[]} - \n */\nexport function extractAndParseCommands(msg: any, toSimplified: boolean = false): EraCommand[] {\n  let rawContent = getMessageContent(msg) || '';\n\n  //  <think> \n  const thinkRegex = createTagRegex('think', 'contains');\n  rawContent = removeTagsByRegex(rawContent, thinkRegex);\n\n  // \n  //  's'  '.' 'g' \n  const commandRegex = /<(VariableInsert|VariableEdit|VariableDelete)>([\\s\\S]*?)<\\/\\1>/g;\n\n  const commands: EraCommand[] = [];\n  let match;\n\n  // \n  while ((match = commandRegex.exec(rawContent)) !== null) {\n    const tagName = match[1];\n    let blockContent = match[2];\n\n    // 1. \n    const cleanedBlock = stripCodeFence(blockContent.trim());\n\n    // XML\n    if (containsXMLTags(cleanedBlock)) {\n      continue;\n    }\n\n    if (cleanedBlock) {\n      // 2. () \n      if (toSimplified) {\n        blockContent = traditionalToSimplified(cleanedBlock);\n      } else {\n        blockContent = cleanedBlock;\n      }\n\n      // 3.  JSONL \n      const parsedData = parseJsonl(blockContent);\n      if (parsedData.length === 0) {\n        continue;\n      }\n\n      // 4. \n      const escapedData = escapeEraData(parsedData);\n\n      // 5. \n      let type: 'insert' | 'edit' | 'delete';\n      switch (tagName) {\n        case 'VariableInsert':\n          type = 'insert';\n          break;\n        case 'VariableEdit':\n          type = 'edit';\n          break;\n        case 'VariableDelete':\n          type = 'delete';\n          break;\n        default:\n          // \n          continue;\n      }\n\n      // 6. \n      commands.push({\n        type,\n        data: escapedData,\n      });\n    }\n  }\n\n  if (commands.length === 0) {\n    log.debug('extractAndParseCommands', ` (ID: ${msg.message_id}) `);\n  } else {\n    log.debug('extractAndParseCommands', '', commands);\n  }\n\n  return commands;\n}\n","/**\n * @file ERA  -  (MK) \n * @description\n *  ERA Message Key, MK\n *\n * ****:\n * ERA  SillyTavern message variables\n * MK \n *\n * MK  **ERA ** ****\n * ERA \n * \n *\n * **MK **:\n * MK  XML  `<era_data>` **** JSON \n *  `=`  AI  JSON \n * e.g., `<era_data>{\"era-message-key\"=\"era_mk_...\",\"era-message-type\"=\"user\"}</era_data>`\n *  HTML  `<!-- -->` MK \n *\n * ****:\n * 1. ****: `ensureMessageKey`  MK\n *     MK \n * 2. ****: `readMessageKey`  MK\n * 3. ****: `updateLatestSelectedMk`  `SelectedMks` \n *    \n */\n\n'use strict';\n\nimport { ERA_DATA_REGEX, ERA_DATA_TAG, SEL_PATH } from '../../utils/constants';\nimport { updateEraMetaData } from '../../utils/era_data';\nimport { Logger } from '../../utils/log';\nimport { getMessageContent, updateMessageContent } from '../../utils/message';\nimport { rnd } from '../../utils/string';\n\nconst logger = new Logger();\n\n/**\n * @type {EraData} -  `<era_data>` \n */\ntype EraData = {\n  'era-message-key': string;\n  'era-message-type': 'user' | 'assistant';\n};\n\n// ==================================================================\n// \n// ==================================================================\n\n/**\n *  `EraData` \n * @param {string | null | undefined} messageContent - \n * @returns {EraData | null}  `EraData`  null\n */\nfunction parseEraData(messageContent: string | null | undefined): EraData | null {\n  if (typeof messageContent !== 'string') {\n    return null;\n  }\n  const match = messageContent.match(ERA_DATA_REGEX);\n  if (!match || !match[1]) {\n    return null;\n  }\n  try {\n    //  MK  `{\"key\"=\"value\"}`  JSON.parse\n    // \n    const customFormatBlock = match[1];\n    const keyMatch = customFormatBlock.match(/\"era-message-key\"\\s*=\\s*\"(.*?)\"/);\n    const typeMatch = customFormatBlock.match(/\"era-message-type\"\\s*=\\s*\"(.*?)\"/);\n\n    if (keyMatch?.[1] && typeMatch?.[1]) {\n      return {\n        'era-message-key': keyMatch[1],\n        'era-message-type': typeMatch[1] as 'user' | 'assistant',\n      };\n    }\n    return null;\n  } catch {\n    return null;\n  }\n}\n\n// ==================================================================\n// \n// ==================================================================\n\n/**\n * ** MK** MK\n * swipe\n *  `mes``message`  `swipes`  MK \n * @param {TavernMessage} msg - \n * @returns {string}  MK\n */\nexport function readMessageKey(msg: any): string {\n  if (!msg) return '';\n  //logger.debug('readMessageKey', 'mk');\n  //  getMessageContent  MK\n  const content = getMessageContent(msg);\n  //logger.debug('readMessageKey', '', content);\n  const mk = parseEraData(content)?.['era-message-key'] || '';\n  //logger.debug('readMessageKey', 'mk', mk);\n  //  swipes  MK\n  //  ensureMessageKey  MK\n  return mk;\n\n  /*\n   * ==================================================================\n   *  - 2025/10/02\n   *\n   *  swipe \n   *  MK  swipe \n   *\n   * ****:\n   *  ERA  swipe  swipe  MK\n   *  MK  swipe  MK\n   *  `ensureMessageKey`  MK MK\n   *  swipe \n   *\n   *  `readMessageKey` \n   * ==================================================================\n   */\n  // const mkFromCurrent = parseEraData(content)?.['era-message-key'];\n  // if (mkFromCurrent) {\n  //   return mkFromCurrent;\n  // }\n  // if (Array.isArray(msg.swipes)) {\n  //   for (const swipeContent of msg.swipes) {\n  //     const mkFromSwipe = parseEraData(swipeContent)?.['era-message-key'];\n  //     if (mkFromSwipe) {\n  //       return mkFromSwipe;\n  //     }\n  //   }\n  // }\n  // const mkFromMessage = parseEraData(msg.message)?.['era-message-key'];\n  // if (mkFromMessage) {\n  //   return mkFromMessage;\n  // }\n  // return '';\n}\n\n/**\n * ** MK **\n *  MK MK \n * /MK\n *\n * @param {TavernMessage} msg -  ( `message_id`, `role`,  `message`  `swipes`)\n * @returns {Promise<{mk: string, isNew: boolean}>}  MK  MK\n */\nexport async function ensureMessageKey(msg: any): Promise<{ mk: string; isNew: boolean }> {\n  if (!msg || typeof msg.message_id !== 'number' || !msg.role) {\n    logger.warn('ensureMessageKey', `Key`, { msg });\n    return { mk: '', isNew: false };\n  }\n\n  // 1.  readMessageKey  MK\n  const existingMk = readMessageKey(msg);\n  if (existingMk) {\n    return { mk: existingMk, isNew: false }; // \n  }\n\n  // 2.  MK \n  const newMk = `era_mk_${Date.now()}_${rnd()}`;\n  const messageType = msg.role === 'user' ? 'user' : 'assistant';\n  const dataString = `<${ERA_DATA_TAG}>{\"era-message-key\"=\"${newMk}\",\"era-message-type\"=\"${messageType}\"}</${ERA_DATA_TAG}>`;\n\n  logger.debug('ensureMessageKey', ` (ID: ${msg.message_id}) Key: ${newMk}`);\n\n  // 3. \n  const currentContent = getMessageContent(msg) ?? '';\n  const contentWithMk = currentContent + '\\n' + dataString; //mk\n  const newContent = contentWithMk;\n\n  //  utils.ts  swipes \n  await updateMessageContent(msg, newContent);\n\n  return { mk: newMk, isNew: true };\n}\n\n/**\n * ** MK**\n *  MK\n *  ERA \n * @param {any} msg -  `getChatMessages(-1)` \n * @returns {Promise<{mk: string, message_id: number | null, isNewKey: boolean}>}  MK ID  MK\n */\nexport const ensureMkForLatestMessage = async (\n  msg: any,\n): Promise<{\n  mk: string;\n  message_id: number | null;\n  isNewKey: boolean;\n}> => {\n  try {\n    // \n    logger.debug('ensureMkForLatestMessage', ` (msg)`, msg);\n\n    if (!msg || typeof msg.message_id !== 'number') {\n      logger.warn('ensureMkForLatestMessage', 'ID', { latestMessage: msg });\n      return { mk: '', message_id: null, isNewKey: false };\n    }\n\n    // ensureMessageKey  MK \n    const { mk, isNew } = await ensureMessageKey(msg);\n    logger.debug('ensureMkForLatestMessage', ` ${msg.message_id}  MK  (: ${isNew})`);\n    return { mk, message_id: msg.message_id, isNewKey: isNew };\n  } catch (err: any) {\n    logger.error('ensureMkForLatestMessage', `MK: ${err?.message || err}`, {\n      error: err,\n      latestMessage: msg, //  msg \n    });\n    return { mk: '', message_id: null, isNewKey: false };\n  }\n};\n\n/**\n * ** MK**\n *  `SelectedMks` ****\n * `SelectedMks` \n * @param {string} mk -  MK\n * @returns {Promise<void>}\n */\nexport const updateLatestSelectedMk = async (mk: string) => {\n  const msg = getChatMessages(-1, { include_swipes: true })?.[0];\n  if (!msg || typeof msg.message_id !== 'number') return;\n\n  if (!mk) return;\n\n  //  ERAMetaData  SelectedMks \n  await updateEraMetaData(meta => {\n    const selectedMks = _.get(meta, SEL_PATH, []);\n    // \n    if (selectedMks[msg.message_id] !== mk) {\n      selectedMks[msg.message_id] = mk;\n      _.set(meta, SEL_PATH, selectedMks);\n    }\n    return meta;\n  });\n};\n","import { updateScriptSettings, initEraSettings } from '../../utils/era_data';\nimport { Logger } from '../../utils/log';\n\nconst logger = new Logger();\n\n/**\n * \n * \n */\nexport async function initializeExternalSettings() {\n  //  ref \n  initEraSettings();\n  logger.log('initializeExternalSettings', '...');\n  await updateScriptSettings(async settings => {\n    // updateScriptSettings \n    logger.debug('initializeExternalSettings', ':', settings);\n    return settings;\n  });\n  logger.log('initializeExternalSettings', '');\n}\n\n//  app_ready \n$(() => {\n  initializeExternalSettings();\n});\n","'use strict';\n\nimport { Logger } from '../utils/log';\nimport { settings } from '../utils/era_data';\nimport { isUserMessage, getMessageContent, updateMessageContent } from '../utils/message';\n\n/**\n * @file ERA  - \n * @description UI\n */\n\nconst logger = new Logger();\n\n/**\n * ****\n *  ID  AI  UI \n * \n * @param {number} message_id -  ID\n */\nexport async function ensurePlaceholder(message_id: number) {\n  const funcName = 'ensurePlaceholder';\n  logger.debug(funcName, ` ID: ${message_id}`);\n\n  if (!settings.value.ai) {\n    logger.debug(funcName, '');\n    return;\n  }\n  logger.debug(funcName, '');\n\n  const chat_message = getChatMessages(message_id, { include_swipes: true })[0];\n  if (!chat_message) {\n    logger.warn(funcName, ` ID: ${message_id} `);\n    return;\n  }\n  logger.debug(funcName, ` (ID: ${message_id})`, chat_message);\n\n  if (isUserMessage(chat_message)) {\n    logger.debug(funcName, ` ${message_id} `);\n    return;\n  }\n  logger.debug(funcName, ` ${message_id}  AI `);\n\n  const placeholder = settings.value.;\n  const currentContent = getMessageContent(chat_message);\n  logger.debug(funcName, ':', { content: currentContent });\n  logger.debug(funcName, ':', { placeholder });\n\n  if (currentContent && currentContent.includes(placeholder)) {\n    logger.debug(funcName, '');\n    return;\n  }\n\n  const newMessage = (currentContent || '').trimEnd() + '\\n' + placeholder;\n  logger.debug(funcName, '', { newMessage });\n\n  try {\n    await updateMessageContent(chat_message, newMessage, 'affected');\n    logger.debug(funcName, '');\n  } catch (error) {\n    logger.error(funcName, '', error);\n  }\n}\n","/**\n * @file ERA  - \n * @description\n *  MK stat\n *  `variables` \n *\n * ****:\n * - ****: stat `EditLog` \n * - ****:  `EditLog` \n * - ****: `EditLog`  MK  `selectedMks` \n */\n\n'use strict';\n\nimport { parseEditLog } from '../utils/data';\nimport { Logger } from '../utils/log';\n\nconst logger = new Logger();\n\n// ==================================================================\n//  ( rollback.ts  sync.ts)\n// ==================================================================\n\n/**\n *  stat  EditLog\n * @param stat - \n * @param log -  EditLog \n * @returns {object} -  stat \n */\nfunction applyRollback(stat: object, log: any[]): object {\n  if (!log || !log.length) return stat;\n  //  EditLog \n  for (let i = log.length - 1; i >= 0; i--) {\n    const entry = log[i];\n    const op = String(entry?.op || '').toLowerCase();\n    const path = String(entry?.path || '');\n    if (!path) continue;\n\n    if (op === 'insert') {\n      // \n      _.unset(stat, path);\n    } else if (op === 'update' || op === 'delete') {\n      // \n      if (typeof entry.value_old === 'undefined') {\n        _.unset(stat, path);\n      } else {\n        _.set(stat, path, _.cloneDeep(entry.value_old));\n      }\n    }\n  }\n  return stat;\n}\n\n/**\n *  stat  EditLog\n * @param stat - \n * @param log -  EditLog \n * @returns {object} -  stat \n */\nfunction applyForward(stat: object, log: any[]): object {\n  if (!log || !log.length) return stat;\n  //  log\n  for (const entry of log) {\n    if (!entry || !entry.path) continue;\n    const op = String(entry?.op || '').toLowerCase();\n\n    if (op === 'insert' || op === 'update') {\n      _.set(stat, entry.path, _.cloneDeep(entry.value_new));\n    } else if (op === 'delete') {\n      _.unset(stat, entry.path);\n    }\n  }\n  return stat;\n}\n\n// ==================================================================\n// \n// ==================================================================\n\n/**\n * ****:  stat  currentMK  targetMK \n *\n * @param {string} targetMK -  MK\n * @param {string} currentMK -  MK\n * @param {object} currentStat - \n * @param {string[]} selectedMks -  MK \n * @param {{ [mk: string]: string }} allLogs -  EditLog \n * @returns {object} -  stat \n */\nexport function rollbackStatToMK(\n  targetMK: string | null | undefined,\n  currentMK: string,\n  currentStat: object,\n  selectedMks: (string | null)[],\n  allLogs: { [mk: string]: string },\n): object {\n  const currentIndex = selectedMks.indexOf(currentMK);\n  //  targetMK  null  undefined,  targetIndex  -1\n  const targetIndex = targetMK ? selectedMks.indexOf(targetMK) : -1;\n\n  if (currentIndex === -1) {\n    const errorMsg = `MK: ${currentMK}`;\n    logger.error('rollbackStatToMK', errorMsg, { currentMK, selectedMks });\n    throw new Error(errorMsg);\n  }\n  if (targetMK && targetIndex === -1) {\n    const errorMsg = `MK: ${targetMK}`;\n    logger.error('rollbackStatToMK', errorMsg, { targetMK, selectedMks });\n    throw new Error(errorMsg);\n  }\n\n  if (targetIndex > currentIndex) {\n    logger.warn('rollbackStatToMK', 'MK', {\n      targetMK,\n      currentMK,\n      targetIndex,\n      currentIndex,\n    });\n    return _.cloneDeep(currentStat);\n  }\n  if (targetIndex === currentIndex) {\n    return _.cloneDeep(currentStat);\n  }\n\n  let tempStat = _.cloneDeep(currentStat);\n\n  // \n  //  targetIndex  -1,  i > -1,  i=0, \n  for (let i = currentIndex; i > targetIndex; i--) {\n    const mkToRollback = selectedMks[i];\n    if (!mkToRollback) continue;\n    const log = parseEditLog(allLogs[mkToRollback]);\n    tempStat = applyRollback(tempStat, log);\n  }\n\n  return tempStat;\n}\n\n/**\n * ****:  stat  mk  mk \n *\n * @param {object} startStat - \n * @param {string} startMK -  MK\n * @param {string} targetMK -  MK\n * @param {string[]} selectedMks -  MK \n * @param {{ [mk: string]: string }} allLogs -  EditLog \n * @returns {object} -  MK  stat\n */\nexport function calculateStatForward(\n  startStat: object,\n  startMK: string,\n  targetMK: string,\n  selectedMks: (string | null)[],\n  allLogs: { [mk: string]: string },\n): object {\n  const startIndex = selectedMks.indexOf(startMK);\n  const targetIndex = selectedMks.indexOf(targetMK);\n\n  if (startIndex === -1 || targetIndex === -1) {\n    const errorMsg = `MKMK: ${startMK}, MK: ${targetMK}`;\n    logger.error('calculateStatForward', errorMsg, { startMK, targetMK, selectedMks });\n    throw new Error(errorMsg);\n  }\n\n  if (targetIndex < startIndex) {\n    logger.warn('calculateStatForward', 'MK', {\n      startMK,\n      targetMK,\n      startIndex,\n      targetIndex,\n    });\n    return _.cloneDeep(startStat);\n  }\n  if (targetIndex === startIndex) {\n    return _.cloneDeep(startStat);\n  }\n\n  let tempStat = _.cloneDeep(startStat);\n\n  // \n  for (let i = startIndex + 1; i <= targetIndex; i++) {\n    const mkToApply = selectedMks[i];\n    if (!mkToApply) continue;\n    const log = parseEditLog(allLogs[mkToApply]);\n    tempStat = applyForward(tempStat, log);\n  }\n\n  return tempStat;\n}\n\n/**\n * ****:  MK \n * \n *\n * @param {string} targetMK -  MK\n * @param {string[]} selectedMks -  MK \n * @param {{ [mk: string]: string }} allLogs -  EditLog \n * @returns {object} -  stat \n */\nexport function calculateStatAt(\n  targetMK: string,\n  selectedMks: (string | null)[],\n  allLogs: { [mk: string]: string },\n): object {\n  const targetIndex = selectedMks.indexOf(targetMK);\n\n  if (targetIndex === -1) {\n    const errorMsg = `MK: ${targetMK}`;\n    logger.error('calculateStatAt', errorMsg, { targetMK, selectedMks });\n    throw new Error(errorMsg);\n  }\n\n  let tempStat = {}; // \n\n  //  targetIndex\n  for (let i = 0; i <= targetIndex; i++) {\n    const mkToApply = selectedMks[i];\n    if (!mkToApply) continue;\n    const log = parseEditLog(allLogs[mkToApply]);\n    tempStat = applyForward(tempStat, log);\n  }\n\n  return tempStat;\n}\n\n/**\n * ****:  startMk  endMk  stat \n * \n *\n * @param {string} startMk -  MK\n * @param {string} endMk -  MK\n * @param {(string | null)[]} selectedMks -  MK \n * @param {{ [mk: string]: string }} allLogs -  EditLog \n * @returns {{mk: string, message_id: number, stat: object}[]} - \n */\nexport function calculateAllStatsBetweenMks(\n  startMk: string,\n  endMk: string,\n  selectedMks: (string | null)[],\n  allLogs: { [mk: string]: string },\n): { mk: string; message_id: number; stat: object }[] {\n  const startIndex = selectedMks.indexOf(startMk);\n  const endIndex = selectedMks.indexOf(endMk);\n\n  if (startIndex === -1 || endIndex === -1 || startIndex > endIndex) {\n    logger.error('calculateAllStatsBetweenMks', ' startMk  endMk', {\n      startMk,\n      endMk,\n      selectedMks,\n    });\n    return [];\n  }\n\n  // 1. \n  let currentStat = calculateStatAt(startMk, selectedMks, allLogs);\n  const results: { mk: string; message_id: number; stat: object }[] = [\n    {\n      mk: startMk,\n      message_id: startIndex,\n      stat: _.cloneDeep(currentStat),\n    },\n  ];\n\n  // 2. \n  for (let i = startIndex + 1; i <= endIndex; i++) {\n    const mk = selectedMks[i];\n    if (!mk) continue;\n\n    const log = parseEditLog(allLogs[mk]);\n    currentStat = applyForward(currentStat, log);\n    results.push({\n      mk: mk,\n      message_id: i,\n      stat: _.cloneDeep(currentStat),\n    });\n  }\n\n  return results;\n}\n\n/**\n * ****\n *  `selectedMks`  (`value_new`)\n *  `update`  `value_old`\n *\n * @param {string} path - \n * @param {number} startMessageId -  ID ( selectedMks ) ****\n * @param {string[]} selectedMks -  MK \n * @param {{ [mk: string]: string }} allLogs -  EditLog  MK\n * @returns {any}  `value_new` `null`\n */\nexport function findLatestNewValue(\n  path: string,\n  startMessageId: number,\n  selectedMks: (string | null)[],\n  allLogs: { [mk: string]: string },\n): any {\n  logger?.debug('findLatestNewValue', ` <${path}>  <${startMessageId}> ...`);\n\n  if (startMessageId < 0 || startMessageId > selectedMks.length) {\n    logger?.warn('findLatestNewValue', ` ${startMessageId} `, {\n      path,\n      startMessageId,\n      selectedMksCount: selectedMks.length,\n    });\n    return null;\n  }\n\n  // 1.  `selectedMks` \n  for (let i = startMessageId - 1; i >= 0; i--) {\n    const mk = selectedMks[i];\n    if (!mk) continue;\n\n    // 2.  mk  allLogs  mk  EditLog\n    const editLogForMkRaw = allLogs[mk];\n    const editLogForMk = parseEditLog(editLogForMkRaw);\n\n    if (!editLogForMk || editLogForMk.length === 0) continue;\n\n    // 3.  MK  EditLog\n    for (let j = editLogForMk.length - 1; j >= 0; j--) {\n      const logEntry = editLogForMk[j];\n      if (!logEntry || !logEntry.path) continue;\n\n      // Case 1: \n      if (logEntry.path === path) {\n        if (logEntry.op === 'delete') {\n          logger?.warn(\n            'findLatestNewValue',\n            `>>  MK:${mk}  <${path}>  'delete'  null`,\n          );\n          return null;\n        }\n        logger?.debug(\n          'findLatestNewValue',\n          `>> !  MK:${mk}  <${path}> : `,\n          logEntry.value_new,\n        );\n        return _.cloneDeep(logEntry.value_new);\n      }\n\n      // Case 2:  ( logEntry.path )\n      // ,  \"a.b.c.d\",  \"a.b\" \n      // `_.get`  ( \"c.d\")\n      if (path.startsWith(logEntry.path + '.')) {\n        const subPath = path.substring(logEntry.path.length + 1);\n        const parentNewVal = logEntry.value_new;\n        if (_.isPlainObject(parentNewVal) && _.has(parentNewVal, subPath)) {\n          const foundVal = _.get(parentNewVal, subPath);\n          logger?.debug(\n            'findLatestNewValue',\n            `>> !  MK:${mk}  <${logEntry.path}>,  <${subPath}> :`,\n            foundVal,\n          );\n          return _.cloneDeep(foundVal);\n        }\n      }\n    }\n  }\n\n  // \n  logger?.debug('findLatestNewValue', ` ${path}  null `);\n  return null;\n}\n","/**\n * @file ERA  - \n * @description\n *  MK stat\n */\n\n'use strict';\n\nimport { LOGS_PATH, SEL_PATH } from '../utils/constants';\nimport { getEraData } from '../utils/era_data';\nimport { Logger } from '../utils/log';\nimport { calculateAllStatsBetweenMks, calculateStatAt } from './timetravel';\n\nconst logger = new Logger();\n\n/**\n *  MK stat\n * \n *\n * @param {string} targetMK -  (MK)\n * @returns {object | null} -  stat  MK  null\n */\nexport function getStatAtMK(targetMK: string): object | null {\n  try {\n    const { meta } = getEraData();\n    const selectedMks: (string | null)[] = _.get(meta, SEL_PATH, []);\n    const allLogs: { [mk: string]: string } = _.get(meta, LOGS_PATH, {});\n\n    if (!targetMK) {\n      logger.error('getStatAtMK', ` MK `, { targetMK });\n      return null;\n    }\n\n    //  targetMK \n    if (!selectedMks.includes(targetMK)) {\n      logger.error('getStatAtMK', ` targetMK \"${targetMK}\"  selectedMks `, {\n        targetMK,\n        selectedMks,\n      });\n      return null;\n    }\n\n    //  timetravel \n    const statAtTarget = calculateStatAt(targetMK, selectedMks, allLogs);\n\n    return statAtTarget;\n  } catch (error: any) {\n    logger.error('getStatAtMK', `: ${error?.message || error}`, {\n      error,\n      targetMK,\n      eraData: getEraData(),\n    });\n    return null;\n  }\n}\n\n/**\n *  MK stat \n * \n * @param {string} [startMk] -  MK\n * @param {string} [endMk] -  MK\n * @returns {{mk: string, message_id: number, stat: object}[] | null} -  null\n */\nexport function getStatsBetweenMKs(\n  startMk?: string,\n  endMk?: string,\n): { mk: string; message_id: number; stat: object }[] | null {\n  try {\n    const { meta } = getEraData();\n    const selectedMks: (string | null)[] = _.get(meta, SEL_PATH, []);\n    const allLogs: { [mk: string]: string } = _.get(meta, LOGS_PATH, {});\n\n    const validMks = selectedMks.filter((mk): mk is string => !!mk);\n    if (validMks.length === 0) {\n      return [];\n    }\n\n    //  startMk \n    if (startMk && !validMks.includes(startMk)) {\n      logger.error('getStatsBetweenMKs', ` startMk \"${startMk}\"  selectedMks `, {\n        startMk,\n        validMks,\n      });\n      return null;\n    }\n\n    //  endMk \n    if (endMk && !validMks.includes(endMk)) {\n      logger.error('getStatsBetweenMKs', ` endMk \"${endMk}\"  selectedMks `, {\n        endMk,\n        validMks,\n      });\n      return null;\n    }\n\n    const actualStartMk = startMk || validMks[0];\n    const actualEndMk = endMk || validMks[validMks.length - 1];\n\n    const results = calculateAllStatsBetweenMks(actualStartMk, actualEndMk, selectedMks, allLogs);\n    return results;\n  } catch (error: any) {\n    logger.error('getStatsBetweenMKs', `: ${error?.message || error}`, {\n      error,\n      startMk,\n      endMk,\n      eraData: getEraData(),\n    });\n    return null;\n  }\n}\n","'use strict';\n\nimport { ERA_EVENT_EMITTER, LOGS_PATH, QueryResultPayload, SEL_PATH, WriteDonePayload } from '../../utils/constants';\nimport { unescapeEraData } from '../../utils/data';\nimport { getEraData, removeMetaFields } from '../../utils/era_data';\nimport { Logger } from '../../utils/log';\nimport { DispatcherPayload } from '../types';\n\nconst logger = new Logger();\n\n// ==================================================================\n// API \n// ==================================================================\n\n/**\n *  lodash.debounce  API \n *  API \n */\nexport const debouncedEmitApiWrite = _.debounce(\n  () => {\n    eventEmit(ERA_EVENT_EMITTER.API_WRITE);\n    logger.log('debouncedEmitApiWrite', ` ${ERA_EVENT_EMITTER.API_WRITE} `);\n  },\n  50, // API  50 \n  { leading: false, trailing: true },\n);\n\n// ==================================================================\n// \n// ==================================================================\n\n/**\n * ****  `era:writeDone` \n * \n * \n *\n * @param {DispatcherPayload} payload - \n */\nexport function emitWriteDoneEvent(payload: DispatcherPayload) {\n  //  ERA \n  const { stat, meta } = getEraData();\n  const statWithoutMeta = removeMetaFields(stat);\n  logger.debug('emitWriteDoneEvent', ' ERA ', { stat, meta, statWithoutMeta });\n\n  //  WriteDonePayload\n  const fullPayload: WriteDonePayload = {\n    ...payload,\n    stat: unescapeEraData(stat),\n    statWithoutMeta: unescapeEraData(statWithoutMeta),\n    selectedMks: _.get(meta, SEL_PATH, []),\n    editLogs: _.get(meta, LOGS_PATH, {}),\n  };\n\n  logger.debug('emitWriteDoneEvent', '', {\n    inputPayload: payload,\n    fullPayload: fullPayload,\n  });\n\n  eventEmit(ERA_EVENT_EMITTER.WRITE_DONE, fullPayload);\n  logger.log('emitWriteDoneEvent', ` ${ERA_EVENT_EMITTER.WRITE_DONE} `, fullPayload);\n}\n\n/**\n * ****  `era:queryResult` \n *  `GET_...`  API \n *\n * @param {QueryResultPayload['queryType']} queryType - \n * @param {any} request -  `detail` \n * @param {any} result -  QueryResultItem  QueryResultItem \n */\nexport function emitQueryResultEvent(queryType: QueryResultPayload['queryType'], request: any, result: any) {\n  const { meta } = getEraData();\n  const payload: QueryResultPayload = {\n    queryType,\n    request,\n    result,\n    selectedMks: _.get(meta, SEL_PATH, []),\n    editLogs: _.get(meta, LOGS_PATH, {}),\n  };\n\n  eventEmit(ERA_EVENT_EMITTER.VARS_QUERY_RESULT, payload);\n  logger.log('emitQueryResultEvent', ` [${queryType}]  ${ERA_EVENT_EMITTER.VARS_QUERY_RESULT} `);\n}\n","/**\n * @file ERA  - \n * @description\n *  `<VariableDelete>`  `EditLog`\n *\n * ****:\n * - ****:  `{}` \n * - ****:  `$meta.necessary` \n *   - `self`: \n *   - `children`: \n *   - `all`: \n * - ****: `necessary`  `necessary` \n * - ****:  `EditLog`\n */\n'use strict';\n\nimport { Logger } from '../../utils/log';\n\nconst logger = new Logger();\n\n/**\n * ****\n *  `<VariableDelete>`  `patchObj` \n *\n * @param {any} statData -  ( `stat_data`)\n * @param {string} basePath - \n * @param {any} patchObj -  `basePath` \n * @param {any[]} editLog - \n */\nfunction applyDeleteAtLevel(statData: any, basePath: string, patchObj: any, editLog: any[]) {\n  // --- 1.  ---\n  const currentNodeInVars = basePath ? _.get(statData, basePath) : statData;\n\n  if (currentNodeInVars === undefined) {\n    logger.warn('applyDeleteAtLevel', `VariableDelete  -> ${basePath || '(root)'}`, {\n      basePath,\n      patchObj,\n    });\n    return;\n  }\n\n  const necessary = _.get(currentNodeInVars, ['$meta', 'necessary']);\n\n  // \n  const metaPatch = _.get(patchObj, '$meta');\n  const isBypassingProtection =\n    // 1:  $meta \n    (_.isPlainObject(metaPatch) && _.isEmpty(metaPatch)) ||\n    // 2:  $meta.necessary \n    _.has(patchObj, ['$meta', 'necessary']);\n\n  // --- 2.  vs  ---\n  if (_.isPlainObject(patchObj) && !_.isEmpty(patchObj)) {\n    // ****\n\n    //  'all' \n    if (necessary === 'all' && !isBypassingProtection) {\n      logger.warn(\n        'applyDeleteAtLevel',\n        `VariableDelete  <${basePath}>  \"necessary: all\" `,\n        { basePath, patchObj, currentNodeInVars },\n      );\n      return;\n    }\n\n    // \n    for (const key of Object.keys(patchObj)) {\n      const fullPath = basePath ? `${basePath}.${key}` : key;\n      const subPatchObj = patchObj[key];\n\n      //  'children' \n      // \n      if (necessary === 'children' && _.isPlainObject(subPatchObj) && _.isEmpty(subPatchObj)) {\n        //  '$meta' \n        if (key === '$meta' && isBypassingProtection) {\n          // \n        } else {\n          logger.warn(\n            'applyDeleteAtLevel',\n            `VariableDelete  <${\n              basePath || '(root)'\n            }>  \"necessary: children\"  <${key}> `,\n            { basePath, key, patchObj, currentNodeInVars },\n          );\n          continue; // \n        }\n      }\n\n      applyDeleteAtLevel(statData, fullPath, subPatchObj, editLog);\n    }\n    return; // \n  }\n\n  // --- 3.  ---\n  // ( patchObj  null)\n  // ** `basePath`**\n\n  // 'self'  'all' \n  //  '$meta' \n  if (necessary === 'self' || necessary === 'all') {\n    logger.warn(\n      'applyDeleteAtLevel',\n      `VariableDelete  <${basePath}>  \"necessary: ${necessary}\" `,\n      { basePath, patchObj, currentNodeInVars },\n    );\n    return;\n  }\n\n  // basePath  ''\n  if (basePath === '') {\n    logger.error('applyDeleteAtLevel', 'VariableDelete ', {\n      patchObj,\n    });\n    return;\n  }\n\n  // \n  const valOld = _.cloneDeep(currentNodeInVars);\n  _.unset(statData, basePath);\n  editLog.push({ op: 'delete', path: basePath, value_old: valOld });\n  logger.debug('applyDeleteAtLevel', `: ${basePath}`);\n}\n\n/**\n * ****  `<VariableDelete>` \n *\n * @param {any[]} allDeletes -  delete \n * @param {any} initialStat -  `stat_data` \n * @returns {Promise<{ finalStat: any, editLog: any[] }>} - \n */\nexport async function processDeleteBlocks(\n  allDeletes: any[],\n  initialStat: any,\n): Promise<{ finalStat: any; editLog: any[] }> {\n  if (!allDeletes || allDeletes.length === 0) {\n    return { finalStat: initialStat, editLog: [] };\n  }\n\n  const currentStat = _.cloneDeep(initialStat);\n  const editLog: any[] = [];\n\n  for (const deleteRoot of allDeletes) {\n    if (!_.isPlainObject(deleteRoot) || _.isEmpty(deleteRoot)) continue;\n    try {\n      logger.debug('processDeleteBlocks', ` deleteRoot: ${JSON.stringify(deleteRoot)}`);\n      // \n      applyDeleteAtLevel(currentStat, '', deleteRoot, editLog);\n    } catch (e: any) {\n      logger.error('processDeleteBlocks', ` deleteRoot : ${e?.message || e}`, {\n        error: e,\n        deleteRoot,\n        currentStat,\n      });\n    }\n  }\n\n  logger.debug('processDeleteBlocks', ' VariableDelete ');\n  return { finalStat: currentStat, editLog };\n}\n","'use strict';\n\nimport { mergeReplaceArray } from '../../../utils/data';\nimport { Logger } from '../../../utils/log';\n\nconst logger = new Logger();\n\n/**\n * ****\n *\n * \n *\n * @param inheritedContent - \n * @param parentNodeData -  **** \n * @returns {any} -  `null`\n */\nexport function resolveTemplate(inheritedContent: any, parentNodeData: any): any {\n  // 1.  $template\n  const varsContent = _.get(parentNodeData, '$template');\n\n  logger.debug(\n    'resolveTemplate',\n    `:\\n    - : ${JSON.stringify(inheritedContent)}\\n    - : ${JSON.stringify(\n      varsContent,\n    )}`,\n  );\n\n  // 2.  ( > )\n  let mergedContent: any = {};\n  mergedContent = mergeReplaceArray(mergedContent, inheritedContent);\n  mergedContent = mergeReplaceArray(mergedContent, varsContent);\n\n  logger.debug('resolveTemplate', `: ${JSON.stringify(mergedContent)}`);\n\n  if (_.isEmpty(mergedContent)) {\n    return null;\n  }\n\n  return mergedContent;\n}\n\n/**\n * ****\n *\n *  (`$template`)  (`key`)\n *  `key` \n *\n * @example\n * // :\n * const parentTplContent = {\n *   \"$template\": { \"hp\": 10, \"mana\": 100, \"a\": { \"d\": 1 } },\n *   \"lili\": { \"hp\": 15, \"class\": \"warrior\", \"a\": { \"c\": 1 } }\n * };\n * const key = \"lili\";\n * //  ():\n * // { \"hp\": 15, \"mana\": 100, \"class\": \"warrior\", \"a\": { \"c\": 1, \"d\": 1 } }\n *\n * @param parentTplContent -  `$template`  `key` \n * @param key - \n * @returns {any} -  `undefined`\n */\nexport function getInheritedTemplateContent(parentTplContent: any, key: string): any {\n  if (!parentTplContent) return undefined;\n\n  //  1: \n  const prototypeContent = _.get(parentTplContent, '$template');\n\n  //  2:  key \n  const specificContent = _.get(parentTplContent, key);\n\n  //  3: \n  if (_.isPlainObject(prototypeContent) && _.isPlainObject(specificContent)) {\n    logger.debug(\n      'getInheritedTemplateContent',\n      ` \"${key}\" \\n      - : ${JSON.stringify(\n        prototypeContent,\n      )}\\n      - : ${JSON.stringify(specificContent)}`,\n    );\n    //  mergeReplaceArray \n    const merged = mergeReplaceArray(_.cloneDeep(prototypeContent), specificContent);\n    logger.debug('getInheritedTemplateContent', `  - : ${JSON.stringify(merged)}`);\n    return merged;\n  } else if (_.isPlainObject(specificContent)) {\n    logger.debug(\n      'getInheritedTemplateContent',\n      ` \"${key}\" : ${JSON.stringify(specificContent)}`,\n    );\n    return specificContent;\n  } else if (_.isPlainObject(prototypeContent)) {\n    logger.debug(\n      'getInheritedTemplateContent',\n      ` \"${key}\" : ${JSON.stringify(prototypeContent)}`,\n    );\n    return prototypeContent;\n  }\n\n  logger.debug('getInheritedTemplateContent', ` \"${key}\" `);\n  return undefined;\n}\n\n/**\n * ****\n *\n * \n *\n * @param tplContent - \n * @param patchObj - \n * @returns {any} - \n */\nexport function applyTemplateToPatch(tplContent: any, patchObj: any): any {\n  logger.debug(\n    'applyTemplateToPatch',\n    `[] : ${JSON.stringify(tplContent)}, : ${JSON.stringify(patchObj)}`,\n  );\n\n  if (!_.isPlainObject(patchObj)) {\n    logger.debug('applyTemplateToPatch', `[] `);\n    return patchObj;\n  }\n  if (!tplContent) {\n    logger.debug('applyTemplateToPatch', `[] `);\n    return patchObj;\n  }\n\n  // \n  if (_.isEmpty(patchObj)) {\n    logger.debug('applyTemplateToPatch', ``);\n    return _.cloneDeep(tplContent);\n  }\n\n  // \n  const composed = mergeReplaceArray(_.cloneDeep(tplContent), patchObj);\n  logger.debug('applyTemplateToPatch', `: ${JSON.stringify(composed)}`);\n  return composed;\n}\n","/**\n * @file ERA  - \n * @description\n *  `<VariableInsert>`  `EditLog`\n *\n * ****:\n * - ****: \n * - ****: `applyInsertAtLevel` \n *   \n * - ****: \n *   \n */\n'use strict';\n\nimport { sanitizeArrays } from '../../../utils/data';\nimport { Logger } from '../../../utils/log';\nimport { applyTemplateToPatch, getInheritedTemplateContent, resolveTemplate } from './template';\n\nconst logger = new Logger();\n\n/**\n * ****\n *  `<VariableInsert>` ****\n *\n * ****:\n * 1. ****\n * 2. **** `player.inventory` `inventory`\n *     `insert` \n * 3. ****\n * 4. **** `$template` \n *\n * @param {any} statData -  ( `stat_data`)\n * @param {string} basePath - \n * @param {any} patchObj - \n * @param {any[]} editLog - \n * @param {any} inheritedContent - \n * @param {any} parentData -  `statData` \n */\nexport function applyInsertAtLevel(\n  statData: any,\n  basePath: string,\n  patchObj: any,\n  editLog: any[],\n  inheritedContent: any,\n  parentData: any, // \n) {\n  // --- 1.  ---\n  //  resolveTemplate parentData\n  const localTplContent = resolveTemplate(inheritedContent, parentData);\n  logger.debug('applyInsertAtLevel', `[] basePath: \"${basePath || 'root'}\"`, {\n    statData: _.cloneDeep(statData),\n  });\n\n  // --- 2.  ---\n  const currentNodeInVars = basePath ? _.get(statData, basePath) : statData;\n  const unInsertAble = _.get(currentNodeInVars, ['$meta', 'unInsertAble']);\n  logger.debug(\n    'applyInsertAtLevel',\n    `[] at path: \"${basePath || 'root'}\". currentNodeInVars :`,\n    currentNodeInVars,\n  );\n\n  // ** (Atomic Insert)**\n  // \n  if (basePath && currentNodeInVars === undefined) {\n    //  applyTemplateToPatch \n    const composed = applyTemplateToPatch(localTplContent, patchObj);\n\n    const finalValue = sanitizeArrays(composed); //  null \n    logger.debug('applyInsertAtLevel', ` at ${basePath}:\\n${JSON.stringify(finalValue, null, 2)}`);\n    _.set(statData, basePath, finalValue); // \n    editLog.push({ op: 'insert', path: basePath, value_new: _.cloneDeep(finalValue) });\n    logger.debug('applyInsertAtLevel', `: ${basePath}`);\n    return; // \n  }\n\n  // ** (Recursive Supplement)**\n  // \n  if (_.isPlainObject(currentNodeInVars) && _.isPlainObject(patchObj)) {\n    const patchKeys = Object.keys(patchObj);\n    const isMetaOnlyPatch = patchKeys.every(key => key === '$meta');\n    const hasMeaningfulPatch = patchKeys.length > 0;\n\n    if (unInsertAble === 'all' && hasMeaningfulPatch && !isMetaOnlyPatch) {\n      logger.warn(\n        'applyInsertAtLevel',\n        `VariableInsert  <${basePath || 'root'}>  \"$meta.unInsertAble: all\" `,\n        { basePath, patchObj, currentNodeInVars },\n      );\n      return;\n    }\n    logger.debug(\n      'applyInsertAtLevel',\n      `[] at path: \"${basePath || 'root'}\"\n      -  (localTplContent): ${JSON.stringify(localTplContent)}`,\n    );\n    for (const key of patchKeys) {\n      if (unInsertAble === 'self' && key !== '$meta' && !_.has(currentNodeInVars, key)) {\n        logger.warn(\n          'applyInsertAtLevel',\n          `VariableInsert  <${basePath || 'root'}>  \"$meta.unInsertAble: self\"  \"${key}\"`,\n          { basePath, patchObj, currentNodeInVars, rejectedKey: key },\n        );\n        continue;\n      }\n      const subPath = basePath ? `${basePath}.${key}` : key;\n      const subPatch = patchObj[key];\n      //  getInheritedTemplateContent\n      const subInheritedContent = getInheritedTemplateContent(localTplContent, key);\n      logger.debug(\n        'applyInsertAtLevel',\n        `  - : \"${key}\"\n      -  (subInheritedContent): ${JSON.stringify(subInheritedContent)}`,\n      );\n      //  currentNodeInVars  parentData \n      applyInsertAtLevel(statData, subPath, subPatch, editLog, subInheritedContent, currentNodeInVars);\n    }\n  } else if (basePath) {\n    // ****\n    // \n    // insert \n    logger.warn('applyInsertAtLevel', `VariableInsert  -> ${basePath}`, {\n      basePath,\n      patchObj,\n      currentNodeInVars,\n    });\n  }\n  //  basePath  patch \n}\n\n/**\n * ****  `<VariableInsert>` \n *\n * @param {any[]} allInserts -  insert \n * @param {any} initialStat -  `stat_data` \n * @returns {Promise<{ finalStat: any, editLog: any[] }>} - \n */\nexport async function processInsertBlocks(\n  allInserts: any[],\n  initialStat: any,\n): Promise<{ finalStat: any; editLog: any[] }> {\n  if (!allInserts || allInserts.length === 0) {\n    return { finalStat: initialStat, editLog: [] };\n  }\n\n  logger.debug('processInsertBlocks', '[]  processInsertBlocks  statData:', _.cloneDeep(initialStat));\n\n  const currentStat = _.cloneDeep(initialStat);\n  const editLog: any[] = [];\n\n  /*\n   *  insertRoot\n   *  insertRoot  insertRoot  `currentStat` \n   *  <VariableInsert> \n   *  <VariableInsert> \n   */\n  for (const insertRoot of allInserts) {\n    if (!_.isPlainObject(insertRoot) || _.isEmpty(insertRoot)) continue;\n    try {\n      logger.debug('processInsertBlocks', ` insertRoot: ${JSON.stringify(insertRoot)}`);\n      //  ''  null\n      applyInsertAtLevel(currentStat, '', insertRoot, editLog, null, null);\n    } catch (e: any) {\n      logger.error('processInsertBlocks', ` insertRoot : ${e?.message || e}`, {\n        error: e,\n        insertRoot,\n        currentStat,\n      });\n    }\n  }\n\n  logger.debug('processInsertBlocks', ' VariableInsert ');\n  return { finalStat: currentStat, editLog };\n}\n","/**\n * @file ERA  - \n * @description\n *  `<VariableEdit>`  `EditLog`\n *\n * ****:\n * - ****: \n * - ****: `EditLog` `applyEditAtLevel` \n *   \n * - ****: \n *   \n */\n'use strict';\n\nimport { LOGS_PATH, SEL_PATH } from '../../utils/constants';\nimport { sanitizeArrays } from '../../utils/data';\nimport { Logger } from '../../utils/log';\nimport { findLatestNewValue } from '../timetravel';\n\nconst logger = new Logger();\n\n/**\n * ** | **\n *  `<VariableEdit>` ****\n *\n * ****:\n * 1. ****\n * 2. ****\n * 3. **** `EditLog`****\n *     `findLatestNewValue`  `EditLog` \n *    \n *\n * @param {any} statData -  ()\n * @param {string} basePath - \n * @param {any} patchObj - \n * @param {any[]} editLog -  ()\n * @param {number} messageId -  ID\n * @param {string[]} selectedMks -  MK \n * @param {{ [mk: string]: string }} allLogs -  EditLog \n */\nasync function applyEditAtLevel(\n  statData: any,\n  basePath: string,\n  patchObj: any,\n  editLog: any[],\n  messageId: number,\n  selectedMks: (string | null)[],\n  allLogs: { [mk: string]: string },\n) {\n  // --- 1.  ---\n  const currentNodeInVars = basePath ? _.get(statData, basePath) : statData;\n  if (currentNodeInVars === undefined) {\n    logger.warn('applyEditAtLevel', `VariableEdit  -> ${basePath || '(root)'}`, {\n      basePath,\n      patchObj,\n    });\n    return;\n  }\n\n  // --- 2.  (`updatable`) ---\n  //  updatable  true ()\n  const isUpdatable = _.get(currentNodeInVars, ['$meta', 'updatable'], true);\n\n  //  updatable  false  true \n  const isBypassingProtection =\n    isUpdatable === false && // \n    _.get(patchObj, ['$meta', 'updatable']) === true; //  true\n\n  // \n  if (isUpdatable === false && !isBypassingProtection) {\n    logger.warn(\n      'applyEditAtLevel',\n      `VariableEdit  <${basePath}>  \"$meta.updatable: false\" `,\n      { basePath, patchObj, currentNodeInVars },\n    );\n    return; // \n  }\n\n  // --- 3.  ---\n  // \n  for (const key of Object.keys(patchObj)) {\n    const subPath = basePath ? `${basePath}.${key}` : key;\n    const valNew = patchObj[key];\n\n    // ****\n    // \n    if (_.isPlainObject(valNew)) {\n      await applyEditAtLevel(statData, subPath, valNew, editLog, messageId, selectedMks, allLogs);\n      continue; // \n    }\n\n    // ** ()**\n    // \n\n    // \n    if (!_.has(statData, subPath)) {\n      logger.warn('applyEditAtLevel', `VariableEdit  -> ${subPath}`, {\n        subPath,\n        valNew,\n        statData,\n      });\n      continue;\n    }\n\n    // a.  (`valOld`)\n    // \n    logger.debug('applyEditAtLevel', `[]  <${subPath}>  ID <${messageId}> ...`);\n    let valOld = findLatestNewValue(subPath, messageId, selectedMks, allLogs);\n    if (valOld === null) {\n      // statData \n      //  <VariableEdit> \n      valOld = _.get(statData, subPath);\n      logger.debug(\n        'applyEditAtLevel',\n        `[]  stat_data : ${JSON.stringify(valOld)}`,\n      );\n    } else {\n      logger.debug('applyEditAtLevel', `[] : ${JSON.stringify(valOld)}`);\n    }\n\n    const cleaned = sanitizeArrays(valNew); // \n\n    // b. \n    //  EditLog\n    // \n    _.set(statData, subPath, cleaned);\n    editLog.push({\n      op: 'update',\n      path: subPath,\n      value_old: _.cloneDeep(valOld),\n      value_new: _.cloneDeep(cleaned),\n    });\n  }\n}\n\n/**\n *  `<VariableEdit>` \n * \n *\n * @param {any[]} allEdits -  edit \n * @param {number} messageId -  ID\n * @param {any} initialStat -  `stat` \n * @param {any} meta -  `selectedMks`  `allLogs` \n * @returns {Promise<{ finalStat: any, editLog: any[] }>} \n */\nexport async function processEditBlocks(\n  allEdits: any[],\n  messageId: number,\n  initialStat: any,\n  meta: any,\n): Promise<{ finalStat: any; editLog: any[] }> {\n  if (!allEdits || allEdits.length === 0) {\n    return { finalStat: _.cloneDeep(initialStat), editLog: [] };\n  }\n\n  // \n  const finalStat = _.cloneDeep(initialStat);\n  const editLog: any[] = [];\n\n  const selectedMks: string[] = _.get(meta, SEL_PATH, []);\n  const allLogs: { [mk: string]: string } = _.get(meta, LOGS_PATH, {});\n\n  //  <VariableEdit> \n  for (const editRoot of allEdits) {\n    if (!_.isPlainObject(editRoot) || _.isEmpty(editRoot)) continue;\n    try {\n      logger.debug('processEditBlocks', ` editRoot: `, editRoot);\n      //  '' \n      // applyEditAtLevel  finalStat  editLog\n      await applyEditAtLevel(finalStat, '', editRoot, editLog, messageId, selectedMks, allLogs);\n    } catch (e: any) {\n      logger.error('processEditBlocks', ` editRoot : ${e?.message || e}`, {\n        error: e,\n        editRoot,\n        finalStat,\n      });\n    }\n  }\n\n  logger.debug('processEditBlocks', ' VariableEdit ');\n  return { finalStat, editLog };\n}\n","/**\n * @file ERA  - \n * @description\n *  ERA  `chat` \n *\n * ****:\n * \n * \n * 1. ****:  AI  `<VariableInsert>`  `<VariableEdit>` \n * 2. ****: \n * 3. ****:  `recursive.ts`  `EditLog`\n * 4. ****: MK `EditLog` \n *     `swipe` \n *\n * ****:\n * - ** MK** MK  `message_key.ts` \n * - `ApplyVarChangeForMessage` ** `EditLog`** `SelectedMks`\n *    `SelectedMks`  `ApplyVarChange` \n *   \n */\n\n'use strict';\n\nimport { readMessageKey } from '../../core/key/mk';\nimport { EraConfig } from '../../utils/constants';\nimport { Logger } from '../../utils/log';\nimport { EraCommand, extractAndParseCommands } from '../../utils/message';\nimport { processDeleteBlocks } from './delete';\nimport { processInsertBlocks } from './insert/insert';\nimport { processEditBlocks } from './update';\n\nconst logger = new Logger();\n\n/**\n * ** - **\n *\n * ****:\n * \n * \n *\n * ****:\n *  `ApplyVarChange`  `resyncStateOnHistoryChange`\n * 1. ****:  `msg` `initialStat`  `meta`\n * 2. ****:  `{ finalStat, finalEditLog }`\n *     `updateEraStatData`  `updateEraMetaData`\n *\n * @param {any} msg - \n * @param {any} initialStat -  `stat_data`\n * @param {any} meta -  `EditLogs`  `SelectedMks` \n * @returns {Promise<{ finalStat: any; finalEditLog: any[] }>}  EditLog\n */\nexport const ApplyVarChangeForMessage = async (\n  msg: any,\n  initialStat: any,\n  meta: any,\n  config: Partial<EraConfig> = {},\n): Promise<{ finalStat: any; finalEditLog: any[]; mk: string | null }> => {\n  logger.debug('ApplyVarChangeForMessage (Pure)', ` (ID: ${msg.message_id})...`);\n  const mk = readMessageKey(msg);\n  logger.debug('ApplyVarChangeForMessage (Pure)', `mk`, mk);\n  try {\n    logger.debug('ApplyVarChangeForMessage (Pure)', `...`);\n    // 1. \n    const commands: EraCommand[] = extractAndParseCommands(msg, config.);\n\n    let currentStat = initialStat;\n    const accumulatedLogs: any[] = [];\n\n    logger.debug('ApplyVarChangeForMessage (Pure)', '...', commands);\n\n    // 2. \n    for (const command of commands) {\n      let result;\n      switch (command.type) {\n        case 'insert':\n          result = await processInsertBlocks(command.data, currentStat);\n          logger.debug('ApplyVarChangeForMessage (Pure)', ' Insert ', {\n            inputStat: currentStat,\n            outputStat: result.finalStat,\n            log: result.editLog,\n          });\n          break;\n        case 'edit':\n          result = await processEditBlocks(command.data, msg.message_id, currentStat, meta);\n          logger.debug('ApplyVarChangeForMessage (Pure)', ' Edit ', {\n            inputStat: currentStat,\n            outputStat: result.finalStat,\n            log: result.editLog,\n          });\n          break;\n        case 'delete':\n          result = await processDeleteBlocks(command.data, currentStat);\n          logger.debug('ApplyVarChangeForMessage (Pure)', ' Delete ', {\n            inputStat: currentStat,\n            outputStat: result.finalStat,\n            log: result.editLog,\n          });\n          break;\n        default:\n          logger.warn('ApplyVarChangeForMessage (Pure)', '', command);\n          continue; // \n      }\n\n      // \n      currentStat = result.finalStat;\n      // \n      if (result.editLog && result.editLog.length > 0) {\n        accumulatedLogs.push(...result.editLog);\n      }\n    }\n\n    // 3. \n    logger.debug('ApplyVarChangeForMessage (Pure)', '', {\n      finalStat: currentStat,\n      finalEditLog: accumulatedLogs,\n    });\n    return { finalStat: currentStat, finalEditLog: accumulatedLogs, mk };\n  } catch (err: any) {\n    logger.error('ApplyVarChangeForMessage (Pure)', `: ${err?.message || err}`, {\n      error: err,\n      message: msg,\n      initialStat,\n      meta,\n    });\n    // \n    return { finalStat: initialStat, finalEditLog: [], mk };\n  }\n};\n","'use strict';\n\n/**\n * @file \n * @description  `resyncStateOnHistoryChange`  ERA \n *  (swipe) \n *\n * ###  (Feature, not a bug)\n *\n *  swipe ( id=2 ) \n * 1. ****:  swipe (id=3) **** swipe (id=2) **** id=2 \n * 2. ****:  swipe 3 **** (id=3) \n * 3. ****:  swipe  swipe 3 **** (id=3)\n * 4. ****:  id=3 id=2  id=3 \n *\n * ### \n *\n * `resyncStateOnHistoryChange` \n * 1.  `message_deleted`, `message_swiped` \n * 2.  `SelectedMks` \n * 3. \n * 4. ****:  `MK` \n * 5. ****: ****\n *\n * ****: \n */\n\nimport { LOGS_PATH, SEL_PATH } from '../utils/constants';\nimport { parseEditLog } from '../utils/data';\nimport { getEraData, settings, updateEraMetaData, updateEraStatData } from '../utils/era_data';\nimport { Logger } from '../utils/log';\nimport { ApplyVarChangeForMessage } from './crud/patcher';\nimport { ensureMessageKey, readMessageKey } from './key/mk';\nimport { rollbackStatToMK } from './timetravel';\n\nconst logger = new Logger();\n\n/**\n * MKnull\n * @param msg \n * @returns MK  null\n */\nconst getMkFromMsg = (msg: any): string | null => {\n  const key = readMessageKey(msg);\n  if (!key) return null;\n\n  return key;\n};\n\n/**\n *  MK  EditLog \n * @param mks MK \n * @param metaData \n * @returns  EditLog  true\n */\nconst checkEditLogsAreEmpty = (mks: (string | null)[], metaData: any): boolean => {\n  for (const mk of mks) {\n    if (!mk) continue; //  null ()\n    const editLogRaw = _.get(metaData, [LOGS_PATH, mk]);\n    const editLog = parseEditLog(editLogRaw);\n    if (editLog.length > 0) {\n      return false; //  log false\n    }\n  }\n  return true; //  log \n};\n\n/**\n * \n * \n * \n *\n * @param allMessages \n * @param oldSelectedMks  (MK) \n * @param initialMeta  EditLogs\n * @param forceFullResync  true\n * @returns \n */\nconst findDivergencePoint = (\n  allMessages: any[],\n  oldSelectedMks: (string | null)[],\n  initialMeta: any,\n  forceFullResync: boolean,\n): { type: 'FULL_RECALC'; recalcId: number } | { type: 'FAST_SYNC'; newSelectedMks: (string | null)[] } => {\n  if (forceFullResync) {\n    logger.debug('findDivergencePoint', ' 0');\n    return { type: 'FULL_RECALC', recalcId: 0 };\n  }\n\n  const currentMks = allMessages.map(getMkFromMsg);\n\n  // 1. \n  let firstMismatch = -1;\n  const minLength = Math.min(currentMks.length, oldSelectedMks.length);\n  for (let i = 0; i < minLength; i++) {\n    if (currentMks[i] !== oldSelectedMks[i]) {\n      firstMismatch = i;\n      break;\n    }\n  }\n  if (firstMismatch === -1 && currentMks.length !== oldSelectedMks.length) {\n    firstMismatch = minLength;\n  }\n\n  // 2. \n  if (firstMismatch === -1) {\n    const recalcId = allMessages.length > 0 ? allMessages.length - 1 : 0;\n    logger.debug('findDivergencePoint', `MK (ID: ${recalcId})`);\n    return { type: 'FULL_RECALC', recalcId };\n  }\n\n  // 3. \n  const deletedMks = _.difference(oldSelectedMks, currentMks);\n  const addedMks = _.difference(currentMks, oldSelectedMks);\n\n  // \n  if (addedMks.length === 0 && deletedMks.length > 0 && checkEditLogsAreEmpty(deletedMks, initialMeta)) {\n    logger.debug('findDivergencePoint', '');\n    return { type: 'FAST_SYNC', newSelectedMks: currentMks };\n  }\n\n  // \n  logger.debug('findDivergencePoint', ` (ID: ${firstMismatch}) `);\n  return { type: 'FULL_RECALC', recalcId: firstMismatch };\n};\n\n/**\n * \n * \n * \n * @param {boolean} [forceFullResync=false] -  true\n * @param {number} [targetMessageId] -  ID\n * @param {boolean} [stopAtTarget=false] -  true\n */\nexport const resyncStateOnHistoryChange = async (\n  forceFullResync = false,\n  targetMessageId?: number,\n  stopAtTarget = false,\n) => {\n  try {\n    if (forceFullResync) {\n      logger.warn('resyncStateOnHistoryChange', '');\n    } else {\n      logger.debug('resyncStateOnHistoryChange', '...');\n    }\n\n    //  config\n    const config = {\n      : settings.value.,\n    };\n\n    // getChatMessages  message_id 0 \n    const allMessages = getChatMessages('0-{{lastMessageId}}', { include_swipes: true });\n    logger.debug('resyncStateOnHistoryChange', ' allMessages:', allMessages);\n\n    // \n    const { stat: initialStat, meta: initialMeta } = getEraData();\n    // oldSelectedMks  initialMeta \n    const oldSelectedMks: (string | null)[] = _.cloneDeep(_.get(initialMeta, SEL_PATH, []));\n\n    logger.debug(\n      'resyncStateOnHistoryChange',\n      `: oldSelectedMks.length=${oldSelectedMks.length}, allMessages.length=${allMessages?.length ?? 0}`,\n    );\n\n    if (!allMessages || allMessages.length === 0) {\n      logger.debug('resyncStateOnHistoryChange', '');\n      return;\n    }\n\n    // 1. \n    let divergence:\n      | { type: 'FULL_RECALC'; recalcId: number }\n      | { type: 'FAST_SYNC'; newSelectedMks: (string | null)[] };\n    if (typeof targetMessageId === 'number' && Number.isFinite(targetMessageId)) {\n      const normalizedTargetId = Number(targetMessageId);\n      logger.debug(\n        'resyncStateOnHistoryChange',\n        ` ID ${normalizedTargetId} `,\n      );\n      divergence = { type: 'FULL_RECALC', recalcId: normalizedTargetId };\n    } else {\n      divergence = findDivergencePoint(allMessages, oldSelectedMks, initialMeta, forceFullResync);\n    }\n\n    // 2. \n    if (divergence.type === 'FAST_SYNC') {\n      logger.debug('resyncStateOnHistoryChange', '...');\n      await updateEraMetaData(meta => {\n        _.set(meta, SEL_PATH, divergence.newSelectedMks);\n        return meta;\n      });\n      logger.debug('resyncStateOnHistoryChange', ' SelectedMks ');\n      return;\n    }\n\n    const firstRecalcId = divergence.recalcId;\n\n    // 3. \n    // \n    let statForRecalc = initialStat;\n    if (firstRecalcId > -1 && firstRecalcId < oldSelectedMks.length) {\n      const allLogs: { [mk: string]: string } = _.get(initialMeta, LOGS_PATH, {});\n      const currentMK = oldSelectedMks[oldSelectedMks.length - 1];\n      const targetMK = firstRecalcId > 0 ? oldSelectedMks[firstRecalcId - 1] : undefined;\n\n      if (currentMK) {\n        logger.debug('resyncStateOnHistoryChange', `: ${currentMK}, : ${targetMK || ''}`);\n        // \n        statForRecalc = rollbackStatToMK(targetMK, currentMK, initialStat, oldSelectedMks, allLogs);\n        logger.debug('resyncStateOnHistoryChange', '');\n      }\n    }\n\n    // 4.  selectedMks\n    logger.debug('resyncStateOnHistoryChange', ` ID ${firstRecalcId} ...`);\n    const newSelectedMks: (string | null)[] = oldSelectedMks.slice(0, firstRecalcId); // \n\n    //  meta \n    const metaForRecalc = _.cloneDeep(initialMeta);\n\n    for (let i = firstRecalcId; i < allMessages.length; i++) {\n      // \n      if (stopAtTarget && i > firstRecalcId) {\n        logger.debug('resyncStateOnHistoryChange', ` ID: ${firstRecalcId}`);\n        break;\n      }\n      const msg = allMessages[i];\n\n      // ---  ---\n      // \n      // 1. \n      const contextMeta = _.cloneDeep(metaForRecalc);\n      // 2.  selectedMks \n      //    newSelectedMks  0  i-1 \n      _.set(contextMeta, SEL_PATH, newSelectedMks.slice(0, i));\n      // ---  ---\n\n      let ensuredMkForCurrent: string | null = readMessageKey(msg) || null;\n      if (!ensuredMkForCurrent) {\n        logger.debug('resyncStateOnHistoryChange', `id: ${msg?.message_id ?? 'unknown'})  MK.`);\n        try {\n          const { mk: ensuredMk } = await ensureMessageKey(msg);\n          ensuredMkForCurrent = ensuredMk;\n          //mkmk\n        } catch (ensureError: any) {\n          logger.error('resyncStateOnHistoryChange', `mk`, {\n            ensureError,\n            message_id: msg?.message_id,\n          });\n          continue;\n        }\n      }\n\n      // \n      const { finalStat, finalEditLog, mk } = await ApplyVarChangeForMessage(msg, statForRecalc, contextMeta, config);\n\n      newSelectedMks[i] = ensuredMkForCurrent;\n\n      // \n      statForRecalc = finalStat;\n      //  metaForRecalc  clone \n      _.set(metaForRecalc, [LOGS_PATH, ensuredMkForCurrent], finalEditLog);\n    }\n    logger.debug('resyncStateOnHistoryChange', '');\n\n    // 5. \n    // statForRecalc  stat\n    // metaForRecalc  SEL_PATH\n    _.set(metaForRecalc, SEL_PATH, newSelectedMks);\n\n    await updateEraStatData(() => statForRecalc);\n    await updateEraMetaData(() => metaForRecalc);\n    logger.debug('resyncStateOnHistoryChange', '');\n  } catch (error: any) {\n    logger.error('resyncStateOnHistoryChange', `: ${error?.message || error}`, {\n      error,\n      forceFullResync,\n      eraData: getEraData(),\n      allMessages: getChatMessages('0-{{lastMessageId}}', { include_swipes: true }),\n    });\n  }\n};\n","/**\n * @file \n * @description UI, , \n */\n\nimport { Logger } from '../utils/log';\n\nconst log = new Logger();\n\n/*\n *  (UI)\n * @param messageId ID\n * @returns  Promise,  resolve\n */\n// function forceRenderMessage_backup_by_UI_event(messageId: number): Promise<void> {\n//   return new Promise(resolve => {\n//     const messageSelector = `div.mes[mesid=\"${messageId}\"]`;\n//     const $message = $(messageSelector);\n//\n//     if ($message.length === 0) {\n//       log.warn('forceRenderMessage_backup_by_UI_event', `ID ${messageId} div`);\n//       return resolve();\n//     }\n//\n//     const { state, buttons } = analyzeMessageUI($message);\n//\n//     if (state === 'editing') {\n//       // \n//       buttons.cancelEdit?.trigger('click');\n//       log.debug('forceRenderMessage_backup_by_UI_event', ` ${messageId} `);\n//       setTimeout(resolve, 50);\n//     } else {\n//       // \n//       buttons.edit?.trigger('click');\n//       log.debug('forceRenderMessage_backup_by_UI_event', ` ${messageId} `);\n//       setTimeout(() => {\n//         // \n//         const { buttons: updatedButtons } = analyzeMessageUI($message);\n//         updatedButtons.cancelEdit?.trigger('click');\n//         log.debug('forceRenderMessage_backup_by_UI_event', ` ${messageId} `);\n//         resolve();\n//       }, 50);\n//     }\n//   });\n// }\n\n/**\n * \n * @param messageId ID\n * @returns  Promise,  resolve\n */\nasync function forceRenderMessage(messageId: number): Promise<void> {\n  const messages = getChatMessages(messageId);\n\n  if (!messages || messages.length === 0) {\n    log.warn('forceRenderMessage', `ID ${messageId} `);\n    return;\n  }\n\n  const message = messages[0];\n\n  //  setChatMessages \n  await setChatMessages([{ message_id: messageId, message: message.message }]);\n  log.debug('forceRenderMessage', ` setChatMessages  ${messageId}`);\n}\n\n/**\n * N, \n * \n */\nexport async function forceRenderRecentMessages() {\n  const scriptVars = getVariables({ type: 'script', script_id: getScriptId() });\n\n  // \n  const forceReload = _.get(scriptVars, '', false);\n  if (!forceReload) {\n    log.debug('forceRenderRecentMessages', ', ');\n    return; // \n  }\n\n  // 1\n  const messageCount = _.get(scriptVars, '', 1);\n  log.log('forceRenderRecentMessages', `, : ${messageCount}`);\n\n  // , \n  await new Promise(resolve => setTimeout(resolve, 1000));\n\n  const allMessages = getChatMessages('0-{{lastMessageId}}');\n  if (!allMessages || allMessages.length === 0) {\n    log.warn('forceRenderRecentMessages', ', ');\n    return;\n  }\n\n  // \n  const recentMessages = allMessages.slice(-messageCount);\n\n  for (const message of recentMessages) {\n    log.debug('forceRenderRecentMessages', `: ${message.message_id}`);\n    await forceRenderMessage(message.message_id);\n    // , UI\n    await new Promise(resolve => setTimeout(resolve, 100));\n  }\n  log.log('forceRenderRecentMessages', '');\n}\n","'use strict';\n\nimport { updateLatestSelectedMk } from '../../core/key/mk';\nimport { resyncStateOnHistoryChange } from '../../core/sync';\nimport { forceRenderRecentMessages } from '../../ui/patch';\nimport { Logger } from '../../utils/log';\nimport { emitWriteDoneEvent } from '../emitters/events';\nimport { EventJob } from '../merger';\nimport { ActionsTaken, DispatcherPayload } from '../types';\n\nconst logger = new Logger();\n\nexport async function handleSyncEvent(\n  job: EventJob,\n  actionsTaken: ActionsTaken,\n  payload: DispatcherPayload,\n  targetMessageId?: number,\n  stopAtTarget = false,\n): Promise<void> {\n  const { type: eventType } = job;\n  logger.debug('handleSyncEvent', ` ${eventType} ...`);\n  const isFullSync = eventType === 'manual_full_sync';\n  await resyncStateOnHistoryChange(isFullSync, targetMessageId, stopAtTarget);\n  actionsTaken.resync = true;\n  // \n  if (eventType != 'combo_sync') forceRenderRecentMessages();\n\n  // \n  await updateLatestSelectedMk(payload.mk);\n  const allMessages = getChatMessages('0-{{lastMessageId}}', { include_swipes: true });\n  logger.debug('handleSyncEvent', 'sync', allMessages);\n  emitWriteDoneEvent(payload);\n}\n","/**\n * @file ERA  -  API \n * @description\n *  ERA \n *\n * ****:\n * ERA  ERA ****\n * `eventEmit(eventName, eventData)` \n *\n * `index.ts`  `era:*`  `event_queue.ts` \n *  `insertByObject`\n *\n *  AI \n * `<VariableInsert>`  `<VariableEdit>`  `setChatMessages` \n *  `character_message_rendered`  ERA \n *  API  ERA \n */\n\nimport { getStatAtMK, getStatsBetweenMKs } from '../../../core/snapshot';\nimport { SEL_PATH, WriteDonePayload } from '../../../utils/constants';\nimport { J, unescapeEraData } from '../../../utils/data';\nimport { getEraData, removeMetaFields } from '../../../utils/era_data';\nimport { Logger } from '../../../utils/log';\nimport { findLastAiMessage, getMessageContent, isUserMessage, updateMessageContent } from '../../../utils/message';\nimport { debouncedEmitApiWrite, emitQueryResultEvent, emitWriteDoneEvent } from '../../emitters/events';\nimport { EventJob } from '../../merger';\nimport { ActionsTaken, DispatcherPayload } from '../../types';\nimport { handleSyncEvent } from '../sync';\n\nconst logger = new Logger();\nlet lastWriteDonePayload: WriteDonePayload | null = null;\neventOn('era:writeDone', (payload: WriteDonePayload) => {\n  lastWriteDonePayload = payload;\n});\n\n// API \ninterface ApiWriteJob {\n  blockTag: 'VariableInsert' | 'VariableEdit' | 'VariableDelete';\n  blockContent: object;\n}\n\n// ==================================================================\n// API \n// ( `constants.ts`  `ERA_API_EVENTS` )\n// ==================================================================\n\n/**\n * @section API Event: 'era:insertByObject'\n * @description \n * @param {object} detail - \n * @example\n * eventEmit('era:insertByObject', {\n *   player: { name: \"\", hp: 100, inventory: [] }\n * });\n */\n\n/**\n * @section API Event: 'era:updateByObject'\n * @description \n * @param {object} detail - \n * @example\n * eventEmit('era:updateByObject', {\n *   player: { hp: 120, status: 'blessed' }\n * });\n */\n\n/**\n * @section API Event: 'era:insertByPath'\n * @description \n * @param {object} detail - \n * @param {string} detail.path - \n * @param {*} detail.value - \n * @example\n * eventEmit('era:insertByPath', {\n *   path: 'player.inventory[0]',\n *   value: { name: '', count: 3 }\n * });\n */\n\n/**\n * @section API Event: 'era:updateByPath'\n * @description \n * @param {object} detail - \n * @param {string} detail.path - \n * @param {*} detail.value - \n * @example\n * eventEmit('era:updateByPath', {\n *   path: 'player.hp',\n *   value: '+=10'\n * });\n */\n\n/**\n * @section API Event: 'era:deleteByObject'\n * @description \n * @param {object} detail - \n * @example\n * //  player.gold gold  {}\n * eventEmit('era:deleteByObject', { player: { gold: {} } });\n *\n * //  player \n * eventEmit('era:deleteByObject', { player: {} });\n *\n * // ****:  player  gold  mana \n * //  gold  mana player \n * //  `eventEmit('era:deleteByObject', { player: {} })` \n * eventEmit('era:deleteByObject', { player: { gold: {}, mana: {} } });\n */\n\n/**\n * @section API Event: 'era:deleteByPath'\n * @description \n * @param {object} detail - \n * @param {string} detail.path - \n * @example\n * eventEmit('era:deleteByPath', { path: 'player.inventory[0]' });\n */\n\n// ==================================================================\n// \n// ==================================================================\n\n/**\n *  AI \n * \n * @returns {Promise<any | null>}  AI  null\n */\n\n/**\n *  API \n *  AI  'era:apiWrite' \n * @param {ApiWriteJob} job - \n */\nasync function performApiWrite(job: ApiWriteJob) {\n  // 1. \n  const contentString = J(job.blockContent);\n  const block = `\\n<${job.blockTag}>\\n${contentString}\\n</${job.blockTag}>`;\n\n  // 2. \n  const lastAiMessage = await findLastAiMessage();\n  if (!lastAiMessage) {\n    logger.warn('performApiWrite', ' AI  API ');\n    return;\n  }\n\n  const originalContent = getMessageContent(lastAiMessage) ?? '';\n  const newContent = originalContent + block;\n\n  logger.debug('performApiWrite', ` API  (${job.blockTag})  ID ${lastAiMessage.message_id}...`);\n\n  // 3. \n  await updateMessageContent(lastAiMessage, newContent);\n\n  // 4. \n  debouncedEmitApiWrite();\n}\n\n// ==================================================================\n//  ( event_queue.ts )\n// ==================================================================\n\n/**\n * ****  `era:insertByObject` \n * @param {object} data -  `detail` \n */\nexport function insertByObject(data: object) {\n  performApiWrite({ blockTag: 'VariableInsert', blockContent: data });\n}\n\n/**\n * ****  `era:updateByObject` \n * @param {object} data -  `detail` \n */\nexport function updateByObject(data: object) {\n  performApiWrite({ blockTag: 'VariableEdit', blockContent: data });\n}\n\n/**\n * ****  `era:insertByPath` \n * @param {string} path -  `detail`  `path` \n * @param {*} value -  `detail`  `value` \n */\nexport function insertByPath(path: string, value: any) {\n  const block = _.set({}, path, value);\n  performApiWrite({ blockTag: 'VariableInsert', blockContent: block });\n}\n\n/**\n * ****  `era:updateByPath` \n * @param {string} path -  `detail`  `path` \n * @param {*} value -  `detail`  `value` \n */\nexport function updateByPath(path: string, value: any) {\n  const block = _.set({}, path, value);\n  performApiWrite({ blockTag: 'VariableEdit', blockContent: block });\n}\n\n/**\n * ****  `era:deleteByObject` \n * @param {object} data -  `detail` \n */\nexport function deleteByObject(data: object) {\n  performApiWrite({ blockTag: 'VariableDelete', blockContent: data });\n}\n\n/**\n * ****  `era:deleteByPath` \n * @param {string} path -  `detail`  `path` \n */\nexport function deleteByPath(path: string) {\n  // \n  const block = _.set({}, path, {});\n  performApiWrite({ blockTag: 'VariableDelete', blockContent: block });\n}\n\n/**\n * ****  `era:getCurrentVars` \n *  `era:queryResult` \n * @param {any} detail -  detail \n */\nexport function handleGetCurrentVars(detail: any) {\n  logger.debug('handleGetCurrentVars', ``);\n  let result: any;\n  try {\n    const { stat, meta } = getEraData();\n    const selectedMks: (string | null)[] = _.get(meta, SEL_PATH, []);\n    const lastMk = selectedMks[selectedMks.length - 1] || '';\n    const lastMessageId = selectedMks.length - 1;\n    const messages = getChatMessages('0-{{lastMessageId}}', { include_swipes: false });\n    const lastMessage = messages[lastMessageId];\n\n    result = {\n      mk: lastMk,\n      message_id: lastMessageId,\n      is_user: lastMessage ? isUserMessage(lastMessage) : false,\n      stat: unescapeEraData(stat),\n      statWithoutMeta: unescapeEraData(removeMetaFields(stat)),\n    };\n  } catch (error) {\n    const errorMessage = `: ${error instanceof Error ? error.message : String(error)}`;\n    logger.error('handleGetCurrentVars', errorMessage);\n    result = { error: errorMessage };\n  }\n  emitQueryResultEvent('getCurrentVars', detail, result);\n}\n\n/**\n * ****  `era:getSnapshotAtMk` \n *  MK  `era:queryResult` \n * @param {any} detail -  `detail`  `mk`\n */\nexport function handleGetSnapshotAtMk(detail: any) {\n  logger.debug('handleGetSnapshotAtMk', `...`);\n  let result: any;\n  try {\n    const mk = detail?.mk;\n    if (!mk) {\n      throw new Error(' \"mk\" ');\n    }\n\n    logger.debug('handleGetSnapshotAtMk', `MK: ${mk}`);\n    const stat = getStatAtMK(mk);\n\n    if (stat) {\n      const { meta } = getEraData();\n      const selectedMks: (string | null)[] = _.get(meta, SEL_PATH, []);\n      const message_id = selectedMks.indexOf(mk);\n      const messages = getChatMessages('0-{{lastMessageId}}', { include_swipes: false });\n      const message = messages[message_id];\n\n      result = {\n        mk,\n        message_id,\n        is_user: message ? isUserMessage(message) : false,\n        stat: unescapeEraData(stat),\n        statWithoutMeta: unescapeEraData(removeMetaFields(stat)),\n      };\n    } else {\n      const errorMessage = ` MK \"${mk}\" `;\n      logger.warn('handleGetSnapshotAtMk', errorMessage);\n      result = { error: errorMessage, stat: null };\n    }\n  } catch (error) {\n    const errorMessage = `: ${error instanceof Error ? error.message : String(error)}`;\n    logger.error('handleGetSnapshotAtMk', errorMessage);\n    result = { error: errorMessage };\n  }\n  emitQueryResultEvent('getSnapshotAtMk', detail, result);\n}\n\n/**\n * ****  `era:getSnapshotsBetweenMks` \n *  MK  `era:queryResult` \n * @param {any} detail -  `detail`  `startMk`  `endMk`\n */\nexport function handleGetSnapshotsBetweenMks(detail: any) {\n  const { startMk, endMk } = detail || {};\n  logger.debug('handleGetSnapshotsBetweenMks', `: ${startMk || ''}, : ${endMk || ''}`);\n  let finalResult: any;\n\n  try {\n    const results = getStatsBetweenMKs(startMk, endMk);\n\n    if (results) {\n      const messages = getChatMessages('0-{{lastMessageId}}', { include_swipes: false });\n      finalResult = results.map(item => {\n        const message = messages[item.message_id];\n        return {\n          ...item,\n          is_user: message ? isUserMessage(message) : false,\n          stat: unescapeEraData(item.stat),\n          statWithoutMeta: unescapeEraData(removeMetaFields(item.stat)),\n        };\n      });\n    } else {\n      logger.warn('handleGetSnapshotsBetweenMks', '');\n      finalResult = [];\n    }\n  } catch (error) {\n    const errorMessage = `: ${error instanceof Error ? error.message : String(error)}`;\n    logger.error('handleGetSnapshotsBetweenMks', errorMessage);\n    finalResult = { error: errorMessage };\n  }\n  emitQueryResultEvent('getSnapshotsBetweenMks', detail, finalResult);\n}\n\n/**\n * ****  `era:getSnapshotAtMId` \n *  message_id  `era:queryResult` \n * @param {any} detail -  `detail`  `message_id`\n */\nexport function handleGetSnapshotAtMId(detail: any) {\n  logger.debug('handleGetSnapshotAtMId', `...`);\n  let result: any;\n  try {\n    const message_id = detail?.message_id;\n    if (typeof message_id !== 'number') {\n      throw new Error(' \"message_id\" ');\n    }\n\n    logger.debug('handleGetSnapshotAtMId', `Message ID: ${message_id}`);\n\n    const { meta } = getEraData();\n    const selectedMks: (string | null)[] = _.get(meta, SEL_PATH, []);\n\n    if (message_id < 0 || message_id >= selectedMks.length) {\n      throw new Error(`Message ID ${message_id}  [0, ${selectedMks.length - 1}]`);\n    }\n\n    const mk = selectedMks[message_id];\n    if (!mk) {\n      const errorMessage = `Message ID ${message_id}  MK`;\n      logger.warn('handleGetSnapshotAtMId', errorMessage);\n      result = { error: errorMessage, stat: null };\n    } else {\n      const stat = getStatAtMK(mk);\n      if (stat) {\n        const messages = getChatMessages('0-{{lastMessageId}}', { include_swipes: false });\n        const message = messages[message_id];\n        result = {\n          mk,\n          message_id,\n          is_user: message ? isUserMessage(message) : false,\n          stat: unescapeEraData(stat),\n          statWithoutMeta: unescapeEraData(removeMetaFields(stat)),\n        };\n      } else {\n        const errorMessage = `MK: ${mk} ( Message ID: ${message_id})`;\n        logger.error('handleGetSnapshotAtMId', errorMessage);\n        result = { error: errorMessage, stat: null };\n      }\n    }\n  } catch (error) {\n    const errorMessage = `: ${error instanceof Error ? error.message : String(error)}`;\n    logger.error('handleGetSnapshotAtMId', errorMessage);\n    result = { error: errorMessage };\n  }\n  emitQueryResultEvent('getSnapshotAtMId', detail, result);\n}\n\n/**\n * ****  `era:getSnapshotsBetweenMIds` \n *  message_id  `era:queryResult` \n * @param {any} detail -  `detail`  `startId`  `endId`\n */\nexport function handleGetSnapshotsBetweenMIds(detail: any) {\n  const { startId, endId } = detail || {};\n  logger.debug(\n    'handleGetSnapshotsBetweenMIds',\n    ` ID: ${startId ?? ''},  ID: ${endId ?? ''}`,\n  );\n  let finalResult: any;\n\n  try {\n    const { meta } = getEraData();\n    const selectedMks: (string | null)[] = _.get(meta, SEL_PATH, []);\n\n    const startIndex = startId ?? 0;\n    const endIndex = endId ?? selectedMks.length - 1;\n\n    if (startIndex > endIndex || startIndex < 0 || endIndex >= selectedMks.length) {\n      throw new Error(`ID  [${startIndex}, ${endIndex}]  [0, ${selectedMks.length - 1}]`);\n    }\n\n    const startMk = selectedMks[startIndex];\n    const endMk = selectedMks[endIndex];\n\n    if (!startMk || !endMk) {\n      throw new Error(' ID  MK');\n    }\n\n    const results = getStatsBetweenMKs(startMk, endMk);\n\n    if (results) {\n      const messages = getChatMessages('0-{{lastMessageId}}', { include_swipes: false });\n      finalResult = results.map(item => {\n        const message = messages[item.message_id];\n        return {\n          ...item,\n          is_user: message ? isUserMessage(message) : false,\n          stat: unescapeEraData(item.stat),\n          statWithoutMeta: unescapeEraData(removeMetaFields(item.stat)),\n        };\n      });\n    } else {\n      logger.warn('handleGetSnapshotsBetweenMIds', ' ID ');\n      finalResult = [];\n    }\n  } catch (error) {\n    const errorMessage = `: ${error instanceof Error ? error.message : String(error)}`;\n    logger.error('handleGetSnapshotsBetweenMIds', errorMessage);\n    finalResult = { error: errorMessage };\n  }\n  emitQueryResultEvent('getSnapshotsBetweenMIds', detail, finalResult);\n}\n\n/**\n * ****  `era:requestWriteDone` \n *  ERA  `writeDone` \n */\nexport function handleRequestWriteDone() {\n  logger.debug('handleRequestWriteDone', ' writeDone ');\n  if (lastWriteDonePayload) {\n    logger.debug('handleRequestWriteDone', ' writeDone ');\n    emitWriteDoneEvent(lastWriteDonePayload);\n  } else {\n    logger.warn('handleRequestWriteDone', ' writeDone ');\n  }\n}\n\n/**\n * @section API Event: 'era:forceSync'\n * @description \n * @param {object} [detail] - \n * @param {'full' | 'latest' | 'auto' | 'rollbackTo'} [detail.mode='auto'] - :\n *   - `'full'`: \n *   - `'latest'`: \n *   - `'auto'` (): \n *   - `'rollbackTo'`:  `message_id`  `message_id` \n * @param {number} [detail.message_id] -  `mode`  `'rollbackTo'` \n * @example\n * // \n * eventEmit('era:forceSync');\n *\n * // \n * eventEmit('era:forceSync', { mode: 'full' });\n *\n * //  5 \n * eventEmit('era:forceSync', { mode: 'rollbackTo', message_id: 5 });\n */\nexport async function handleForceSync(\n  job: EventJob,\n  actionsTaken: ActionsTaken,\n  payload: DispatcherPayload,\n): Promise<void> {\n  const detail = job.detail;\n  const mode = detail?.mode || 'auto';\n  logger.log('handleForceSync', `: ${mode}`);\n\n  let targetMessageId: number | undefined = undefined;\n  let stopAtTarget = false;\n  let isFullSync = false;\n\n  switch (mode) {\n    case 'full':\n      isFullSync = true;\n      break;\n    case 'latest': {\n      const latestMessage = getChatMessages(-1, { include_swipes: true })?.[0];\n      if (latestMessage) {\n        targetMessageId = latestMessage.message_id;\n        // stopAtTarget  false\n        //  stopAtTarget\n        stopAtTarget = false;\n      } else {\n        logger.warn('handleForceSync', ' \"latest\" ');\n        return;\n      }\n      break;\n    }\n    case 'rollbackTo': {\n      const msgId = detail?.message_id;\n      if (typeof msgId !== 'number') {\n        logger.error('handleForceSync', '\"rollbackTo\"  \"message_id\" ');\n        return;\n      }\n      targetMessageId = msgId;\n      stopAtTarget = true; // \n      break;\n    }\n    case 'auto':\n    default:\n      //  handleSyncEvent  targetMessageId  stopAtTarget\n      break;\n  }\n\n  //  job  isFullSync  handleSyncEvent\n  const syncJob: EventJob = {\n    ...job,\n    type: isFullSync ? 'manual_full_sync' : job.type,\n  };\n\n  await handleSyncEvent(syncJob, actionsTaken, payload, targetMessageId, stopAtTarget);\n}\n","'use strict';\n\nimport { ERA_API_EVENTS } from '../../../utils/constants';\nimport { EventJob } from '../../merger';\nimport { ActionsTaken, DispatcherPayload } from '../../types';\nimport {\n  deleteByObject,\n  deleteByPath,\n  handleForceSync,\n  handleGetCurrentVars,\n  handleGetSnapshotAtMId,\n  handleGetSnapshotAtMk,\n  handleGetSnapshotsBetweenMIds,\n  handleGetSnapshotsBetweenMks,\n  handleRequestWriteDone,\n  insertByObject,\n  insertByPath,\n  updateByObject,\n  updateByPath,\n} from './handler';\n\nexport function handleApiEvent(job: EventJob, actionsTaken: ActionsTaken, payload: DispatcherPayload): void {\n  const { type: eventType, detail } = job;\n  actionsTaken.api = true;\n\n  // API  api.ts \n  if (eventType === ERA_API_EVENTS.INSERT_BY_OBJECT) insertByObject(detail);\n  else if (eventType === ERA_API_EVENTS.UPDATE_BY_OBJECT) updateByObject(detail);\n  else if (eventType === ERA_API_EVENTS.INSERT_BY_PATH) insertByPath(detail.path, detail.value);\n  else if (eventType === ERA_API_EVENTS.UPDATE_BY_PATH) updateByPath(detail.path, detail.value);\n  else if (eventType === ERA_API_EVENTS.DELETE_BY_OBJECT) deleteByObject(detail);\n  else if (eventType === ERA_API_EVENTS.DELETE_BY_PATH) deleteByPath(detail.path);\n  else if (eventType === ERA_API_EVENTS.GET_CURRENT_VARS) handleGetCurrentVars(detail);\n  else if (eventType === ERA_API_EVENTS.GET_SNAPSHOT_AT_MK) handleGetSnapshotAtMk(detail);\n  else if (eventType === ERA_API_EVENTS.GET_SNAPSHOTS_BETWEEN_MKS) handleGetSnapshotsBetweenMks(detail);\n  else if (eventType === ERA_API_EVENTS.GET_SNAPSHOT_AT_MID) handleGetSnapshotAtMId(detail);\n  else if (eventType === ERA_API_EVENTS.GET_SNAPSHOTS_BETWEEN_MIDS) handleGetSnapshotsBetweenMIds(detail);\n  else if (eventType === ERA_API_EVENTS.REQUEST_WRITE_DONE) handleRequestWriteDone();\n  else if (eventType === ERA_API_EVENTS.FORCE_SYNC) handleForceSync(job, actionsTaken, payload);\n}\n","'use strict';\n\nimport { ERA_API_EVENTS, ERA_EVENT_EMITTER } from 'ERA/utils/constants';\nimport { ensureMkForLatestMessage } from '../core/key/mk';\nimport { initializeExternalSettings } from '../initer/auto/settings';\nimport { ensurePlaceholder } from '../macro/placeholder';\nimport { logContext, Logger } from '../utils/log';\nimport { extractMessageIdFromDetail, getMessageContentWithRetry, isUserMessage } from '../utils/message';\nimport { handleApiEvent } from './handlers/api/dispatcher';\nimport { handleSyncEvent } from './handlers/sync';\nimport { handleUpdateMkOnlyEvent } from './handlers/updateMkOnly';\nimport { EventJob, getEventGroup } from './merger';\nimport { ActionsTaken, DispatcherPayload } from './types';\n\nconst logger = new Logger();\n\n// /**\n//  * @constant {number} RENDER_EVENTS_TO_IGNORE_AFTER_MK_INJECTION\n//  * @description  `ensureMessageKey`  MK  `character_message_rendered` \n//  *  1\n//  */\n// const RENDER_EVENTS_TO_IGNORE_AFTER_MK_INJECTION = 1;\n\n// /**\n//  * @interface IgnoreRule\n//  * @description  MK \n//  */\n// export interface IgnoreRule {\n//   mk: string;\n//   ignoreCount: number;\n// }\n\n/**\n * @interface ConsecutiveMkState\n * @description  MK \n */\nexport interface ConsecutiveMkState {\n  mk: string | null;\n  count: number;\n}\n\n/**\n * @var {ConsecutiveMkState | null} consecutiveMkState\n * @description  MK \n * ****:  MK\n */\nlet consecutiveMkState: ConsecutiveMkState | null = null;\n\n// /**\n//  * ** MK **\n//  * @param eventType - \n//  * @param currentMk -  MK\n//  * @param mkToIgnore - \n//  * @returns {{ shouldSkip: boolean; newIgnoreRule: IgnoreRule | null }} - \n//  */\n// function handleRedundantRenderEvent(\n//   eventType: string,\n//   currentMk: string | null,\n//   mkToIgnore: IgnoreRule | null,\n// ): { shouldSkip: boolean; newIgnoreRule: IgnoreRule | null } {\n//   if (mkToIgnore && eventType === tavern_events.CHARACTER_MESSAGE_RENDERED && currentMk === mkToIgnore.mk) {\n//     logger.debug(\n//      'handleRedundantRenderEvent',\n//      ` MK (${mkToIgnore.mk}) : ${mkToIgnore.ignoreCount - 1}`,\n//     );\n//     mkToIgnore.ignoreCount--;\n//     if (mkToIgnore.ignoreCount <= 0) {\n//       mkToIgnore = null; // \n//       logger.debug('handleRedundantRenderEvent', ``);\n//     }\n//     return { shouldSkip: true, newIgnoreRule: mkToIgnore };\n//   }\n//   return { shouldSkip: false, newIgnoreRule: mkToIgnore };\n// }\n\n/**\n * ****\n * @returns {number} - \n */\nfunction updateConsecutiveMkCount(): number {\n  const mk = logContext.mk;\n  if (mk && consecutiveMkState && consecutiveMkState.mk === mk) {\n    logger.debug(\n      'updateConsecutiveMkCount',\n      `/ MK: ${mk}: ${consecutiveMkState.count}: ${consecutiveMkState.count + 1}`,\n    );\n    consecutiveMkState.count++;\n  } else {\n    logger.debug(\n      'updateConsecutiveMkCount',\n      `/ MK: ${mk} 1 MK : ${consecutiveMkState?.mk}`,\n    );\n    consecutiveMkState = { mk: mk, count: 1 };\n  }\n  return consecutiveMkState.count;\n}\n\n/**\n * ****\n * \n * @param {EventJob} job - \n * @param {any} _mkToIgnore - () \n * @returns {Promise<any>} - () \n */\nexport async function dispatchAndExecuteTask(job: EventJob, _mkToIgnore: any): Promise<any> {\n  const { type: eventType } = job;\n  const eventGroup = getEventGroup(eventType);\n  let message_id: number | null = null;\n  const eventDetail = job.detail;\n  logger.debug(\n    'dispatchAndExecuteTask',\n    '',\n    getChatMessages('0-{{lastMessageId}}', { include_swipes: true }),\n  );\n  // \n  const actionsTaken: ActionsTaken = {\n    rollback: false,\n    apply: false,\n    resync: false,\n    api: false,\n    apiWrite: false,\n    editedResync: false,\n    swipedRollback: false,\n  };\n\n  try {\n    // ****: \n    const initialContent = await getMessageContentWithRetry();\n    if (initialContent === null) {\n      //logger.warn('dispatchAndExecuteTask', 'ERA ');\n      //return null;\n    }\n\n    const latestMessage = getChatMessages(-1, { include_swipes: true })?.[0];\n    if (!latestMessage) {\n      logger.warn('dispatchAndExecuteTask', '');\n      return null;\n    }\n\n    let mk: string;\n    let msgId: number | null;\n    // let isNewKey: boolean;\n\n    //  API  combo_swipe_and_regenerate  MK \n    //  era:forceSync  API  MK \n    const isApiBypassEvent = getEventGroup(eventType) === 'API' && eventType !== ERA_API_EVENTS.FORCE_SYNC;\n\n    if (eventType === 'combo_swipe_and_regenerate' || isApiBypassEvent) {\n      logger.log('dispatchAndExecuteTask', ` ${eventType}  MK `);\n      msgId = latestMessage.message_id;\n      mk = ''; // \n      // isNewKey = false;\n    } else {\n      // ****:  MK \n      logger.log('dispatchAndExecuteTask', ' ensureMkForLatestMessage');\n      const { mk: newMk, message_id: newMsgId, isNewKey: newIsNewKey } = await ensureMkForLatestMessage(latestMessage);\n\n      if (!newMk || newMsgId === null) {\n        logger.warn('dispatchAndExecuteTask', ' MK  ID');\n        return null;\n      }\n      mk = newMk;\n      msgId = newMsgId;\n      // isNewKey = newIsNewKey;\n\n      // ****:  AI \n      logger.log('dispatchAndExecuteTask', ' ensurePlaceholder');\n      await ensurePlaceholder(msgId);\n    }\n\n    if (msgId === null) {\n      logger.warn('dispatchAndExecuteTask', ' ID');\n      return null;\n    }\n    logContext.mk = mk;\n    message_id = msgId;\n\n    const is_user = isUserMessage(latestMessage);\n\n    // //  ensureMkForLatestMessage  MK\n    // if (isNewKey && mk) {\n    //   mkToIgnore = {\n    //     mk: mk,\n    //     ignoreCount: RENDER_EVENTS_TO_IGNORE_AFTER_MK_INJECTION,\n    //   };\n    // }\n\n    // // ****:  MK \n    // logger.debug('dispatchAndExecuteTask', ' handleRedundantRenderEvent');\n    // const { shouldSkip, newIgnoreRule } = handleRedundantRenderEvent(eventType, mk, mkToIgnore);\n    // mkToIgnore = newIgnoreRule; // \n    // if (shouldSkip) {\n    //   // \n    //   return mkToIgnore;\n    // }\n\n    logger.log('dispatchAndExecuteTask', `: ${eventType} (: ${eventGroup})`);\n\n    // ****\n    // v3.1 payload \n    const payload: DispatcherPayload = {\n      mk: mk,\n      message_id: message_id,\n      is_user: is_user,\n      actions: actionsTaken,\n      consecutiveProcessingCount: 1, // \n    };\n\n    switch (eventGroup) {\n      case 'INIT':\n        logger.log('dispatchAndExecuteTask', ' initializeExternalSettings');\n        initializeExternalSettings();\n        // swipe\n        payload.consecutiveProcessingCount = updateConsecutiveMkCount();\n        logger.log('dispatchAndExecuteTask', ' handleSyncEvent for INIT');\n        await handleSyncEvent(job, actionsTaken, payload);\n        break;\n      case 'SYNC':\n        if (eventType === ERA_EVENT_EMITTER.API_WRITE) {\n          actionsTaken.apiWrite = true;\n        }\n        payload.consecutiveProcessingCount = updateConsecutiveMkCount();\n        logger.log('dispatchAndExecuteTask', ' handleSyncEvent for SYNC');\n        await handleSyncEvent(job, actionsTaken, payload);\n        break;\n      case 'API':\n        logger.log('dispatchAndExecuteTask', ' handleApiEvent');\n        handleApiEvent(job, actionsTaken, payload);\n        break;\n      case 'UPDATE_MK_ONLY':\n        logger.log('dispatchAndExecuteTask', ' handleUpdateMkOnlyEvent');\n        await handleUpdateMkOnlyEvent(mk);\n        break;\n      case 'DIRECTED_SYNC': {\n        payload.consecutiveProcessingCount = updateConsecutiveMkCount();\n\n        if (eventType === 'combo_swipe_and_regenerate') {\n          // \n          actionsTaken.swipedRollback = true;\n          const targetedMessageId = message_id - 1; // \n          const stopAtTarget = true; // \n\n          logger.log(\n            'dispatchAndExecuteTask',\n            ` combo_swipe_and_regenerate  ID: ${targetedMessageId}, stopAtTarget: ${stopAtTarget}`,\n          );\n\n          if (targetedMessageId < 0) {\n            logger.warn('dispatchAndExecuteTask', '');\n            await handleSyncEvent(job, actionsTaken, payload);\n          } else {\n            await handleSyncEvent(job, actionsTaken, payload, targetedMessageId, stopAtTarget);\n          }\n        } else if (eventType === tavern_events.MESSAGE_EDITED) {\n          // \n          actionsTaken.editedResync = true;\n          const targetedMessageId = extractMessageIdFromDetail(eventDetail);\n          const stopAtTarget = false; // \n\n          logger.log(\n            'dispatchAndExecuteTask',\n            ` MESSAGE_EDITED  ID: ${targetedMessageId}, stopAtTarget: ${stopAtTarget}`,\n          );\n\n          if (targetedMessageId === null || targetedMessageId < 0) {\n            logger.warn('dispatchAndExecuteTask', 'MESSAGE_EDITED  message_id', {\n              eventDetail,\n            });\n            await handleSyncEvent(job, actionsTaken, payload);\n          } else {\n            await handleSyncEvent(job, actionsTaken, payload, targetedMessageId, stopAtTarget);\n          }\n        } else {\n          // \n          logger.warn(\n            'dispatchAndExecuteTask',\n            ` DIRECTED_SYNC : ${eventType}`,\n          );\n          await handleSyncEvent(job, actionsTaken, payload);\n        }\n        break;\n      }\n    }\n  } catch (error) {\n    logger.error('dispatchAndExecuteTask', ` ${eventType} : ${error}`, error);\n  } finally {\n    // \n    logContext.mk = '';\n\n    // ****: \n    //\n    //await new Promise(resolve => setTimeout(resolve, 50));\n  }\n  // logger.debug(\n  //   'dispatchAndExecuteTask',\n  //   '',\n  //   getChatMessages('0-{{lastMessageId}}', { include_swipes: true }),\n  // );\n  return null;\n}\n","'use strict';\n\nimport { updateLatestSelectedMk } from '../../core/key/mk';\n\nexport async function handleUpdateMkOnlyEvent(mk: string): Promise<void> {\n  //  MK\n  await updateLatestSelectedMk(mk);\n}\n","/**\n * @file ERA  - \n * @description\n *  ERA \n * \n *\n * ****:\n * 1. ****:  API `EventJob`  `eventQueue`\n * 2. ****: `processQueue`  `isProcessing` \n * 3. ****: \n * 4. ****:  `event_merger.ts` \n * 5. ****:  `task_dispatcher.ts` \n * 6. ****:  `mkToIgnore`  `consecutiveMkState`\n */\n\n'use strict';\n\nimport { Logger } from '../utils/log';\nimport { dispatchAndExecuteTask } from './dispatcher';\nimport { EVENT_DEBOUNCE_MAP, EventJob, getEventGroup, mergeEventBatch } from './merger';\n\nconst logger = new Logger();\n\n/**\n * @const {EventJob[]} eventQueue\n * @description \n */\nconst eventQueue: EventJob[] = [];\n\n/**\n * @let {boolean} isProcessing\n * @description  true  `processQueue` \n */\nlet isProcessing = false;\nlet isWaiting = false;\nlet unlockSignal: (() => void) | null = null;\n\n/**\n * ****\n * \n * @param {string} type -  (e.g., `tavern_events.MESSAGE_DELETED`)\n * @param {any} [detail] - \n */\nexport function pushToQueue(type: string, detail?: any) {\n  logger.debug('pushToQueue', `: ${type}`, { detail });\n  eventQueue.push({ type, detail, timestamp: Date.now() });\n  processQueue();\n}\n\n/**\n * ****\n * ---\n */\nasync function processQueue() {\n  // \n  if (isWaiting) {\n    logger.debug('processQueue', '');\n    return;\n  }\n\n  // \n  if (isProcessing) {\n    logger.debug('processQueue', '...');\n    isWaiting = true;\n    // \n    await new Promise<void>(resolve => {\n      unlockSignal = resolve;\n    });\n    isWaiting = false;\n    logger.debug('processQueue', '');\n  }\n\n  // \n  if (eventQueue.length === 0) {\n    logger.debug('processQueue', '');\n    return;\n  }\n\n  // \n  // \n  isProcessing = true;\n  logger.debug('processQueue', '');\n\n  // \n  const firstJob = eventQueue[0];\n  const group = getEventGroup(firstJob.type);\n  if (group !== 'API') {\n    const debounceTime = EVENT_DEBOUNCE_MAP.get(firstJob.type) ?? 300;\n    logger.debug('processQueue', ` ${debounceTime}ms...`);\n    await new Promise(resolve => setTimeout(resolve, debounceTime));\n  }\n\n  // \n  logger.debug('processQueue', ':', JSON.stringify(eventQueue.map(e => e.type)));\n\n  // \n  // \n  // let mkToIgnore: IgnoreRule | null = null; // \n  while (eventQueue.length > 0) {\n    const batchToProcess = eventQueue.splice(0, eventQueue.length);\n    const finalJobs = mergeEventBatch(batchToProcess);\n\n    logger.debug(\n      'processQueue',\n      ` ${batchToProcess.length}  ${finalJobs.length} `,\n    );\n\n    for (const job of finalJobs) {\n      // const newIgnoreRule = await dispatchAndExecuteTask(job, mkToIgnore);\n      // mkToIgnore = newIgnoreRule;\n      await dispatchAndExecuteTask(job, null);\n    }\n    logger.debug('processQueue', '');\n  }\n\n  // \n  isProcessing = false;\n  logger.debug('processQueue', '');\n\n  // \n  if (unlockSignal) {\n    logger.debug('processQueue', '');\n    const signal = unlockSignal;\n    unlockSignal = null;\n    signal();\n  }\n}\n","import { ERA_EVENT_EMITTER, type WriteDonePayload } from '../utils/constants';\nimport { getEraData, removeMetaFields } from '../utils/era_data';\nimport { Logger } from '../utils/log';\n\nconst logger = new Logger('MacroParser');\n\n/**\n *  ERA , \n * \n * @param text - \n * @param stat_data - \n * @returns - \n */\nexport function parseEraMacros(text: string, statWithMeta?: object | null, statWithoutMeta?: object | null): string {\n  const macroRegex = /{{\\s*ERA(-withmeta)?\\s*:\\s*([^}]+?)\\s*}}/gi;\n\n  if (!text.includes('{{ERA')) {\n    return text;\n  }\n\n  //  stat\n  const finalStatWithMeta = statWithMeta ?? getEraData().stat;\n  const finalStatWithoutMeta = statWithoutMeta ?? removeMetaFields(getEraData().stat);\n\n  return text.replace(macroRegex, (substring, withMeta, path) => {\n    const funcName = 'parseEraMacros';\n    const trimmedPath = path.trim();\n    const includeMeta = !!withMeta;\n\n    // \n    const statToUse = includeMeta ? finalStatWithMeta : finalStatWithoutMeta;\n\n    if (!statToUse) {\n      logger.warn(funcName, ` (includeMeta: ${includeMeta})`);\n      return substring; // \n    }\n\n    let data;\n    if (trimmedPath === '$ALLDATA') {\n      data = statToUse;\n    } else {\n      data = _.get(statToUse, trimmedPath);\n    }\n\n    if (data === undefined) {\n      logger.warn(funcName, ` \"${trimmedPath}\", .`);\n      return ''; // , \n    }\n\n    //  stat \n    const finalData = data;\n\n    logger.debug(funcName, `: ${trimmedPath}`, {\n      data: finalData,\n    });\n\n    if (typeof finalData === 'object' && finalData !== null) {\n      return JSON.stringify(finalData);\n    }\n\n    return String(finalData);\n  });\n}\n\n/**\n *  `era:writeDone` \n *  HTML  ERA \n * @param payload - `era:writeDone` \n */\nconst handleWriteDone = (payload: WriteDonePayload) => {\n  // \n  if (payload.actions.swipedRollback) {\n    logger.debug('handleWriteDone', ' swipedRollback');\n    return;\n  }\n\n  const { message_id } = payload;\n\n  if (typeof message_id !== 'number') {\n    logger.warn('handleWriteDone', 'Event payload did not provide a valid message_id.');\n    return;\n  }\n\n  try {\n    const $messageDiv = retrieveDisplayedMessage(message_id);\n    if (!$messageDiv.length) {\n      // \n      return;\n    }\n\n    const currentHtml = $messageDiv.html();\n\n    //  HTML \n    if (!currentHtml.includes('{{ERA')) {\n      return;\n    }\n\n    const chatMessage = SillyTavern?.chat?.[message_id];\n    const rawMessage = typeof chatMessage?.mes === 'string' ? chatMessage.mes : null;\n    const messageHasMacro = rawMessage !== null && rawMessage.includes('{{ERA');\n    const htmlHasMacro = currentHtml.includes('{{ERA');\n\n    if (!messageHasMacro && !htmlHasMacro) {\n      return;\n    }\n\n    const parsedMessage = messageHasMacro ? parseEraMacros(rawMessage!, payload.stat, payload.statWithoutMeta) : null;\n    const parsedHtml = htmlHasMacro ? parseEraMacros(currentHtml, payload.stat, payload.statWithoutMeta) : currentHtml;\n\n    const messageChanged = parsedMessage !== null && parsedMessage !== rawMessage;\n    const htmlChanged = parsedHtml !== currentHtml;\n\n    if (!messageChanged && !htmlChanged) {\n      return;\n    }\n\n    let hasUpdated = false;\n\n    if (messageChanged) {\n      const formatFn = typeof formatAsDisplayedMessage === 'function' ? formatAsDisplayedMessage : null;\n      let formattedHtml: string | null = null;\n\n      if (formatFn) {\n        try {\n          formattedHtml = formatFn(parsedMessage!, { message_id }) ?? null;\n        } catch (formatError) {\n          logger.warn('handleWriteDone', 'formatAsDisplayedMessage failed; falling back to DOM patch.', formatError);\n        }\n      }\n\n      const updateMessageBlock = SillyTavern?.updateMessageBlock;\n      if (typeof updateMessageBlock === 'function') {\n        const patch: Record<string, unknown> = { mes: parsedMessage! };\n        if (formattedHtml !== null) {\n          patch.message = formattedHtml;\n        }\n\n        updateMessageBlock.call(SillyTavern, message_id, patch, { rerenderMessage: true });\n        hasUpdated = true;\n      } else if (formattedHtml !== null) {\n        $messageDiv.html(formattedHtml);\n        hasUpdated = true;\n      }\n    }\n\n    if (!hasUpdated && htmlChanged) {\n      const domPatched = replaceEraMacrosInElement($messageDiv, payload.stat, payload.statWithoutMeta);\n      if (domPatched) {\n        logger.debug('handleWriteDone', `Patched macros in-place for message_id: ${message_id}`);\n        hasUpdated = true;\n      }\n    }\n\n    if (hasUpdated) {\n      logger.debug('handleWriteDone', `Successfully re-rendered macros for message_id: ${message_id}`);\n    }\n  } catch (error) {\n    logger.error('handleWriteDone', `Failed to re-render macros for message_id: ${message_id}`, error);\n  }\n};\n\n/**\n *  `era:writeDone` \n */\nfunction setupMacroAutoRefresh() {\n  eventOn(ERA_EVENT_EMITTER.WRITE_DONE, handleWriteDone);\n  logger.log('setupMacroAutoRefresh', 'writeDone,.');\n}\n\n/**\n * \n */\nfunction removeMacroAutoRefresh() {\n  eventRemoveListener(ERA_EVENT_EMITTER.WRITE_DONE, handleWriteDone);\n  logger.log('removeMacroAutoRefresh', 'Macro auto-refresh listener has been removed.');\n}\n\nfunction replaceEraMacrosInElement(\n  $root: JQuery<HTMLElement>,\n  statWithMeta?: object | null,\n  statWithoutMeta?: object | null,\n): boolean {\n  let hasPatched = false;\n  const quickMacroCheck = /{{\\s*ERA/i;\n\n  const visit = (node: Node) => {\n    if (node.nodeType === Node.TEXT_NODE) {\n      const original = node.nodeValue ?? '';\n      if (!quickMacroCheck.test(original)) {\n        return;\n      }\n\n      const replaced = parseEraMacros(original, statWithMeta, statWithoutMeta);\n      if (replaced !== original) {\n        node.nodeValue = replaced;\n        hasPatched = true;\n      }\n      return;\n    }\n\n    if (node.nodeType !== Node.ELEMENT_NODE) {\n      return;\n    }\n\n    const element = node as HTMLElement;\n    const tagName = element.tagName;\n    if (tagName === 'SCRIPT' || tagName === 'STYLE' || tagName === 'TEXTAREA') {\n      return;\n    }\n\n    const children = Array.from(node.childNodes);\n    for (const child of children) {\n      visit(child);\n    }\n  };\n\n  $root.each((_, element) => {\n    visit(element);\n  });\n\n  return hasPatched;\n}\n\n/**\n *  AI  ERA \n * @param generate_data - \n * @param dry_run - \n */\nconst handleGenerateAfterData = (generate_data: { prompt: SillyTavern.SendingMessage[] }, dry_run: boolean) => {\n  if (dry_run) {\n    return;\n  }\n\n  // \n  const hasMacro = generate_data.prompt.some(p => typeof p.content === 'string' && p.content.includes('{{ERA'));\n\n  if (!hasMacro) {\n    return;\n  }\n\n  // \n  const processMacros = (detail: any) => {\n    // \n    if (detail.queryType !== 'getCurrentVars') {\n      return;\n    }\n    // \n    eventRemoveListener('era:queryResult', processMacros);\n\n    // \n    if (detail.result && detail.result.error) {\n      logger.error('handleGenerateAfterData', `ERA  [getCurrentVars] :`, detail.result.error);\n      return;\n    }\n\n    const statWithMeta = detail.result?.stat;\n    const statWithoutMeta = detail.result?.statWithoutMeta;\n\n    if (!statWithMeta || !statWithoutMeta) {\n      logger.warn('handleGenerateAfterData', ` era:queryResult `);\n      return;\n    }\n\n    logger.debug('handleGenerateAfterData', '');\n\n    // \n    for (const message of generate_data.prompt) {\n      if (typeof message.content === 'string' && message.content.includes('{{ERA')) {\n        const originalContent = message.content;\n        //  stat  parseEraMacros\n        message.content = parseEraMacros(originalContent, statWithMeta, statWithoutMeta);\n        if (originalContent !== message.content) {\n          logger.log('handleGenerateAfterData', ` role: ${message.role}  ERA `);\n        }\n      }\n    }\n  };\n\n  // \n  eventOn('era:queryResult', processMacros);\n\n  // \n  logger.debug('handleGenerateAfterData', ' era:getCurrentVars ');\n  eventEmit('era:getCurrentVars');\n};\n\n$(() => {\n  /**\n   *  ERA ,  AI \n   * `role: 'system'`\n   *\n   * - `{{ERA:path.to.data}}`: **** `$meta` \n   * - `{{ERA-withmeta:path.to.data}}`: **** `$meta` \n   */\n  /*\n  registerMacroLike(/{{\\s*ERA(-withmeta)?\\s*:\\s*([^}]+?)\\s*}}/gi, (context, substring) => {\n    //  'system' \n    // \n    if (context.role === 'system') {\n      logger.debug('registerMacroLike', ' (role=system) ERA', { substring });\n      return parseEraMacros(substring);\n    }\n\n    //  'user', 'assistant'\n    // \n    //  `handleWriteDone` \n    return substring;\n  });\n  */\n\n  //  `GENERATE_AFTER_DATA`  ERA \n  eventOn(tavern_events.GENERATE_AFTER_DATA, handleGenerateAfterData);\n\n  // \n  setupMacroAutoRefresh();\n\n  // \n  $(window).on('pagehide', () => {\n    removeMacroAutoRefresh();\n    eventRemoveListener(tavern_events.GENERATE_AFTER_DATA, handleGenerateAfterData);\n  });\n});\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderSlot as _renderSlot, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"acc\" };\nconst _hoisted_2 = [\"aria-expanded\"];\nconst _hoisted_3 = { class: \"title\" };\nconst _hoisted_4 = { class: \"hint\" };\nconst _hoisted_5 = { class: \"inner\" };\nimport { ref } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'EraAccordion',\n    props: {\n        title: {},\n        defaultOpen: { type: Boolean, default: false }\n    },\n    setup(__props) {\n        const props = __props;\n        const open = ref(props.defaultOpen);\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"section\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"button\", {\n                    class: \"acc-head\",\n                    \"aria-expanded\": open.value ? 'true' : 'false',\n                    onClick: _cache[0] || (_cache[0] = ($event) => (open.value = !open.value))\n                }, [\n                    _createElementVNode(\"span\", {\n                        class: _normalizeClass([\"caret\", { open: open.value }])\n                    }, \"\", 2 /* CLASS */),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"span\", _hoisted_3, _toDisplayString(__props.title), 1 /* TEXT */),\n                    _createCommentVNode(\"  \"),\n                    _cache[1] || (_cache[1] = _createElementVNode(\"span\", { class: \"spacer\" }, null, -1 /* CACHED */)),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"span\", _hoisted_4, _toDisplayString(open.value ? '' : ''), 1 /* TEXT */),\n                    _createCommentVNode(\"  \")\n                ], 8 /* PROPS */, _hoisted_2),\n                _createCommentVNode(\"  CSS Grid \"),\n                _createElementVNode(\"div\", {\n                    class: _normalizeClass([\"acc-body\", { open: open.value }])\n                }, [\n                    _createElementVNode(\"div\", _hoisted_5, [\n                        _renderSlot(_ctx.$slots, \"default\")\n                    ])\n                ], 2 /* CLASS */)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./EraAccordion.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./EraAccordion.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./EraAccordion.vue?vue&type=style&index=0&id=f723f6d6&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-f723f6d6\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"meta\" };\nconst _hoisted_2 = { class: \"kv\" };\nconst _hoisted_3 = { class: \"item\" };\nconst _hoisted_4 = [\"title\"];\nconst _hoisted_5 = { class: \"item\" };\nconst _hoisted_6 = { class: \"v\" };\nconst _hoisted_7 = { class: \"item\" };\nconst _hoisted_8 = { class: \"v\" };\nimport { onMounted, watch } from 'vue';\nimport { Logger } from '../../../utils/log';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'MetaHeader',\n    props: {\n        mk: {},\n        messageId: {},\n        isUser: { type: Boolean }\n    },\n    setup(__props) {\n        const logger = new Logger(\"ERA\\u53D8\\u91CF\\u6846\\u67B6/ui/components/EraPanelContent/MetaHeader\");\n        // \n        const props = __props; // \n        onMounted(() => {\n            //logger.debug('onMounted', '', { props });\n        });\n        watch(() => props, newProps => {\n            logger.debug('watch:props', 'Props ', { newProps });\n        }, { deep: true });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"section\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _cache[0] || (_cache[0] = _createElementVNode(\"span\", { class: \"k\" }, \"mk\", -1 /* CACHED */)),\n                        _createCommentVNode(\" mk \"),\n                        _createElementVNode(\"span\", {\n                            class: \"v\",\n                            title: __props.mk\n                        }, _toDisplayString(__props.mk || ''), 9 /* TEXT, PROPS */, _hoisted_4),\n                        _createCommentVNode(\" mk \")\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_5, [\n                        _cache[1] || (_cache[1] = _createElementVNode(\"span\", { class: \"k\" }, \"message_id\", -1 /* CACHED */)),\n                        _createCommentVNode(\" message_id \"),\n                        _createElementVNode(\"span\", _hoisted_6, _toDisplayString(__props.messageId ?? ''), 1 /* TEXT */),\n                        _createCommentVNode(\" message_id \")\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_7, [\n                        _cache[2] || (_cache[2] = _createElementVNode(\"span\", { class: \"k\" }, \"\", -1 /* CACHED */)),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"span\", _hoisted_8, _toDisplayString(__props.isUser ? '' : 'AI'), 1 /* TEXT */),\n                        _createCommentVNode(\"  \")\n                    ])\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./MetaHeader.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MetaHeader.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./MetaHeader.vue?vue&type=style&index=0&id=9a5820b4&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-9a5820b4\"]])\n\nexport default __exports__","import { createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, Fragment as _Fragment, normalizeStyle as _normalizeStyle, renderList as _renderList, resolveComponent as _resolveComponent, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = { class: \"node\" };\nconst _hoisted_2 = { class: \"key\" };\nconst _hoisted_3 = { class: \"brace\" };\nconst _hoisted_4 = {\n    key: 0,\n    class: \"summary\"\n};\nconst _hoisted_5 = {\n    key: 0,\n    class: \"json-children\"\n};\nconst _hoisted_6 = { class: \"brace\" };\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n    const _component_JsonNode = _resolveComponent(\"JsonNode\", true);\n    return (_openBlock(), _createElementBlock(_Fragment, null, [\n        _createCommentVNode(\"  \"),\n        _createElementVNode(\"div\", _hoisted_1, [\n            _createCommentVNode(\"  /  \"),\n            _createElementVNode(\"div\", {\n                class: \"json-line\",\n                style: _normalizeStyle({ paddingLeft: _ctx.level * 14 + 'px' })\n            }, [\n                _createCommentVNode(\" + \"),\n                (_ctx.foldable)\n                    ? (_openBlock(), _createElementBlock(\"button\", {\n                        key: 0,\n                        class: _normalizeClass([\"caret\", { open: _ctx.open }]),\n                        \"aria-label\": \"toggle\",\n                        onClick: _cache[0] || (_cache[0] = ($event) => (_ctx.open = !_ctx.open))\n                    }, \"\", 2 /* CLASS */))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"span\", _hoisted_2, _toDisplayString(_ctx.k), 1 /* TEXT */),\n                _cache[1] || (_cache[1] = _createElementVNode(\"span\", { class: \"colon\" }, \":\", -1 /* CACHED */)),\n                _createCommentVNode(\"  \"),\n                _createCommentVNode(\"  children  \"),\n                (_ctx.foldable)\n                    ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                        _createElementVNode(\"span\", _hoisted_3, _toDisplayString(_ctx.isArray ? '[' : '{'), 1 /* TEXT */),\n                        _createCommentVNode(\"  \"),\n                        (!_ctx.open)\n                            ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4, _toDisplayString(_ctx.summary), 1 /* TEXT */))\n                            : _createCommentVNode(\"v-if\", true),\n                        _createCommentVNode(\"  \")\n                    ], 64 /* STABLE_FRAGMENT */))\n                    : (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"span\", {\n                            class: _normalizeClass([\"val\", _ctx.type])\n                        }, _toDisplayString(_ctx.primitiveText), 3 /* TEXT, CLASS */),\n                        _createCommentVNode(\"  \")\n                    ], 64 /* STABLE_FRAGMENT */))\n            ], 4 /* STYLE */),\n            _createCommentVNode(\"  \"),\n            (_ctx.foldable && _ctx.open)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n                    _createCommentVNode(\"  JsonNode name: 'JsonNode'  \"),\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.childEntries, (childVal, childKey) => {\n                        return (_openBlock(), _createBlock(_component_JsonNode, {\n                            key: _ctx.path + '/' + String(childKey),\n                            k: String(childKey),\n                            v: childVal,\n                            path: _ctx.path + '/' + String(childKey),\n                            level: _ctx.level + 1,\n                            \"default-collapsed\": _ctx.defaultCollapsed,\n                            \"max-depth\": _ctx.maxDepth\n                        }, null, 8 /* PROPS */, [\"k\", \"v\", \"path\", \"level\", \"default-collapsed\", \"max-depth\"]));\n                    }), 128 /* KEYED_FRAGMENT */)),\n                    _createElementVNode(\"div\", {\n                        class: \"json-line\",\n                        style: _normalizeStyle({ paddingLeft: _ctx.level * 14 + 'px' })\n                    }, [\n                        _createElementVNode(\"span\", _hoisted_6, _toDisplayString(_ctx.isArray ? ']' : '}'), 1 /* TEXT */),\n                        _createCommentVNode(\"  \")\n                    ], 4 /* STYLE */)\n                ]))\n                : _createCommentVNode(\"v-if\", true)\n        ])\n    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */));\n}\n","import { computed, defineComponent, onMounted, ref, watch } from 'vue'; // /\nimport { Logger } from '../../utils/log';\nexport default defineComponent({\n    name: 'JsonNode', // \n    props: {\n        k: { type: [String, Number], required: true }, // \n        v: { required: true }, // \n        path: { type: String, required: true }, //  key/\n        level: { type: Number, required: true }, // \n        defaultCollapsed: { type: Boolean, default: true }, // \n        maxDepth: { type: Number, default: 3 }, // \n    },\n    setup(p) {\n        const logger = new Logger(\"ERA\\u53D8\\u91CF\\u6846\\u67B6/ui/template/JsonNode\");\n        onMounted(() => {\n            //logger.debug('onMounted', '', { props: p });\n        });\n        // \n        const type = computed(() => {\n            const val = p.v;\n            if (val === null)\n                return 'null';\n            if (Array.isArray(val))\n                return 'array';\n            const t = typeof val;\n            if (t === 'object')\n                return 'object';\n            if (t === 'undefined')\n                return 'undefined';\n            return t;\n        });\n        // /\n        const isArray = computed(() => type.value === 'array');\n        const isObject = computed(() => type.value === 'object');\n        // \n        const foldable = computed(() => isArray.value || isObject.value);\n        //  maxDepth  defaultCollapsed\n        const open = ref(p.level <= (p.maxDepth ?? 3) ? true : !p.defaultCollapsed);\n        watch(open, newOpenState => {\n            logger.debug('watch:open', `: ${newOpenState ? '' : ''}`);\n        });\n        //  undefined / bigint / symbol\n        const primitiveText = computed(() => {\n            const val = p.v;\n            switch (type.value) {\n                case 'string':\n                    return JSON.stringify(val);\n                case 'number':\n                    return String(val);\n                case 'boolean':\n                    return val ? 'true' : 'false';\n                case 'null':\n                    return 'null';\n                case 'undefined':\n                    return 'undefined';\n                case 'bigint':\n                    return String(val) + 'n';\n                case 'symbol':\n                    return String(val);\n                case 'function':\n                    return '()';\n                default:\n                    return '';\n            }\n        });\n        // \n        const summary = computed(() => {\n            if (isArray.value)\n                return `Array[${p.v.length}]`;\n            if (isObject.value)\n                return `Object{${Object.keys(p.v || {}).length}}`;\n            return '';\n        });\n        //    entries  \n        const childEntries = computed(() => {\n            if (isObject.value)\n                return p.v;\n            if (isArray.value) {\n                const out = {};\n                p.v.forEach((cv, idx) => {\n                    out[String(idx)] = cv;\n                });\n                return out;\n            }\n            return {};\n        });\n        return { type, isArray, foldable, open, primitiveText, summary, childEntries };\n    },\n});\n","/* unplugin-vue-components disabled */import { render } from \"./JsonNode.vue?vue&type=template&id=6c2ac46e&scoped=true&ts=true\"\nimport script from \"./JsonNode.vue?vue&type=script&lang=ts\"\nexport * from \"./JsonNode.vue?vue&type=script&lang=ts\"\n\nimport \"./JsonNode.vue?vue&type=style&index=0&id=6c2ac46e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6c2ac46e\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = { class: \"json-root\" };\nconst _hoisted_2 = { class: \"json-line\" };\nconst _hoisted_3 = { class: \"brace\" };\nconst _hoisted_4 = { class: \"json-children\" };\nconst _hoisted_5 = {\n    key: 1,\n    class: \"json-line\",\n    style: { paddingLeft: 1 * 14 + 'px' }\n};\nconst _hoisted_6 = { class: \"json-line\" };\nconst _hoisted_7 = { class: \"brace\" };\nimport { computed } from 'vue'; // \nimport { Logger } from '../../utils/log';\nimport JsonNode from './JsonNode.vue'; //   SFC \nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'PrettyJsonViewer',\n    props: {\n        value: {},\n        defaultCollapsed: { type: Boolean, default: true },\n        maxDepth: { default: 3 }\n    },\n    setup(__props) {\n        const logger = new Logger(\"ERA\\u53D8\\u91CF\\u6846\\u67B6/ui/template/PrettyJsonViewer\");\n        const props = __props;\n        const isPlainObjectOrArray = computed(() => {\n            const v = props.value; // \n            const result = v !== null && typeof v === 'object'; // /\n            logger.debug('isPlainObjectOrArray', `: ${result}${result ? '' : ''}`, {\n                : v,\n            });\n            return result;\n        }); // /\n        const primitiveType = computed(() => {\n            const v = props.value; // \n            let result;\n            if (v === null) {\n                result = 'null';\n            }\n            else if (Array.isArray(v)) {\n                result = 'array'; //  isPlainObjectOrArray \n            }\n            else {\n                const t = typeof v; // \n                result = t === 'undefined' ? 'undefined' : t;\n            }\n            logger.debug('primitiveType', `: ${result}`, { : v });\n            return result;\n        }); // \n        const primitiveText = computed(() => {\n            const v = props.value; // \n            let result;\n            switch (primitiveType.value // \n            ) {\n                case 'string':\n                    result = JSON.stringify(v); // \n                    break;\n                case 'number':\n                    result = String(v); // \n                    break;\n                case 'boolean':\n                    result = v ? 'true' : 'false'; // \n                    break;\n                case 'null':\n                    result = 'null'; // null\n                    break;\n                case 'undefined':\n                    result = 'undefined'; // undefined\n                    break;\n                case 'bigint':\n                    result = String(v) + 'n'; // bigint\n                    break;\n                case 'symbol':\n                    result = String(v); // symbol\n                    break;\n                case 'function':\n                    result = '()'; // \n                    break;\n                default:\n                    result = ''; // \n                    break;\n            }\n            logger.debug('primitiveText', `: \"${result}\"`, {\n                : v,\n                : primitiveType.value,\n            });\n            return result;\n        }); // \n        const isArrayRoot = computed(() => {\n            const result = Array.isArray(props.value);\n            logger.debug('isArrayRoot', `: ${result}`, { : props.value });\n            return result;\n        }); // \n        const rootOpen = computed(() => (isArrayRoot.value ? '[' : '{')); // \n        const rootClose = computed(() => (isArrayRoot.value ? ']' : '}')); // \n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"span\", _hoisted_3, _toDisplayString(rootOpen.value), 1 /* TEXT */),\n                    _createCommentVNode(\" { / [ \")\n                ]),\n                _createElementVNode(\"div\", _hoisted_4, [\n                    (isPlainObjectOrArray.value)\n                        ? (_openBlock(true), _createElementBlock(_Fragment, { key: 0 }, _renderList(__props.value, (v, k) => {\n                            return (_openBlock(), _createBlock(JsonNode, {\n                                key: String(k),\n                                k: String(k),\n                                v: v,\n                                path: String(k),\n                                level: 1,\n                                \"default-collapsed\": __props.defaultCollapsed,\n                                \"max-depth\": __props.maxDepth\n                            }, null, 8 /* PROPS */, [\"k\", \"v\", \"path\", \"default-collapsed\", \"max-depth\"]));\n                        }), 128 /* KEYED_FRAGMENT */))\n                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n                            _cache[0] || (_cache[0] = _createElementVNode(\"span\", { class: \"key\" }, \"value\", -1 /* CACHED */)),\n                            _cache[1] || (_cache[1] = _createElementVNode(\"span\", { class: \"colon\" }, \":\", -1 /* CACHED */)),\n                            _createElementVNode(\"span\", {\n                                class: _normalizeClass([\"val\", primitiveType.value])\n                            }, _toDisplayString(primitiveText.value), 3 /* TEXT, CLASS */)\n                        ]))\n                ]),\n                _createElementVNode(\"div\", _hoisted_6, [\n                    _createElementVNode(\"span\", _hoisted_7, _toDisplayString(rootClose.value), 1 /* TEXT */),\n                    _createCommentVNode(\" } / ] \")\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./PrettyJsonViewer.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PrettyJsonViewer.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PrettyJsonViewer.vue?vue&type=style&index=0&id=6fc9ef75&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6fc9ef75\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = { class: \"details-wrapper\" };\nconst _hoisted_2 = { class: \"detail-block\" };\nconst _hoisted_3 = { class: \"detail-block\" };\nimport EraAccordion from '../../template/EraAccordion.vue';\nimport PrettyJsonViewer from '../../template/PrettyJsonViewer.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'OperationDetails',\n    props: {\n        data: {}\n    },\n    setup(__props) {\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createBlock(EraAccordion, {\n                title: \"ERA \",\n                \"default-open\": false\n            }, {\n                default: _withCtx(() => [\n                    _createElementVNode(\"div\", _hoisted_1, [\n                        _createElementVNode(\"div\", _hoisted_2, [\n                            _cache[0] || (_cache[0] = _createElementVNode(\"h4\", { class: \"detail-title\" }, \"SelectedMks\", -1 /* CACHED */)),\n                            _createVNode(PrettyJsonViewer, {\n                                value: __props.data.selectedMks,\n                                \"default-collapsed\": true,\n                                \"max-depth\": 3\n                            }, null, 8 /* PROPS */, [\"value\"])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            _cache[1] || (_cache[1] = _createElementVNode(\"h4\", { class: \"detail-title\" }, \"EditLogs\", -1 /* CACHED */)),\n                            _createVNode(PrettyJsonViewer, {\n                                value: __props.data.editLogs,\n                                \"default-collapsed\": true,\n                                \"max-depth\": 2\n                            }, null, 8 /* PROPS */, [\"value\"])\n                        ])\n                    ])\n                ]),\n                _: 1 /* STABLE */\n            }));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./OperationDetails.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./OperationDetails.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./OperationDetails.vue?vue&type=style&index=0&id=6079192c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6079192c\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, renderSlot as _renderSlot } from \"vue\";\nconst _hoisted_1 = { class: \"tabs\" };\nconst _hoisted_2 = {\n    class: \"tab-bar\",\n    role: \"tablist\"\n};\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = { class: \"tab-content\" };\nconst _hoisted_5 = { key: 0 };\nconst _hoisted_6 = { key: 1 };\nimport { onMounted, ref, watch } from 'vue'; // \nimport { Logger } from '../../utils/log';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'TabSwitch',\n    props: {\n        tabs: {},\n        active: {}\n    },\n    emits: [\"update:active\"],\n    setup(__props, { emit: __emit }) {\n        const logger = new Logger(\"ERA\\u53D8\\u91CF\\u6846\\u67B6/ui/template/TabSwitch\");\n        const props = __props; //  tabs  active\n        const emit = __emit; // v-model:active\n        const innerActive = ref(props.active ?? 'pure'); // \n        watch(() => props.active, v => {\n            if (v) {\n                logger.debug('watch:active', ` active tab : ${v}`);\n                innerActive.value = v;\n            }\n        }); // \n        function setActive(k) {\n            logger.debug('setActive', ` tab : ${k}`);\n            innerActive.value = k;\n            emit('update:active', k);\n        } // \n        onMounted(() => {\n            //logger.debug('onMounted', '', { props });\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"section\", _hoisted_1, [\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.tabs, (t) => {\n                        return (_openBlock(), _createElementBlock(\"button\", {\n                            key: t.key,\n                            class: _normalizeClass([\"tab-btn\", { active: t.key === innerActive.value }]),\n                            role: \"tab\",\n                            onClick: ($event) => (setActive(t.key))\n                        }, _toDisplayString(t.label), 11 /* TEXT, CLASS, PROPS */, _hoisted_3));\n                    }), 128 /* KEYED_FRAGMENT */))\n                ]),\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"div\", _hoisted_4, [\n                    (innerActive.value === 'pure')\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n                            _renderSlot(_ctx.$slots, \"pure\"),\n                            _createCommentVNode(\"  \")\n                        ]))\n                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n                            _renderSlot(_ctx.$slots, \"full\"),\n                            _createCommentVNode(\"  \")\n                        ]))\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./TabSwitch.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TabSwitch.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TabSwitch.vue?vue&type=style&index=0&id=2874077c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2874077c\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, vModelSelect as _vModelSelect, withDirectives as _withDirectives, vModelText as _vModelText, withKeys as _withKeys, createVNode as _createVNode, withCtx as _withCtx } from \"vue\";\nconst _hoisted_1 = {\n    id: \"era-snapshot-ui\",\n    class: \"snapshot-manager\"\n};\nconst _hoisted_2 = { class: \"selector-wrapper\" };\nconst _hoisted_3 = {\n    class: \"select-field\",\n    role: \"group\",\n    \"aria-labelledby\": \"mk-label\"\n};\nconst _hoisted_4 = { class: \"select-container\" };\nconst _hoisted_5 = [\"value\"];\nconst _hoisted_6 = { class: \"selector-wrapper\" };\nconst _hoisted_7 = {\n    class: \"select-field\",\n    role: \"group\",\n    \"aria-labelledby\": \"mid-label\"\n};\nconst _hoisted_8 = { class: \"id-query-container\" };\nconst _hoisted_9 = {\n    key: 0,\n    class: \"loading-indicator\"\n};\nconst _hoisted_10 = {\n    key: 1,\n    class: \"error-message\"\n};\nimport { computed, onMounted, onUnmounted, ref, watch } from 'vue';\nimport { Logger } from '../../utils/log';\nimport { isUserMessage } from '../../utils/message';\nimport EraAccordion from '../template/EraAccordion.vue';\nimport PrettyJsonViewer from '../template/PrettyJsonViewer.vue';\nimport TabSwitch from '../template/TabSwitch.vue';\nimport MetaHeader from './EraPanelContent/MetaHeader.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'SnapshotManager',\n    props: {\n        latestData: {}\n    },\n    setup(__props) {\n        const props = __props;\n        const logger = new Logger(\"ERA\\u53D8\\u91CF\\u6846\\u67B6/ui/components/SnapshotManager\");\n        const latestMkFromProps = computed(() => props.latestData?.mk ?? null);\n        const selectedMk = ref(latestMkFromProps.value);\n        const messageIdInput = ref(null);\n        const historicalSnapshot = ref(null);\n        const loading = ref(false);\n        const error = ref(null);\n        const tabs = [\n            { key: 'pure', label: '' },\n            { key: 'full', label: '' },\n        ];\n        const activeTab = ref('pure');\n        const reversedSelectedMks = computed(() => {\n            return props.latestData?.selectedMks?.slice().reverse() ?? [];\n        });\n        const displayData = computed(() => {\n            // \n            if (historicalSnapshot.value) {\n                return historicalSnapshot.value;\n            }\n            // MK\n            if (selectedMk.value === latestMkFromProps.value) {\n                return props.latestData;\n            }\n            // \n            return null;\n        });\n        const isUserMessageComputed = computed(() => {\n            if (!displayData.value)\n                return false;\n            // (QueryResultItem) is_user \n            if ('is_user' in displayData.value) {\n                return displayData.value.is_user;\n            }\n            // (WriteDonePayload)\n            const message = getChatMessages(displayData.value.message_id, { include_swipes: false })[0];\n            return message ? isUserMessage(message) : false;\n        });\n        watch(() => latestMkFromProps.value, newLatestMk => {\n            // UI\n            selectedMk.value = newLatestMk;\n            historicalSnapshot.value = null;\n            messageIdInput.value = null;\n            error.value = null;\n            loading.value = false;\n        }, { immediate: true });\n        const handleSelectionChange = () => {\n            const mk = selectedMk.value;\n            // \n            messageIdInput.value = null;\n            historicalSnapshot.value = null;\n            error.value = null;\n            if (!mk || mk === latestMkFromProps.value) {\n                loading.value = false;\n                return;\n            }\n            loading.value = true;\n            logger.debug('SnapshotManager', `(MK Select) , mk: ${mk}`);\n            eventEmit('era:getSnapshotAtMk', { mk });\n        };\n        const queryByMId = () => {\n            if (messageIdInput.value === null || messageIdInput.value < 0) {\n                error.value = ' ID';\n                return;\n            }\n            // \n            selectedMk.value = null; // \n            historicalSnapshot.value = null;\n            error.value = null;\n            loading.value = true;\n            logger.debug('SnapshotManager', `(ID Query) , message_id: ${messageIdInput.value}`);\n            eventEmit('era:getSnapshotAtMId', { message_id: messageIdInput.value });\n        };\n        const handleQueryResult = (detail) => {\n            loading.value = false;\n            const handleResult = (result, errorMsg) => {\n                if (result) {\n                    historicalSnapshot.value = result;\n                    // \n                    selectedMk.value = result.mk;\n                    error.value = null;\n                }\n                else {\n                    historicalSnapshot.value = null;\n                    error.value = errorMsg;\n                }\n            };\n            if (detail.queryType === 'getSnapshotAtMk' && detail.request.mk === selectedMk.value) {\n                handleResult(detail.result, ` MK \"${selectedMk.value}\" `);\n            }\n            else if (detail.queryType === 'getSnapshotAtMId' && detail.request.message_id === messageIdInput.value) {\n                handleResult(detail.result, ` ID \"${messageIdInput.value}\" `);\n            }\n        };\n        const formatMkForDisplay = (mk, index) => {\n            const total = reversedSelectedMks.value.length;\n            const msgId = total - 1 - index;\n            const isLatest = mk === latestMkFromProps.value;\n            if (!mk)\n                return ` ${msgId} (MK)`;\n            const shortMk = mk.substring(mk.length - 6);\n            const label = ` ${msgId} (...${shortMk})`;\n            return isLatest ? `${label} ()` : label;\n        };\n        onMounted(() => {\n            eventOn('era:queryResult', handleQueryResult);\n        });\n        onUnmounted(() => {\n            eventRemoveListener('era:queryResult', handleQueryResult);\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(_Fragment, null, [\n                _createCommentVNode(\"   id \"),\n                _createElementVNode(\"div\", _hoisted_1, [\n                    _createElementVNode(\"div\", _hoisted_2, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            _createCommentVNode(\"  \"),\n                            _cache[4] || (_cache[4] = _createElementVNode(\"label\", {\n                                id: \"mk-label\",\n                                for: \"mk-selector\",\n                                class: \"field-label\"\n                            }, \"(MK)\", -1 /* CACHED */)),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"div\", _hoisted_4, [\n                                _createCommentVNode(\"  \"),\n                                _withDirectives(_createElementVNode(\"select\", {\n                                    id: \"mk-selector\",\n                                    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((selectedMk).value = $event)),\n                                    class: \"mk-selector\",\n                                    onChange: handleSelectionChange\n                                }, [\n                                    _cache[3] || (_cache[3] = _createElementVNode(\"option\", {\n                                        value: null,\n                                        disabled: \"\"\n                                    }, \"--  --\", -1 /* CACHED */)),\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(reversedSelectedMks.value, (mk, index) => {\n                                        return (_openBlock(), _createElementBlock(\"option\", {\n                                            key: mk || `null-${index}`,\n                                            value: mk\n                                        }, [\n                                            _createTextVNode(_toDisplayString(formatMkForDisplay(mk, index)) + \" \", 1 /* TEXT */),\n                                            _createCommentVNode(\"  \")\n                                        ], 8 /* PROPS */, _hoisted_5));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ], 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                    [_vModelSelect, selectedMk.value]\n                                ])\n                            ])\n                        ])\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_6, [\n                        _createElementVNode(\"div\", _hoisted_7, [\n                            _cache[5] || (_cache[5] = _createElementVNode(\"label\", {\n                                id: \"mid-label\",\n                                for: \"mid-input\",\n                                class: \"field-label\"\n                            }, \"ID\", -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_8, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    id: \"mid-input\",\n                                    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((messageIdInput).value = $event)),\n                                    type: \"number\",\n                                    class: \"mk-selector id-input\",\n                                    placeholder: \" ID...\",\n                                    onKeyup: _withKeys(queryByMId, [\"enter\"])\n                                }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                                    [\n                                        _vModelText,\n                                        messageIdInput.value,\n                                        void 0,\n                                        { number: true }\n                                    ]\n                                ]),\n                                _createElementVNode(\"button\", {\n                                    class: \"query-button\",\n                                    onClick: queryByMId\n                                }, \"\")\n                            ])\n                        ])\n                    ]),\n                    (loading.value)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, \"...\"))\n                        : _createCommentVNode(\"v-if\", true),\n                    (error.value)\n                        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, _toDisplayString(error.value), 1 /* TEXT */))\n                        : _createCommentVNode(\"v-if\", true),\n                    (displayData.value)\n                        ? (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                            _createVNode(EraAccordion, {\n                                title: \"\",\n                                \"default-open\": true\n                            }, {\n                                default: _withCtx(() => [\n                                    _createVNode(MetaHeader, {\n                                        mk: displayData.value.mk,\n                                        \"message-id\": displayData.value.message_id,\n                                        \"is-user\": isUserMessageComputed.value\n                                    }, null, 8 /* PROPS */, [\"mk\", \"message-id\", \"is-user\"])\n                                ]),\n                                _: 1 /* STABLE */\n                            }),\n                            _createVNode(TabSwitch, {\n                                active: activeTab.value,\n                                \"onUpdate:active\": _cache[2] || (_cache[2] = ($event) => ((activeTab).value = $event)),\n                                tabs: tabs\n                            }, {\n                                pure: _withCtx(() => [\n                                    _createVNode(PrettyJsonViewer, {\n                                        value: displayData.value.statWithoutMeta,\n                                        \"default-collapsed\": true,\n                                        \"max-depth\": Infinity\n                                    }, null, 8 /* PROPS */, [\"value\"])\n                                ]),\n                                full: _withCtx(() => [\n                                    _createVNode(PrettyJsonViewer, {\n                                        value: displayData.value.stat,\n                                        \"default-collapsed\": true,\n                                        \"max-depth\": Infinity\n                                    }, null, 8 /* PROPS */, [\"value\"])\n                                ]),\n                                _: 1 /* STABLE */\n                            }, 8 /* PROPS */, [\"active\"])\n                        ], 64 /* STABLE_FRAGMENT */))\n                        : _createCommentVNode(\"v-if\", true)\n                ])\n            ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./SnapshotManager.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SnapshotManager.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SnapshotManager.vue?vue&type=style&index=0&id=3301a1fe&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, createVNode as _createVNode, withCtx as _withCtx, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"era-panel\" };\nconst _hoisted_2 = { class: \"panel-top\" };\nconst _hoisted_3 = { class: \"panel-body\" };\nconst _hoisted_4 = { class: \"panel-content-wrapper\" };\nconst _hoisted_5 = {\n    key: 1,\n    class: \"empty\"\n};\nimport { Logger } from '../../utils/log';\nimport EraAccordion from '../template/EraAccordion.vue';\nimport MetaHeader from './EraPanelContent/MetaHeader.vue';\nimport OperationDetails from './EraPanelContent/OperationDetails.vue';\nimport SnapshotManager from './SnapshotManager.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'EraPanel',\n    props: {\n        data: {}\n    },\n    setup(__props) {\n        const logger = new Logger(\"ERA\\u53D8\\u91CF\\u6846\\u67B6/ui/components/EraPanel\");\n        const requestSwitchView = (viewName) => {\n            logger.debug('requestSwitchView', `: ${viewName}`);\n            if (window.eraUiSwitchView) {\n                window.eraUiSwitchView(viewName);\n            }\n            else {\n                logger.warn('requestSwitchView', ' eraUiSwitchView ');\n            }\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"header\", _hoisted_2, [\n                    _cache[1] || (_cache[1] = _createElementVNode(\"h3\", { class: \"panel-title\" }, \"ERA \", -1 /* CACHED */)),\n                    _createElementVNode(\"button\", {\n                        class: \"btn-close\",\n                        \"aria-label\": \"\",\n                        onClick: _cache[0] || (_cache[0] = ($event) => (requestSwitchView('FloatingBall')))\n                    }, \"\")\n                ]),\n                _createElementVNode(\"div\", _hoisted_3, [\n                    _createElementVNode(\"div\", _hoisted_4, [\n                        (__props.data)\n                            ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                _createVNode(EraAccordion, {\n                                    title: \"\",\n                                    \"default-open\": false\n                                }, {\n                                    default: _withCtx(() => [\n                                        _createVNode(MetaHeader, {\n                                            mk: __props.data.mk,\n                                            \"message-id\": __props.data.message_id,\n                                            \"is-user\": __props.data.is_user\n                                        }, null, 8 /* PROPS */, [\"mk\", \"message-id\", \"is-user\"])\n                                    ]),\n                                    _: 1 /* STABLE */\n                                }),\n                                _createVNode(OperationDetails, { data: __props.data }, null, 8 /* PROPS */, [\"data\"]),\n                                _createVNode(SnapshotManager, { \"latest-data\": __props.data }, null, 8 /* PROPS */, [\"latest-data\"])\n                            ], 64 /* STABLE_FRAGMENT */))\n                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_5, \" era:writeDone \"))\n                    ])\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./EraPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./EraPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./EraPanel.vue?vue&type=style&index=0&id=1e3782f8&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1e3782f8\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nimport { onMounted } from 'vue';\nimport { Logger } from '../../utils/log';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'FloatingBall',\n    emits: ['click'],\n    setup(__props) {\n        const logger = new Logger(\"ERA\\u53D8\\u91CF\\u6846\\u67B6/ui/components/FloatingBall\");\n        onMounted(() => {\n            //logger.debug('onMounted', 'FloatingBall.vue ');\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: \"floating-ball\",\n                onClick: _cache[0] || (_cache[0] = ($event) => (_ctx.$emit('click')))\n            }, [\n                _cache[1] || (_cache[1] = _createElementVNode(\"span\", {\n                    class: \"era-logo\",\n                    \"aria-hidden\": \"true\"\n                }, \"ERA\", -1 /* CACHED */)),\n                _createCommentVNode(\"  \")\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./FloatingBall.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./FloatingBall.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./FloatingBall.vue?vue&type=style&index=0&id=3bb5cc6c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3bb5cc6c\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createStaticVNode as _createStaticVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n    class: \"about-era-card\",\n    role: \"complementary\",\n    \"aria-label\": \" ERA\"\n};\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'AboutEra',\n    setup(__props) {\n        // This component is purely informational.\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"section\", _hoisted_1, [...(_cache[0] || (_cache[0] = [\n                    _createStaticVNode(\"<h4 class=\\\"card-title\\\" data-v-9b1026a6> ERA</h4><div class=\\\"info-list\\\" data-v-9b1026a6><ul data-v-9b1026a6><li data-v-9b1026a6><strong data-v-9b1026a6>ERA :</strong><a href=\\\"https://github.com/RockingSisyphus/ERA-EfficientRollbackArchitecture/tree/master\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" data-v-9b1026a6> GitHub </a></li><li data-v-9b1026a6><strong data-v-9b1026a6>ERA :</strong><a href=\\\"https://discord.com/channels/1134557553011998840/1423319849400270928\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\" data-v-9b1026a6> Discord </a></li><li data-v-9b1026a6><strong data-v-9b1026a6>:</strong> </li><li data-v-9b1026a6><strong data-v-9b1026a6>ERA :</strong> 1006127516</li></ul></div>\", 2)\n                ]))]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./AboutEra.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./AboutEra.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./AboutEra.vue?vue&type=style&index=0&id=9b1026a6&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-9b1026a6\"]])\n\nexport default __exports__","const __WEBPACK_NAMESPACE_OBJECT__ = toastr;","import { Logger } from './log';\n\nconst logger = new Logger();\n\n/**\n * @file ERA  - \n * @description \n */\n\ntype RegexInjectionResult = {\n  success: boolean;\n  status: 'injected' | 'exists' | 'failed' | 'skipped';\n  reason?: string;\n};\n\n/**\n * \n * \n *\n * @param regexData  `id`  `scope`  `TavernRegex` \n *  `script_name` \n * @returns \n */\nexport async function ensureCharacterRegex(\n  regexData: Omit<TavernRegex, 'id' | 'scope'>,\n): Promise<RegexInjectionResult> {\n  if (!isCharacterTavernRegexesEnabled()) {\n    const reason = '';\n    logger.debug('ensureCharacterRegex', reason);\n    return { success: false, status: 'skipped', reason };\n  }\n\n  const characterRegexes = getTavernRegexes({ scope: 'character' });\n  const isAlreadyExists = characterRegexes.some(regex => regex.script_name === regexData.script_name);\n\n  if (isAlreadyExists) {\n    logger.debug('ensureCharacterRegex', ` \"${regexData.script_name}\" `);\n    return { success: true, status: 'exists' };\n  }\n\n  try {\n    logger.debug('ensureCharacterRegex', ` \"${regexData.script_name}\" ...`);\n    await updateTavernRegexesWith(\n      regexes => {\n        // \n        regexes.push({\n          ...regexData,\n          id: '', // id \n          scope: 'character',\n        });\n        return regexes;\n      },\n      { scope: 'character' },\n    );\n    logger.debug('ensureCharacterRegex', '');\n    return { success: true, status: 'injected' };\n  } catch (error) {\n    const reason = ` \"${regexData.script_name}\" `;\n    logger.error('ensureCharacterRegex', reason, error);\n    return { success: false, status: 'failed', reason };\n  }\n}\n","/**\n * @constant {Omit<TavernRegex, 'id' | 'scope'>} HIDE_ERA_DATA_REGEX\n * @description\n *  ERA \n *  AI  <era_data>  <variable...> \n * \n *\n * - **find_regex**:  <era_data>...</era_data>  <variable...>...</variable...> \n * - **replace_string**: \n * - **source**:  AI \n * - **destination**: \n * - **run_on_edit**: \n */\nexport const HIDE_ERA_DATA_REGEX: Omit<TavernRegex, 'id' | 'scope'> = {\n  script_name: 'ERA ',\n  enabled: true,\n  run_on_edit: true,\n  find_regex: String.raw`/<(variable(?:insert|edit|delete))>\\s*(?=[\\s\\S]*?\\S[\\s\\S]*?<\\/\\1>)((?:(?!<(?:era_data|variable(?:think|insert|edit|delete))>|<\\/\\1>)[\\s\\S])*?)\\s*<\\/\\1>/gi`,\n  replace_string: '',\n  source: {\n    user_input: true,\n    ai_output: true,\n    slash_command: false,\n    world_info: false,\n  },\n  destination: {\n    display: true,\n    prompt: true,\n  },\n  min_depth: null,\n  max_depth: null,\n};\n","/**\n * @constant {Omit<TavernRegex, 'id' | 'scope'>} HIDE_ERA_METADATA_REGEX\n * @description\n * AIERA\n * This regex is for hiding ERA metadata sent to AI.\n *\n * - **find_regex**:  <metadata>...</metadata> \n * - **replace_string**: \n * - **source**:  AI \n * - **destination**: \n * - **run_on_edit**: \n */\nexport const HIDE_ERA_METADATA_REGEX: Omit<TavernRegex, 'id' | 'scope'> = {\n  script_name: 'ERA ',\n  enabled: true,\n  run_on_edit: true,\n  find_regex: String.raw`/<era_data>\\s*(?=[\\s\\S]*?\\S[\\s\\S]*?<\\/era_data>)((?:(?!<(?:era_data|variable(?:think|insert|edit|delete))>|<\\/era_data>)[\\s\\S])*?)\\s*<\\/era_data>/gi`,\n  replace_string: '',\n  source: {\n    user_input: true,\n    ai_output: true,\n    slash_command: false,\n    world_info: false,\n  },\n  destination: {\n    display: true,\n    prompt: true,\n  },\n  min_depth: null,\n  max_depth: null,\n};\n","/**\n * @constant {Omit<TavernRegex, 'id' | 'scope'>} HIDE_ERA_THINKING_REGEX\n * @description\n * AIERA\n * This regex is for hiding ERA variable thinking blocks sent to AI.\n *\n * - **find_regex**:  <thinking>...</thinking> \n * - **replace_string**: \n * - **source**:  AI \n * - **destination**: \n * - **run_on_edit**: \n */\nexport const HIDE_ERA_THINKING_REGEX: Omit<TavernRegex, 'id' | 'scope'> = {\n  script_name: 'ERA ',\n  enabled: true,\n  run_on_edit: true,\n  find_regex: String.raw`/<variablethink>\\s*(?=[\\s\\S]*?\\S[\\s\\S]*?<\\/variablethink>)((?:(?!<variablethink>)[\\s\\S])*?)\\s*<\\/variablethink>/gi`,\n  replace_string: '',\n  source: {\n    user_input: true,\n    ai_output: true,\n    slash_command: false,\n    world_info: false,\n  },\n  destination: {\n    display: true,\n    prompt: true,\n  },\n  min_depth: null,\n  max_depth: null,\n};\n","import statusBarHtml from './status_bar.html?raw';\n\n/**\n *  HTML \n * @param {string} html -  HTML \n * @returns {string} - \n */\nfunction escapeHtmlForRegex(html: string): string {\n  // \n  const withoutComments = html.replace(/<!--[\\s\\S]*?-->/g, '');\n  //  JSON  \\n, \", \\\n  const jsonString = JSON.stringify(withoutComments);\n  //  JSON.stringify \n  return jsonString.slice(1, jsonString.length - 1);\n}\n\n/**\n * @constant {Omit<TavernRegex, 'id' | 'scope'>} REPLACE_PLACEHOLDER_REGEX\n * @description\n *  HTML\n */\nexport const REPLACE_PLACEHOLDER_REGEX: Omit<TavernRegex, 'id' | 'scope'> = {\n  script_name: 'ERA ',\n  enabled: true,\n  run_on_edit: true,\n  find_regex: `/<StatusPlaceHolderImpl\\\\/>/gsi`,\n  replace_string: `\\`\\`\\`html\\n${statusBarHtml}\\n\\`\\`\\``,\n  source: {\n    user_input: false,\n    ai_output: true,\n    slash_command: false,\n    world_info: false,\n  },\n  destination: {\n    display: true,\n    prompt: false,\n  },\n  min_depth: null,\n  max_depth: null,\n};\n","import { ensureCharacterRegex } from '../../utils/regex';\nimport { HIDE_ERA_DATA_REGEX } from './regex_objects/hide_era_data';\nimport { HIDE_ERA_METADATA_REGEX } from './regex_objects/hide_era_metadata';\nimport { HIDE_ERA_THINKING_REGEX } from './regex_objects/hide_era_thinking';\nimport { REPLACE_PLACEHOLDER_REGEX } from './regex_objects/replace_placeholder';\nimport { Logger } from '../../utils/log';\n\nconst logger = new Logger();\n\n/**\n * @file  - \n * @description  ERA \n */\n\ntype InitRegexResult = {\n  success: boolean;\n  reason?: string;\n  details: {\n    regexName: string;\n    status: 'injected' | 'exists' | 'failed' | 'skipped';\n    reason?: string;\n  }[];\n};\n\n/**\n *  ERA \n * @returns {Promise<InitRegexResult>} \n */\nexport async function initEraCharacterRegexes(): Promise<InitRegexResult> {\n  if (!isCharacterTavernRegexesEnabled()) {\n    const reason = '';\n    logger.warn('initEraCharacterRegexes', reason);\n    return { success: false, reason, details: [] };\n  }\n\n  const regexesToInject = [\n    HIDE_ERA_DATA_REGEX,\n    REPLACE_PLACEHOLDER_REGEX,\n    HIDE_ERA_METADATA_REGEX,\n    HIDE_ERA_THINKING_REGEX,\n  ];\n  const results = [];\n  let allSuccess = true;\n\n  for (const regex of regexesToInject) {\n    const result = await ensureCharacterRegex(regex);\n    results.push({\n      regexName: regex.script_name,\n      status: result.status,\n      reason: result.reason,\n    });\n    if (!result.success) {\n      allSuccess = false;\n    }\n  }\n\n  return { success: allSuccess, details: results };\n}\n","import _ from 'lodash';\nimport type { PartialDeep } from 'type-fest';\nimport { Logger } from './log';\n\nconst logger = new Logger();\n\n/**\n * \n * @returns \n */\nexport async function getBoundWorldbookNames(): Promise<string[]> {\n  const funcName = 'getBoundWorldbookNames';\n  logger.debug(funcName, '...');\n  const charWorldbooks = await getCharWorldbookNames('current');\n  const worldbooks = [];\n  if (charWorldbooks.primary) {\n    worldbooks.push(charWorldbooks.primary);\n  }\n  worldbooks.push(...charWorldbooks.additional);\n  const uniqueWorldbooks = _.uniq(worldbooks);\n  logger.debug(funcName, '', uniqueWorldbooks);\n  return uniqueWorldbooks;\n}\n\n/**\n * \n * @param worldbookName - \n * @param entryName - \n * @returns  true false\n */\nexport async function isEntryInWorldbook(worldbookName: string, entryName: string): Promise<boolean> {\n  const funcName = 'isEntryInWorldbook';\n  try {\n    logger.debug(funcName, `${worldbookName}${entryName}...`);\n    const entries = await getWorldbook(worldbookName);\n    const exists = entries.some(entry => entry.name === entryName);\n    logger.debug(funcName, `${worldbookName}${exists ? '' : ''}${entryName}`);\n    return exists;\n  } catch (error) {\n    logger.error(funcName, `${worldbookName}`, error);\n    return false;\n  }\n}\n\ntype InjectionResult = {\n  success: boolean;\n  status: 'injected' | 'exists' | 'failed';\n  reason?: string;\n};\n\n/**\n * \n * @param worldbookName - \n * @param newEntry - \n * @returns \n */\nexport async function injectEntryToWorldbook(\n  worldbookName: string,\n  newEntry: PartialDeep<WorldbookEntry>,\n): Promise<InjectionResult> {\n  const funcName = 'injectEntryToWorldbook';\n  if (!newEntry.name) {\n    const reason = ' name ';\n    logger.error(funcName, reason);\n    return { success: false, status: 'failed', reason };\n  }\n\n  const entryExists = await isEntryInWorldbook(worldbookName, newEntry.name);\n  if (entryExists) {\n    logger.debug(funcName, `${newEntry.name}${worldbookName}`);\n    return { success: true, status: 'exists' };\n  }\n\n  try {\n    logger.debug(funcName, `${worldbookName}${newEntry.name}...`);\n    await createWorldbookEntries(worldbookName, [newEntry]);\n    logger.debug(funcName, `${worldbookName}${newEntry.name}`);\n    return { success: true, status: 'injected' };\n  } catch (error) {\n    const reason = `${worldbookName}${newEntry.name}`;\n    logger.error(funcName, reason, error);\n    return { success: false, status: 'failed', reason };\n  }\n}\n\n/**\n * \n * @returns \n */\nexport async function createAndBindPrimaryWorldbook(): Promise<string> {\n  const funcName = 'createAndBindPrimaryWorldbook';\n  const worldbookName = 'ERA';\n  logger.debug(funcName, `${worldbookName}...`);\n  await createWorldbook(worldbookName);\n\n  const charWorldbooks = await getCharWorldbookNames('current');\n  charWorldbooks.primary = worldbookName;\n\n  logger.debug(funcName, `${worldbookName}...`);\n  await rebindCharWorldbooks('current', charWorldbooks);\n\n  logger.debug(funcName, '');\n  return worldbookName;\n}\n","import type { PartialDeep } from 'type-fest';\nimport content from './era_var_operation_rule.txt?raw';\n\nexport const ERA_VAR_OPERATION_RULE_ENTRY_NAME = 'ERA ';\n\nexport const eraVarOperationRuleEntry: PartialDeep<WorldbookEntry> = {\n  name: ERA_VAR_OPERATION_RULE_ENTRY_NAME,\n  content,\n  enabled: true,\n  strategy: {\n    type: 'constant',\n    keys: [],\n    keys_secondary: {\n      logic: 'and_any',\n      keys: [],\n    },\n    scan_depth: 'same_as_global',\n  },\n  position: {\n    type: 'at_depth',\n    role: 'system',\n    depth: 0,\n    order: 9999,\n  },\n  probability: 100,\n  recursion: {\n    prevent_incoming: false,\n    prevent_outgoing: false,\n    delay_until: null,\n  },\n  effect: {\n    sticky: null,\n    cooldown: null,\n    delay: null,\n  },\n};\n","import type { PartialDeep } from 'type-fest';\nimport content from './era_var_intent.txt?raw';\n\nexport const ERA_VAR_INTENT_ENTRY_NAME = 'ERA ';\n\nexport const eraVarIntentEntry: PartialDeep<WorldbookEntry> = {\n  name: ERA_VAR_INTENT_ENTRY_NAME,\n  content,\n  enabled: true,\n  strategy: {\n    type: 'constant',\n    keys: [],\n    keys_secondary: {\n      logic: 'and_any',\n      keys: [],\n    },\n    scan_depth: 'same_as_global',\n  },\n  position: {\n    type: 'at_depth',\n    role: 'system',\n    depth: 0,\n    order: 9998, // \n  },\n  probability: 100,\n  recursion: {\n    prevent_incoming: false,\n    prevent_outgoing: false,\n    delay_until: null,\n  },\n  effect: {\n    sticky: null,\n    cooldown: null,\n    delay: null,\n  },\n};\n","import { createAndBindPrimaryWorldbook, injectEntryToWorldbook } from '../../utils/worldbook';\nimport { Logger } from '../../utils/log';\nimport { eraVarOperationRuleEntry } from './worldbook_entries/era_var_operation_rule';\nimport { eraVarIntentEntry } from './worldbook_entries/era_var_intent';\n\nconst logger = new Logger();\n\ntype InitWorldbookResult = {\n  success: boolean;\n  reason?: string;\n  details: {\n    entryName: string;\n    status: 'injected' | 'exists' | 'failed';\n    reason?: string;\n  }[];\n};\n\n/**\n *  ERA \n * @returns {Promise<InitWorldbookResult>} \n */\nexport async function initEraWorldbookEntries(): Promise<InitWorldbookResult> {\n  const funcName = 'initEraWorldbookEntries';\n  logger.log(funcName, '...');\n\n  let charWorldbooks = await getCharWorldbookNames('current');\n  let primaryWorldbook = charWorldbooks.primary;\n\n  if (!primaryWorldbook) {\n    logger.warn(funcName, '');\n    try {\n      primaryWorldbook = await createAndBindPrimaryWorldbook();\n    } catch (error) {\n      const reason = '';\n      logger.error(funcName, reason, error);\n      return { success: false, reason, details: [] };\n    }\n  } else {\n    logger.debug(funcName, `: ${primaryWorldbook}`);\n  }\n\n  const entriesToInject = [eraVarOperationRuleEntry, eraVarIntentEntry];\n  const results = [];\n  let allSuccess = true;\n\n  for (const entry of entriesToInject) {\n    if (!entry.name) {\n      logger.warn(funcName, '', entry);\n      continue;\n    }\n    const result = await injectEntryToWorldbook(primaryWorldbook, entry);\n    results.push({\n      entryName: entry.name,\n      status: result.status,\n      reason: result.reason,\n    });\n    if (!result.success) {\n      allSuccess = false;\n    }\n  }\n\n  logger.log(funcName, '');\n  return { success: allSuccess, details: results };\n}\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withModifiers as _withModifiers, vModelText as _vModelText, withDirectives as _withDirectives, createTextVNode as _createTextVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n    class: \"action-buttons-card\",\n    role: \"complementary\",\n    \"aria-label\": \"ERA \"\n};\nconst _hoisted_2 = { class: \"btns\" };\nconst _hoisted_3 = { class: \"btn-group\" };\nconst _hoisted_4 = { class: \"btn-group\" };\nconst _hoisted_5 = { class: \"btn-group\" };\nconst _hoisted_6 = { class: \"input-btn-combo\" };\nconst _hoisted_7 = { class: \"btn-group\" };\nimport { ref } from 'vue';\nimport toastr from 'toastr';\nimport { initEraCharacterRegexes } from '../../../initer/manual/regex';\nimport { initEraWorldbookEntries } from '../../../initer/manual/worldbook';\nimport { Logger } from '../../../utils/log'; // \nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ActionButtons',\n    setup(__props) {\n        const logger = new Logger(\"ERA\\u53D8\\u91CF\\u6846\\u67B6/ui/components/RightRailContent/ActionButtons\"); // \n        const rollbackId = ref(null);\n        async function onInjectRegex() {\n            logger.log('onInjectRegex', 'ERA ...');\n            try {\n                //  0 \n                try {\n                    const firstMessage = getChatMessages(0);\n                    if (!firstMessage || firstMessage.length === 0) {\n                        throw new Error('No messages found');\n                    }\n                }\n                catch (e) {\n                    toastr.error('', '');\n                    logger.warn('onInjectRegex', ' 0 ', e);\n                    return;\n                }\n                // \n                const regexResult = await initEraCharacterRegexes();\n                if (!regexResult.success) {\n                    toastr.error(regexResult.reason ?? '', '');\n                    logger.error('onInjectRegex', ':', regexResult.reason);\n                    return;\n                }\n                else {\n                    const injectedCount = regexResult.details.filter(d => d.status === 'injected').length;\n                    const existsCount = regexResult.details.filter(d => d.status === 'exists').length;\n                    let message = '';\n                    if (injectedCount > 0) {\n                        message += ` ${injectedCount} `;\n                    }\n                    if (existsCount > 0) {\n                        message += ` ${existsCount} `;\n                    }\n                    if (message) {\n                        toastr.success(message.trim(), '');\n                    }\n                }\n                // \n                const worldbookResult = await initEraWorldbookEntries();\n                if (!worldbookResult.success) {\n                    toastr.error(worldbookResult.reason ?? '', '');\n                    logger.error('onInjectRegex', ':', worldbookResult);\n                }\n                else {\n                    const injectedCount = worldbookResult.details.filter(d => d.status === 'injected').length;\n                    const existsCount = worldbookResult.details.filter(d => d.status === 'exists').length;\n                    let message = '';\n                    if (injectedCount > 0) {\n                        message += ` ${injectedCount} `;\n                    }\n                    if (existsCount > 0) {\n                        message += ` ${existsCount} `;\n                    }\n                    toastr.success(message.trim(), '');\n                }\n                logger.log('onInjectRegex', '');\n            }\n            catch (error) {\n                logger.error('onInjectRegex', ':', error);\n                toastr.error('', '');\n            }\n        }\n        function onFullSync() {\n            logger.log('onFullSync', ' era:forceSync  (mode: full)');\n            try {\n                eventEmit('era:forceSync', { mode: 'full' });\n                toastr.success('', '');\n            }\n            catch (error) {\n                logger.error('onFullSync', ' era:forceSync :', error);\n                toastr.error('', '');\n            }\n        }\n        function onLastSync() {\n            logger.log('onLastSync', ' era:forceSync  (mode: latest)');\n            try {\n                eventEmit('era:forceSync', { mode: 'latest' });\n                toastr.success('', '');\n            }\n            catch (error) {\n                logger.error('onLastSync', ' era:forceSync :', error);\n                toastr.error('', '');\n            }\n        }\n        function onRollbackTo() {\n            if (rollbackId.value === null || rollbackId.value < 0) {\n                toastr.warning(' ID', '');\n                return;\n            }\n            logger.log('onRollbackTo', ` era:forceSync  (mode: rollbackTo, message_id: ${rollbackId.value})`);\n            try {\n                eventEmit('era:forceSync', { mode: 'rollbackTo', message_id: rollbackId.value });\n                toastr.success(` #${rollbackId.value} `, '');\n            }\n            catch (error) {\n                logger.error('onRollbackTo', ' era:forceSync :', error);\n                toastr.error('', '');\n            }\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(_Fragment, null, [\n                _createCommentVNode(\"  \"),\n                _createElementVNode(\"section\", _hoisted_1, [\n                    _createCommentVNode(\"  \"),\n                    _cache[11] || (_cache[11] = _createElementVNode(\"h4\", { class: \"card-title\" }, \"\", -1 /* CACHED */)),\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_2, [\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            _createElementVNode(\"button\", {\n                                class: \"btn primary\",\n                                title: \"\",\n                                onClick: _withModifiers(onFullSync, [\"stop\"])\n                            }, [\n                                _createCommentVNode(\"  \"),\n                                _cache[1] || (_cache[1] = _createElementVNode(\"span\", {\n                                    class: \"ico\",\n                                    \"aria-hidden\": \"true\"\n                                }, \"\", -1 /* CACHED */)),\n                                _createCommentVNode(\"  \"),\n                                _cache[2] || (_cache[2] = _createElementVNode(\"span\", { class: \"label\" }, \"\", -1 /* CACHED */)),\n                                _createCommentVNode(\"  \")\n                            ]),\n                            _cache[3] || (_cache[3] = _createElementVNode(\"p\", { class: \"btn-desc\" }, \" **** \", -1 /* CACHED */))\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_4, [\n                            _createElementVNode(\"button\", {\n                                class: \"btn subtle\",\n                                title: \"\",\n                                onClick: _withModifiers(onLastSync, [\"stop\"])\n                            }, [\n                                _createCommentVNode(\"  \"),\n                                _cache[4] || (_cache[4] = _createElementVNode(\"span\", {\n                                    class: \"ico\",\n                                    \"aria-hidden\": \"true\"\n                                }, \"\", -1 /* CACHED */)),\n                                _createCommentVNode(\"  \"),\n                                _cache[5] || (_cache[5] = _createElementVNode(\"span\", { class: \"label\" }, \"\", -1 /* CACHED */)),\n                                _createCommentVNode(\"  \")\n                            ]),\n                            _cache[6] || (_cache[6] = _createElementVNode(\"p\", { class: \"btn-desc\" }, \" era**** \", -1 /* CACHED */))\n                        ]),\n                        _createCommentVNode(\" / \"),\n                        _createElementVNode(\"div\", _hoisted_5, [\n                            _createElementVNode(\"div\", _hoisted_6, [\n                                _withDirectives(_createElementVNode(\"input\", {\n                                    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((rollbackId).value = $event)),\n                                    type: \"number\",\n                                    class: \"input-field\",\n                                    placeholder: \" ID\",\n                                    \"aria-label\": \" ID\"\n                                }, null, 512 /* NEED_PATCH */), [\n                                    [\n                                        _vModelText,\n                                        rollbackId.value,\n                                        void 0,\n                                        { number: true }\n                                    ]\n                                ]),\n                                _createElementVNode(\"button\", {\n                                    class: \"btn subtle combo-btn\",\n                                    title: \"\",\n                                    onClick: _withModifiers(onRollbackTo, [\"stop\"])\n                                }, [...(_cache[7] || (_cache[7] = [\n                                        _createElementVNode(\"span\", {\n                                            class: \"ico\",\n                                            \"aria-hidden\": \"true\"\n                                        }, \"\", -1 /* CACHED */),\n                                        _createElementVNode(\"span\", { class: \"label\" }, \"\", -1 /* CACHED */)\n                                    ]))])\n                            ]),\n                            _cache[8] || (_cache[8] = _createElementVNode(\"p\", { class: \"btn-desc\" }, \" ID\", -1 /* CACHED */))\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_7, [\n                            _createElementVNode(\"button\", {\n                                class: \"btn danger\",\n                                title: \" ERA \",\n                                onClick: _withModifiers(onInjectRegex, [\"stop\"])\n                            }, [...(_cache[9] || (_cache[9] = [\n                                    _createElementVNode(\"span\", {\n                                        class: \"ico\",\n                                        \"aria-hidden\": \"true\"\n                                    }, \"\", -1 /* CACHED */),\n                                    _createElementVNode(\"span\", { class: \"label\" }, \"ERA \", -1 /* CACHED */)\n                                ]))]),\n                            _cache[10] || (_cache[10] = _createElementVNode(\"p\", { class: \"btn-desc\" }, [\n                                _createTextVNode(\" \"),\n                                _createElementVNode(\"br\"),\n                                _createTextVNode(\" 1. ERA \"),\n                                _createElementVNode(\"br\"),\n                                _createTextVNode(\" 2. ERA\"),\n                                _createElementVNode(\"br\"),\n                                _createTextVNode(\" 3. ERAaiera\"),\n                                _createElementVNode(\"br\"),\n                                _createTextVNode(\" 4. ERA\"),\n                                _createElementVNode(\"br\"),\n                                _createTextVNode(\" era\"),\n                                _createElementVNode(\"br\"),\n                                _createTextVNode(\" 1. \"),\n                                _createElementVNode(\"br\"),\n                                _createTextVNode(\" 2. ERAai\"),\n                                _createElementVNode(\"br\"),\n                                _createTextVNode(\" 3. ERA**** \")\n                            ], -1 /* CACHED */))\n                        ])\n                    ])\n                ])\n            ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ActionButtons.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ActionButtons.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ActionButtons.vue?vue&type=style&index=0&id=6bdeb56f&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6bdeb56f\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, withModifiers as _withModifiers, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives, vModelText as _vModelText, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode, vShow as _vShow } from \"vue\";\nconst _hoisted_1 = {\n    class: \"settings-card\",\n    role: \"region\",\n    \"aria-label\": \"ERA \"\n};\nconst _hoisted_2 = [\"aria-expanded\"];\nconst _hoisted_3 = {\n    class: \"chev\",\n    \"aria-hidden\": \"true\"\n};\nconst _hoisted_4 = { class: \"content\" };\nconst _hoisted_5 = { class: \"toolbar\" };\nconst _hoisted_6 = { class: \"vars\" };\nconst _hoisted_7 = [\"title\"];\nconst _hoisted_8 = { class: \"var-editor\" };\nconst _hoisted_9 = {\n    key: 0,\n    class: \"switch\"\n};\nconst _hoisted_10 = [\"onUpdate:modelValue\"];\nconst _hoisted_11 = [\"onUpdate:modelValue\", \"placeholder\"];\nconst _hoisted_12 = [\"onUpdate:modelValue\", \"placeholder\"];\nconst _hoisted_13 = [\"onUpdate:modelValue\", \"placeholder\", \"onInput\"];\nconst _hoisted_14 = { class: \"type-chip\" };\nimport { reactive, ref } from 'vue'; // Vue  API\nimport toastr from 'toastr';\nimport { settings, updateScriptSettings } from '../../../utils/era_data';\nimport { Logger } from '../../../utils/log'; // \nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'EraSettingsPanel',\n    setup(__props) {\n        /* \n           - \n           -  boolean/number/string/json \n           - \n        */\n        const logger = new Logger(\"ERA\\u53D8\\u91CF\\u6846\\u67B6/ui/components/RightRailContent/EraSettingsPanel\"); // \n        // ===  ===\n        const isOpen = ref(false); // \n        // ===  ===\n        const rows = ref([]); // \n        const edits = reactive({}); // //\n        const jsonBuffers = reactive({}); //  JSON \n        const jsonState = reactive({}); // JSON \n        // ===  ===\n        function detectType(v) {\n            // \n            if (typeof v === 'boolean')\n                return 'boolean'; // \n            if (typeof v === 'number' && Number.isFinite(v))\n                return 'number'; // \n            if (typeof v === 'string')\n                return 'string'; // \n            return 'json'; //  json//null/\n        }\n        function humanType(t) {\n            // \n            return t === 'boolean' ? '' : t === 'number' ? '' : t === 'string' ? '' : 'JSON'; // \n        }\n        function safeStringify(v) {\n            //  JSON \n            try {\n                return JSON.stringify(v, null, 2);\n            }\n            catch {\n                return String(v);\n            } // \n        }\n        // ===  ===\n        function loadVars() {\n            try {\n                logger.debug('loadVars', '...');\n                const obj = settings.value;\n                logger.debug('loadVars', ':', obj);\n                if (!obj || Object.keys(obj).length === 0) {\n                    logger.warn('loadVars', 'UI ');\n                    rows.value = [];\n                    toastr.info('');\n                    return;\n                }\n                // \n                rows.value = [];\n                for (const k of Object.keys(edits))\n                    delete edits[k];\n                for (const k of Object.keys(jsonBuffers))\n                    delete jsonBuffers[k];\n                for (const k of Object.keys(jsonState))\n                    delete jsonState[k];\n                // \n                Object.entries(obj)\n                    .filter(([key]) => key !== '')\n                    .forEach(([key, value]) => {\n                    const t = detectType(value);\n                    rows.value.push({ key, value, type: t });\n                    if (t === 'json') {\n                        jsonBuffers[key] = safeStringify(value);\n                    }\n                    else {\n                        edits[key] = value;\n                    }\n                });\n                toastr.success('', '');\n            }\n            catch (e) {\n                logger.error('loadVars', ':', e);\n                toastr.error(' ERA ', '');\n            }\n        }\n        // ===  ===\n        function onToggle() {\n            // \n            isOpen.value = !isOpen.value; // \n            if (isOpen.value && rows.value.length === 0)\n                loadVars(); // \n        }\n        // === JSON  +  ===\n        function markJsonTouched(key) {\n            //  JSON \n            const txt = jsonBuffers[key] ?? ''; // \n            if (txt.trim() === '') {\n                // \n                jsonState[key] = { bad: true, ok: false, msg: ' null  null' }; // \n                return; // \n            }\n            try {\n                JSON.parse(txt);\n                jsonState[key] = { ok: true, bad: false, msg: 'JSON ' };\n            }\n            catch (e) {\n                // \n                jsonState[key] = { bad: true, ok: false, msg: `JSON ${e?.message ?? ''}` };\n            } // \n        }\n        // ===  ===\n        function discardEdits() {\n            // \n            logger.log('discardEdits', '');\n            loadVars(); // \n            toastr.info('', '');\n        }\n        // ===  ===\n        async function saveEdits() {\n            // \n            const originalRows = JSON.parse(JSON.stringify(rows.value)); // \n            try {\n                // 1.  UI\n                const updatedSettings = {};\n                rows.value.forEach(row => {\n                    if (row.type === 'json') {\n                        if (jsonState[row.key]?.bad) {\n                            throw new Error(` ${row.key}  JSON `);\n                        }\n                        if (jsonBuffers[row.key] != null) {\n                            const newValue = JSON.parse(jsonBuffers[row.key]);\n                            row.value = newValue;\n                            updatedSettings[row.key] = newValue;\n                        }\n                    }\n                    else if (edits[row.key] !== undefined) {\n                        row.value = edits[row.key];\n                        updatedSettings[row.key] = edits[row.key];\n                    }\n                });\n                toastr.success('...', '');\n                // 2. \n                await updateScriptSettings(currentSettings => {\n                    const next = { ...currentSettings };\n                    // //\n                    Object.entries(edits).forEach(([k, v]) => {\n                        const key = k;\n                        next[key] = v;\n                    });\n                    //  JSON \n                    Object.entries(jsonBuffers).forEach(([k, txt]) => {\n                        if (txt != null) {\n                            if (jsonState[k]?.bad)\n                                throw new Error(` ${k}  JSON `);\n                            const key = k;\n                            next[key] = JSON.parse(txt);\n                        }\n                    });\n                    return next;\n                });\n                logger.log('saveEdits', '');\n                toastr.success('', '');\n                window.dispatchEvent(new CustomEvent('era-settings-updated'));\n                //  loadVars()\n            }\n            catch (e) {\n                logger.error('saveEdits', '', e);\n                toastr.error(`${e?.message ?? e}`, '');\n                // 3.  UI\n                rows.value = originalRows;\n                //  edits  jsonBuffers  UI\n                originalRows.forEach((row) => {\n                    if (row.type === 'json') {\n                        jsonBuffers[row.key] = safeStringify(row.value);\n                    }\n                    else {\n                        edits[row.key] = row.value;\n                    }\n                });\n            }\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(_Fragment, null, [\n                _createCommentVNode(\"  ActionButtons  \"),\n                _createElementVNode(\"section\", _hoisted_1, [\n                    _createCommentVNode(\"  \"),\n                    _createCommentVNode(\" / \"),\n                    _createElementVNode(\"button\", {\n                        class: \"card-header\",\n                        \"aria-expanded\": isOpen.value,\n                        onClick: onToggle\n                    }, [\n                        _createCommentVNode(\"  \"),\n                        _cache[0] || (_cache[0] = _createElementVNode(\"span\", { class: \"title\" }, \"ERA \", -1 /* CACHED */)),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"span\", _hoisted_3, _toDisplayString(isOpen.value ? '' : ''), 1 /* TEXT */),\n                        _createCommentVNode(\"  \")\n                    ], 8 /* PROPS */, _hoisted_2),\n                    _createCommentVNode(\"  \"),\n                    _withDirectives(_createElementVNode(\"div\", _hoisted_4, [\n                        _createCommentVNode(\"  \"),\n                        _createCommentVNode(\" // \"),\n                        _createElementVNode(\"div\", _hoisted_5, [\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"button\", {\n                                class: \"mini-btn\",\n                                title: \"\",\n                                onClick: _withModifiers(loadVars, [\"stop\"])\n                            }, \" \"),\n                            _createCommentVNode(\"  \"),\n                            _cache[1] || (_cache[1] = _createElementVNode(\"div\", { class: \"spacer\" }, null, -1 /* CACHED */)),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"button\", {\n                                class: \"mini-btn subtle\",\n                                title: \"\",\n                                onClick: _withModifiers(discardEdits, [\"stop\"])\n                            }, \" \"),\n                            _createCommentVNode(\"  \"),\n                            _createElementVNode(\"button\", {\n                                class: \"mini-btn primary\",\n                                title: \"\",\n                                onClick: _withModifiers(saveEdits, [\"stop\"])\n                            }, \" \"),\n                            _createCommentVNode(\"  \")\n                        ]),\n                        _createCommentVNode(\"  \"),\n                        _createElementVNode(\"div\", _hoisted_6, [\n                            (rows.value.length > 0)\n                                ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n                                    _createCommentVNode(\"  \"),\n                                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(rows.value, (row) => {\n                                        return (_openBlock(), _createElementBlock(\"div\", {\n                                            key: row.key,\n                                            class: \"var-row\"\n                                        }, [\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"label\", {\n                                                class: \"var-key\",\n                                                title: row.key\n                                            }, _toDisplayString(row.key), 9 /* TEXT, PROPS */, _hoisted_7),\n                                            _createCommentVNode(\"  \"),\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"div\", _hoisted_8, [\n                                                _createCommentVNode(\"  \"),\n                                                _createCommentVNode(\"  \"),\n                                                (row.type === 'boolean')\n                                                    ? (_openBlock(), _createElementBlock(\"label\", _hoisted_9, [\n                                                        _createCommentVNode(\"  \"),\n                                                        _withDirectives(_createElementVNode(\"input\", {\n                                                            \"onUpdate:modelValue\": ($event) => ((edits[row.key]) = $event),\n                                                            type: \"checkbox\"\n                                                        }, null, 8 /* PROPS */, _hoisted_10), [\n                                                            [_vModelCheckbox, edits[row.key]]\n                                                        ]),\n                                                        _createCommentVNode(\"  \"),\n                                                        _cache[2] || (_cache[2] = _createElementVNode(\"span\", { class: \"track\" }, null, -1 /* CACHED */)),\n                                                        _createCommentVNode(\"  \")\n                                                    ]))\n                                                    : (row.type === 'number')\n                                                        ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                                            _createCommentVNode(\" number  \"),\n                                                            _withDirectives(_createElementVNode(\"input\", {\n                                                                \"onUpdate:modelValue\": ($event) => ((edits[row.key]) = $event),\n                                                                type: \"number\",\n                                                                class: \"ipt\",\n                                                                placeholder: String(row.value)\n                                                            }, null, 8 /* PROPS */, _hoisted_11), [\n                                                                [\n                                                                    _vModelText,\n                                                                    edits[row.key],\n                                                                    void 0,\n                                                                    { number: true }\n                                                                ]\n                                                            ]),\n                                                            _createCommentVNode(\"  \")\n                                                        ], 64 /* STABLE_FRAGMENT */))\n                                                        : (row.type === 'string')\n                                                            ? (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                                                                _createCommentVNode(\" text  \"),\n                                                                _withDirectives(_createElementVNode(\"input\", {\n                                                                    \"onUpdate:modelValue\": ($event) => ((edits[row.key]) = $event),\n                                                                    type: \"text\",\n                                                                    class: \"ipt\",\n                                                                    placeholder: String(row.value)\n                                                                }, null, 8 /* PROPS */, _hoisted_12), [\n                                                                    [_vModelText, edits[row.key]]\n                                                                ]),\n                                                                _createCommentVNode(\"  \")\n                                                            ], 64 /* STABLE_FRAGMENT */))\n                                                            : (_openBlock(), _createElementBlock(_Fragment, { key: 3 }, [\n                                                                _createCommentVNode(\" //null/JSON  \"),\n                                                                _withDirectives(_createElementVNode(\"textarea\", {\n                                                                    \"onUpdate:modelValue\": ($event) => ((jsonBuffers[row.key]) = $event),\n                                                                    class: \"ipt ta\",\n                                                                    placeholder: safeStringify(row.value),\n                                                                    onInput: ($event) => (markJsonTouched(row.key))\n                                                                }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_13), [\n                                                                    [_vModelText, jsonBuffers[row.key]]\n                                                                ]),\n                                                                _createCommentVNode(\" JSON  \"),\n                                                                _createElementVNode(\"span\", {\n                                                                    class: _normalizeClass([\"hint\", { ok: jsonState[row.key]?.ok, bad: jsonState[row.key]?.bad }])\n                                                                }, _toDisplayString(jsonState[row.key]?.msg ?? ' JSON '), 3 /* TEXT, CLASS */),\n                                                                _createCommentVNode(\" JSON  \")\n                                                            ], 64 /* STABLE_FRAGMENT */))\n                                            ]),\n                                            _createCommentVNode(\"  \"),\n                                            _createElementVNode(\"span\", _hoisted_14, _toDisplayString(humanType(row.type)), 1 /* TEXT */),\n                                            _createCommentVNode(\"  \")\n                                        ]));\n                                    }), 128 /* KEYED_FRAGMENT */))\n                                ], 64 /* STABLE_FRAGMENT */))\n                                : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                    _createCommentVNode(\"  \"),\n                                    _cache[3] || (_cache[3] = _createElementVNode(\"div\", { class: \"placeholder\" }, [\n                                        _createElementVNode(\"p\", null, \"\"),\n                                        _createCommentVNode(\"  \"),\n                                        _createElementVNode(\"p\", { class: \"dim\" }, [\n                                            _createTextVNode(\"  \"),\n                                            _createElementVNode(\"code\", null, \"app_ready\"),\n                                            _createTextVNode(\"  \"),\n                                            _createElementVNode(\"code\", null, \"initializeExternalSettings()\"),\n                                            _createTextVNode(\"  \")\n                                        ]),\n                                        _createCommentVNode(\"  \")\n                                    ], -1 /* CACHED */))\n                                ], 64 /* STABLE_FRAGMENT */))\n                        ])\n                    ], 512 /* NEED_PATCH */), [\n                        [_vShow, isOpen.value]\n                    ])\n                ])\n            ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./EraSettingsPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./EraSettingsPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./EraSettingsPanel.vue?vue&type=style&index=0&id=e1f9e9e0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-e1f9e9e0\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"right-rail\" };\nconst _hoisted_2 = { class: \"right-rail-content-wrapper\" };\nimport AboutEra from './RightRailContent/AboutEra.vue';\nimport ActionButtons from './RightRailContent/ActionButtons.vue';\nimport EraSettingsPanel from './RightRailContent/EraSettingsPanel.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'RightRail',\n    setup(__props) {\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"aside\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createVNode(ActionButtons),\n                    _createVNode(EraSettingsPanel),\n                    _createVNode(AboutEra)\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./RightRail.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./RightRail.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./RightRail.vue?vue&type=style&index=0&id=61d00544&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-61d00544\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { ref } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'ThemeManager',\n    setup(__props, { expose: __expose }) {\n        const isDarkMode = ref(false);\n        //  defineExpose \n        __expose({\n            isDarkMode,\n        });\n        return () => { };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./ThemeManager.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ThemeManager.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ThemeManager.vue?vue&type=style&index=0&id=1b0b79e5&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineStore } from 'pinia';\nimport { ref } from 'vue';\nimport type { WriteDonePayload } from '../utils/constants';\n\nexport const useUiStore = defineStore('ui', () => {\n  const currentView = ref<'FloatingBall' | 'ExpandedView'>('FloatingBall');\n  const eventData = ref<WriteDonePayload | null>(null);\n\n  function switchView(viewName: 'FloatingBall' | 'ExpandedView') {\n    if (currentView.value !== viewName) {\n      currentView.value = viewName;\n    }\n  }\n\n  function setEventData(data: WriteDonePayload | null) {\n    eventData.value = data;\n  }\n\n  return {\n    currentView,\n    eventData,\n    switchView,\n    setEventData,\n  };\n});\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createVNode as _createVNode, unref as _unref, vShow as _vShow, withDirectives as _withDirectives, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"era-expanded-layer\" };\nconst _hoisted_2 = { class: \"era-shell\" };\nimport { storeToRefs } from 'pinia';\nimport { onBeforeUnmount, onMounted, ref } from 'vue';\nimport { settings } from '../utils/era_data';\nimport { Logger } from '../utils/log';\nimport EraPanel from './components/EraPanel.vue';\nimport FloatingBall from './components/FloatingBall.vue';\nimport RightRail from './components/RightRail.vue';\nimport ThemeManager from './components/ThemeManager.vue';\nimport { useUiStore } from './store';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'App',\n    setup(__props) {\n        const logger = new Logger(\"ERA\\u53D8\\u91CF\\u6846\\u67B6/ui/App\");\n        //  Pinia store  action\n        const uiStore = useUiStore();\n        const { currentView: currentComponent, eventData: dataRef } = storeToRefs(uiStore);\n        // \n        const themeManager = ref(null);\n        const isDarkMode = ref(false);\n        const loadThemeSetting = () => {\n            try {\n                const darkModeValue = settings.value?.[''] ?? false;\n                isDarkMode.value = darkModeValue;\n                if (themeManager.value) {\n                    themeManager.value.isDarkMode = darkModeValue;\n                }\n                logger.debug('loadThemeSetting', `: ${darkModeValue ? 'Dark' : 'Light'}`);\n            }\n            catch (e) {\n                logger.error('loadThemeSetting', '', e);\n                isDarkMode.value = false; // Fallback to light mode\n            }\n        };\n        onMounted(() => {\n            loadThemeSetting();\n            window.addEventListener('era-settings-updated', loadThemeSetting);\n        });\n        onBeforeUnmount(() => {\n            window.removeEventListener('era-settings-updated', loadThemeSetting);\n        });\n        const requestSwitchView = (viewName) => {\n            logger.debug('requestSwitchView', `: ${viewName}`);\n            uiStore.switchView(viewName);\n        };\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"era-app-container\", { 'dark-theme': isDarkMode.value }])\n            }, [\n                _createVNode(ThemeManager, {\n                    ref_key: \"themeManager\",\n                    ref: themeManager\n                }, null, 512 /* NEED_PATCH */),\n                _withDirectives(_createVNode(FloatingBall, {\n                    onClick: _cache[0] || (_cache[0] = ($event) => (requestSwitchView('ExpandedView')))\n                }, null, 512 /* NEED_PATCH */), [\n                    [_vShow, _unref(currentComponent) === 'FloatingBall']\n                ]),\n                _withDirectives(_createElementVNode(\"div\", _hoisted_1, [\n                    _createCommentVNode(\"  \"),\n                    _createElementVNode(\"div\", _hoisted_2, [\n                        _createCommentVNode(\"  +  \"),\n                        _createVNode(EraPanel, { data: _unref(dataRef) }, null, 8 /* PROPS */, [\"data\"]),\n                        _createVNode(RightRail)\n                    ])\n                ], 512 /* NEED_PATCH */), [\n                    [_vShow, _unref(currentComponent) === 'ExpandedView']\n                ])\n            ], 2 /* CLASS */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=7634a531&lang=css\"\nimport \"./App.vue?vue&type=style&index=1&id=7634a531&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.24_typescript@6.0.0-dev.20250807__webpack@5.102.1/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7634a531\"]])\n\nexport default __exports__","import { createPinia } from 'pinia';\nimport { createApp, App as VueApp } from 'vue';\nimport { settings } from '../utils/era_data';\nimport { Logger } from '../utils/log';\nimport App from './App.vue';\nimport { useUiStore } from './store';\nimport { createMountPoint, destroyMountPoint, deteleportStyle, teleportStyle } from './utils/dom';\n\nconst logger = new Logger();\nlet vueApp: VueApp | null = null;\nlet mountPoint: JQuery<HTMLDivElement> | null = null;\n\n/**\n * \n * @param viewName \n */\nfunction switchView(viewName: 'FloatingBall' | 'ExpandedView') {\n  logger.debug('switchView', `: ${viewName}`);\n  // store \n  if ((window as any).eraUiStore) {\n    (window as any).eraUiStore.switchView(viewName);\n  } else {\n    logger.warn('switchView', 'UI store');\n  }\n}\n\n//  window\n(window as any).eraUiSwitchView = switchView;\n\nfunction unmountVueApp() {\n  if (vueApp) {\n    logger.debug('unmountVueApp', ' Vue ');\n    vueApp.unmount();\n    vueApp = null;\n  }\n}\n\nfunction unloadUI() {\n  logger.log('unloadUI', 'UI ');\n  unmountVueApp();\n  deteleportStyle();\n  if (mountPoint) {\n    logger.debug('unloadUI', '');\n    destroyMountPoint();\n    mountPoint = null;\n  }\n  // \n  window.removeEventListener('pagehide', unloadUI);\n  logger.log('unloadUI', 'UI ');\n}\n\n// \n$(() => {\n  if (settings.value[''] === false) {\n    logger.log('initialize', 'UI...');\n    unloadUI();\n    return;\n  }\n  logger.log('initialize', 'UI ');\n  // \n  mountPoint = createMountPoint();\n  logger.debug('$(document).ready', '', mountPoint);\n\n  //  body\n  $('body').append(mountPoint);\n  logger.debug('$(document).ready', ' body');\n\n  //  Vue \n  vueApp = createApp(App);\n  const pinia = createPinia();\n  vueApp.use(pinia);\n  vueApp.mount(mountPoint[0]);\n\n  //  store  window\n  const uiStore = useUiStore(pinia);\n  (window as any).eraUiStore = uiStore;\n\n  // \n  teleportStyle();\n  logger.debug('initialize', 'Vue App ');\n\n  //  era:writeDone \n  eventOn('era:writeDone', (data: any) => {\n    logger.log('era:writeDone', ' era:writeDone  store', data);\n    uiStore.setEventData(data); //  store action \n  });\n  logger.debug('$(document).ready', ' era:writeDone ');\n\n  // \n  window.removeEventListener('pagehide', unloadUI); // \n  window.addEventListener('pagehide', unloadUI); // \n});\n","export function createMountPoint(): JQuery<HTMLDivElement> {\n  return $('<div>').attr('id', `era-ui-mount-point-${getScriptId()}`).css({\n    position: 'fixed',\n    bottom: '20px',\n    left: '20px',\n    'z-index': 10000,\n  }) as JQuery<HTMLDivElement>;\n}\n\nexport function destroyMountPoint(): void {\n  $(`div#era-ui-mount-point-${getScriptId()}`).remove();\n}\n\nexport function teleportStyle(): void {\n  const scriptId = getScriptId();\n  // \n  $(`head > div[script_id=\"${scriptId}\"]`).remove();\n\n  const $div = $('<div>').attr('script_id', scriptId).append($(document).find('head > style').clone());\n  $('head').append($div);\n}\n\nexport function deteleportStyle(): void {\n  $(`head > div[script_id=\"${getScriptId()}\"]`).remove();\n}\n","/**\n * @file ERA  - \n * @description\n *  ERA \n * 1. ****: \n * 2. ****: \n * 3. ****: \n *     `event_queue.ts`\n *    \n *\n * ****`index.ts`  `event_queue.ts`\n * \n */\n\n'use strict';\n\nimport { EVENT_GROUPS } from './events/merger';\nimport { pushToQueue } from './events/queue';\n\n// ,  {{ERA:...}} \nimport './macro/parser';\nimport './macro/placeholder';\n\n//  UI \nimport './ui';\n\n// ===============================\n// \n// ===============================\n\n/**\n * @const {string[]} eventsToListen\n * @description  ERA \n */\nconst eventsToListen = [\n  ...EVENT_GROUPS.INIT,\n  ...EVENT_GROUPS.SYNC,\n  ...EVENT_GROUPS.API,\n  ...EVENT_GROUPS.UPDATE_MK_ONLY,\n  ...EVENT_GROUPS.COLLISION_DETECTORS,\n  ...EVENT_GROUPS.COMBO_STARTERS,\n  ...EVENT_GROUPS.DIRECTED_SYNC,\n];\n\n// \n// \neventsToListen.forEach(ev => {\n  // `eventOn` \n  //  `ev`  `ev`  `detail` \n  eventOn(ev, (detail: any) => pushToQueue(ev, detail));\n});\n\n// \n// \neventOn(getButtonEvent(''), () => pushToQueue('manual_write'));\neventOn(getButtonEvent(''), () => pushToQueue('manual_sync'));\neventOn(getButtonEvent(''), () => pushToQueue('manual_full_sync'));\n"],"names":["content","__esModule","default","module","id","locals","exports","add","cssWithMappingToString","list","toString","this","map","item","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","push","___CSS_LOADER_EXPORT___","listToStyles","parentId","styles","newStyles","part","css","sourceMap","parts","hasDocument","document","DEBUG","Error","stylesInDom","head","getElementsByTagName","singletonElement","singletonCounter","isProduction","noop","options","ssrIdKey","isOldIE","navigator","test","userAgent","toLowerCase","addStylesClient","_isProduction","_options","addStylesToDom","newList","mayRemove","domStyle","refs","j","addStyle","createStyleElement","styleElement","createElement","type","appendChild","obj","update","remove","querySelector","parentNode","removeChild","styleIndex","applyToSingletonTag","bind","applyToTag","newObj","textStore","replaceText","index","replacement","filter","Boolean","styleSheet","cssText","cssNode","createTextNode","childNodes","insertBefore","setAttribute","ssrId","sources","btoa","unescape","encodeURIComponent","JSON","stringify","firstChild","cssMapping","base64","data","sourceMapping","sfc","props","target","__vccOpts","key","val","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","d","a","definition","o","Object","defineProperty","enumerable","get","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","z","SettingsSchema","object","boolean","string","number","CHAT_SCOPE","META_DATA_PATH","STAT_DATA_PATH","LOGS_PATH","SEL_PATH","ERA_DATA_TAG","ERA_DATA_REGEX","RegExp","ERA_API_EVENTS","INSERT_BY_OBJECT","UPDATE_BY_OBJECT","INSERT_BY_PATH","UPDATE_BY_PATH","DELETE_BY_OBJECT","DELETE_BY_PATH","GET_CURRENT_VARS","GET_SNAPSHOT_AT_MK","GET_SNAPSHOTS_BETWEEN_MKS","GET_SNAPSHOT_AT_MID","GET_SNAPSHOTS_BETWEEN_MIDS","REQUEST_WRITE_DONE","FORCE_SYNC","ERA_EVENT_EMITTER","_","Vue","scriptSettingsRef","ref","parse","settings","readonly","removeMetaFields","recurse","current","Array","isArray","forEach","startsWith","getEraData","chatVars","getVariables","meta","stat","async","updateEraMetaData","updater","updateVariablesWith","v","currentMeta","newMeta","updateScriptSettings","rawSettings","currentSettings","newSettings","script_id","getScriptId","DEBUG_CONFIG_LS_KEY","enabledPatterns","disabledPatterns","loadDebugConfig","configStr","globalThis","localStorage","getItem","config","toRegex","p","replace","enabled","disabled","e","console","error","updateConfig","newConfig","uniqueConfig","Set","setItem","log","eraDebug","pattern","delete","from","status","clear","logContext","mk","Logger","moduleName","constructor","_getModuleNameFromStack","callerLine","stack","split","find","line","includes","match","formatMessage","funcName","message","String","debug","some","re","formattedMessage","warn","toastr","warning","errorObj","logger","EVENT_GROUPS","INIT","tavern_events","APP_READY","SYNC","MESSAGE_RECEIVED","MESSAGE_DELETED","MESSAGE_SWIPED","CHAT_CHANGED","API","values","UPDATE_MK_ONLY","MESSAGE_SENT","COLLISION_DETECTORS","GENERATION_STARTED","COMBO_STARTERS","MESSAGE_UPDATED","DIRECTED_SYNC","MESSAGE_EDITED","EVENT_COLLISION_MAP","Map","EVENT_COMBO_MAP","next","resultType","maxInterval","EVENT_DEBOUNCE_MAP","getEventGroup","eventType","mergeEventBatch","batchToProcess","originalEvents","cloneDeep","finalJobs","currentJob","prevJob","timeDifference","timestamp","comboRule","pop","detail","collisionRule","prevGroup","filteredJobs","job","group","isOrphanedDetector","isOrphanedComboStarter","before","after","ESCAPE_MAP","UNESCAPE_MAP","invert","escapeRegex","keys","escapeRegExp","unescapeRegex","escapeEraData","isPlainObject","unescapeEraData","sanitizeArrays","mergeReplaceArray","base","patch","mergeWith","b","raw","s","arr","parseJsonl","str","objects","strWithoutComments","result","inString","char","nextChar","endOfLine","indexOf","endOfComment","substring","stripComments","trimmedStr","trim","braceCount","startIndex","jsonString","stripCodeFence","t","createTagRegex","keyword","mode","escapedKeyword","findTagFromEndByRegex","text","tagNameRegex","endIndex","closeTagRegex","source","currentMatch","lastMatch","exec","tagName","closeIndex","openTag","openIndex","lastIndexOf","removeTagsByRegex","processedText","found","slice","containsXMLTags","tagRegex","inSingleQuote","inDoubleQuote","backslashRun","ch","isEscaped","innerSingleQuote","innerDoubleQuote","innerBackslashRun","innerCh","innerEscaped","rawTag","converter","to","traditionalToSimplified","parseCharacterMacros","SillyTavern","name1","name2","getMessageContent","msg","mes","swipes","sid","Number","swipe_id","isUserMessage","messageContent","customFormatBlock","keyMatch","typeMatch","eraData","parseEraData","role","findLastAiMessage","messages","getChatMessages","include_swipes","message_id","updateMessageContent","newContent","refresh","updatePayload","newSwipes","setChatMessages","readMessageKey","ensureMessageKey","isNew","existingMk","newMk","Date","now","Math","random","messageType","dataString","updateLatestSelectedMk","selectedMks","set","initializeExternalSettings","initEraSettings","$","applyRollback","entry","op","path","unset","value_old","applyForward","value_new","calculateStatAt","targetMK","allLogs","targetIndex","errorMsg","tempStat","mkToApply","findLatestNewValue","startMessageId","selectedMksCount","editLogForMk","logEntry","subPath","parentNewVal","has","foundVal","getStatAtMK","getStatsBetweenMKs","startMk","endMk","validMks","actualStartMk","results","currentStat","calculateAllStatsBetweenMks","debouncedEmitApiWrite","debounce","eventEmit","leading","trailing","emitWriteDoneEvent","payload","statWithoutMeta","fullPayload","editLogs","inputPayload","emitQueryResultEvent","queryType","request","applyDeleteAtLevel","statData","basePath","patchObj","editLog","currentNodeInVars","necessary","metaPatch","isBypassingProtection","isEmpty","fullPath","subPatchObj","valOld","processDeleteBlocks","allDeletes","initialStat","finalStat","deleteRoot","getInheritedTemplateContent","parentTplContent","prototypeContent","specificContent","merged","applyInsertAtLevel","inheritedContent","parentData","localTplContent","parentNodeData","varsContent","mergedContent","resolveTemplate","unInsertAble","composed","tplContent","applyTemplateToPatch","finalValue","patchKeys","isMetaOnlyPatch","every","hasMeaningfulPatch","rejectedKey","subPatch","subInheritedContent","processInsertBlocks","allInserts","insertRoot","applyEditAtLevel","messageId","isUpdatable","valNew","cleaned","processEditBlocks","allEdits","editRoot","ApplyVarChangeForMessage","commands","toSimplified","rawContent","commandRegex","blockContent","cleanedBlock","parsedData","escapedData","extractAndParseCommands","accumulatedLogs","command","inputStat","outputStat","finalEditLog","err","getMkFromMsg","findDivergencePoint","allMessages","oldSelectedMks","initialMeta","forceFullResync","recalcId","currentMks","firstMismatch","minLength","min","deletedMks","difference","mks","metaData","checkEditLogsAreEmpty","newSelectedMks","resyncStateOnHistoryChange","targetMessageId","stopAtTarget","divergence","isFinite","normalizedTargetId","firstRecalcId","statForRecalc","currentMK","currentIndex","mkToRollback","rollbackStatToMK","metaForRecalc","contextMeta","ensuredMkForCurrent","ensuredMk","ensureError","newStat","updateEraStatData","forceRenderMessage","handleSyncEvent","actionsTaken","isFullSync","resync","scriptVars","messageCount","Promise","resolve","setTimeout","recentMessages","forceRenderRecentMessages","lastWriteDonePayload","performApiWrite","contentString","J","block","blockTag","lastAiMessage","handleApiEvent","api","updateByObject","updateByPath","deleteByObject","deleteByPath","lastMk","lastMessageId","lastMessage","is_user","errorMessage","handleGetCurrentVars","handleGetSnapshotAtMk","finalResult","handleGetSnapshotsBetweenMks","handleGetSnapshotAtMId","startId","endId","handleGetSnapshotsBetweenMIds","latestMessage","msgId","syncJob","handleForceSync","eventOn","consecutiveMkState","updateConsecutiveMkCount","count","dispatchAndExecuteTask","_mkToIgnore","eventGroup","eventDetail","rollback","apply","apiWrite","editedResync","swipedRollback","messageOrId","retries","delay","getMessageContentWithRetry","isApiBypassEvent","newMsgId","isNewKey","newIsNewKey","ensureMkForLatestMessage","chat_message","placeholder","currentContent","newMessage","trimEnd","ensurePlaceholder","actions","consecutiveProcessingCount","handleUpdateMkOnlyEvent","targetedMessageId","parsed","eventArgs","extractMessageIdFromDetail","eventQueue","isProcessing","isWaiting","unlockSignal","pushToQueue","firstJob","debounceTime","splice","signal","processQueue","parseEraMacros","statWithMeta","finalStatWithMeta","finalStatWithoutMeta","withMeta","trimmedPath","includeMeta","statToUse","finalData","handleWriteDone","$messageDiv","retrieveDisplayedMessage","currentHtml","html","chatMessage","chat","rawMessage","messageHasMacro","htmlHasMacro","parsedMessage","parsedHtml","messageChanged","htmlChanged","hasUpdated","formatFn","formatAsDisplayedMessage","formattedHtml","formatError","updateMessageBlock","rerenderMessage","$root","hasPatched","quickMacroCheck","visit","node","nodeType","Node","TEXT_NODE","original","nodeValue","replaced","ELEMENT_NODE","children","child","each","element","replaceEraMacrosInElement","handleGenerateAfterData","generate_data","dry_run","prompt","processMacros","eventRemoveListener","originalContent","GENERATE_AFTER_DATA","window","on","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","__name","title","defaultOpen","setup","__props","open","_ctx","_cache","onClick","$event","$slots","_hoisted_6","_hoisted_7","_hoisted_8","isUser","onMounted","watch","newProps","deep","defineComponent","name","required","level","defaultCollapsed","maxDepth","computed","isObject","foldable","newOpenState","primitiveText","summary","childEntries","out","cv","idx","$props","$setup","$data","$options","_component_JsonNode","style","paddingLeft","childVal","childKey","isPlainObjectOrArray","primitiveType","isArrayRoot","rootOpen","rootClose","JsonNode","EraAccordion","PrettyJsonViewer","tabs","active","emits","emit","__emit","innerActive","label","_hoisted_9","_hoisted_10","latestData","latestMkFromProps","selectedMk","messageIdInput","historicalSnapshot","loading","activeTab","reversedSelectedMks","reverse","displayData","isUserMessageComputed","newLatestMk","immediate","handleSelectionChange","queryByMId","handleQueryResult","handleResult","formatMkForDisplay","isLatest","onUnmounted","for","onChange","onKeyup","MetaHeader","TabSwitch","pure","Infinity","full","viewName","eraUiSwitchView","OperationDetails","SnapshotManager","$emit","ensureCharacterRegex","regexData","isCharacterTavernRegexesEnabled","reason","success","getTavernRegexes","scope","regex","script_name","updateTavernRegexesWith","regexes","HIDE_ERA_DATA_REGEX","run_on_edit","find_regex","replace_string","user_input","ai_output","slash_command","world_info","destination","display","min_depth","max_depth","HIDE_ERA_METADATA_REGEX","HIDE_ERA_THINKING_REGEX","REPLACE_PLACEHOLDER_REGEX","injectEntryToWorldbook","worldbookName","newEntry","entryExists","entryName","exists","getWorldbook","isEntryInWorldbook","createWorldbookEntries","eraVarOperationRuleEntry","strategy","keys_secondary","logic","scan_depth","position","depth","order","probability","recursion","prevent_incoming","prevent_outgoing","delay_until","effect","sticky","cooldown","eraVarIntentEntry","initEraWorldbookEntries","primaryWorldbook","getCharWorldbookNames","primary","createWorldbook","charWorldbooks","rebindCharWorldbooks","createAndBindPrimaryWorldbook","details","entriesToInject","allSuccess","rollbackId","onInjectRegex","firstMessage","regexResult","regexesToInject","regexName","initEraCharacterRegexes","injectedCount","existsCount","worldbookResult","onFullSync","onLastSync","onRollbackTo","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","isOpen","rows","edits","reactive","jsonBuffers","jsonState","safeStringify","loadVars","entries","onToggle","discardEdits","saveEdits","originalRows","updatedSettings","row","bad","newValue","txt","dispatchEvent","CustomEvent","onInput","ok","ActionButtons","EraSettingsPanel","AboutEra","expose","__expose","isDarkMode","useUiStore","currentView","eventData","switchView","setEventData","uiStore","currentComponent","dataRef","themeManager","loadThemeSetting","darkModeValue","addEventListener","onBeforeUnmount","removeEventListener","ThemeManager","ref_key","FloatingBall","EraPanel","RightRail","vueApp","mountPoint","unloadUI","unmount","eraUiStore","attr","bottom","left","append","createApp","App","pinia","use","mount","scriptId","$div","clone","teleportStyle","ev","getButtonEvent"],"sourceRoot":""}
